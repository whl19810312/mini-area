
> metaverse-project@1.0.0 server
> nodemon server/index.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 05:25:13 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:13 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 05:25:14 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 05:25:14 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 05:25:16 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 05:25:17 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32m=================================[39m
2025-09-10 05:25:17 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 05:25:18 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 05:25:18 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:45:49 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:45:49 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:45:50 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:45:50 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
🏓 Ping 전송 완료: 0개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:46:28 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:46:28 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:46:29 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:46:29 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:46:29 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:46:29 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:46:30 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:46:30 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:46:30 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:47:47 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:47:47 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:47:48 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:47:48 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:47:48 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:47:48 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:47:49 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:47:49 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:47:49 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:48:10 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:10 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:48:11 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:48:11 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:48:11 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:48:11 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:48:12 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:48:12 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:48:12 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:48:19 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:19 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:48:21 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:48:21 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:48:47 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:48:48 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:48 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:48:49 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:48:50 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:48:50 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:48:51 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:48:51 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:48:51 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:48:51 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:48:52 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:48:52 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:48:52 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:54:17 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:17 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mLogger initialized[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mLog directory: /home/wh/working/working/mini-area/logs[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mEnvironment: development[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mLog level: info[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m=================================[39m
Postfix를 사용하여 이메일을 전송합니다.
2025-09-10 07:54:18 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mMediaSoup Configuration:[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Max Rooms: 400[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Max Participants per Room: 100[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Total Capacity: 40000 concurrent users[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Listen IP: 0.0.0.0[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Announced IP: 192.168.200.106[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m   - Port: 3000[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mWebRTC configuration validated successfully[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mServer started successfully[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mHTTPS Port: 7000[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mWebRTC Mode: MEDIASOUP[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mLAN Access: https://192.168.200.106:7000[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mWebSocket: wss://192.168.200.106:7000[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mWebRTC video communication: Enabled[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mCamera/Microphone: Enabled in HTTPS[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32m=================================[39m
2025-09-10 07:54:18 [[32minfo[39m]: [32mPostgreSQL database connected successfully[39m
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
2025-09-10 07:54:19 [[32minfo[39m]: [32mDatabase tables synchronized[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32mMediaSoup: Creating 14 workers...[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32m   - Max rooms: 400[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32m   - Max participants per room: 100[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32mMediaSoup initialized successfully[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32mMediaSoup handler initialized[39m
2025-09-10 07:54:19 [[32minfo[39m]: [32mMEDIASOUP video service initialized[39m
🏓 Ping 전송 완료: 0개 소켓
🏓 Ping 전송 완료: 0개 소켓
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-10 07:55:40 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:55:40 [[34mdebug[39m]: [34mWebSocket request info:[39m
2025-09-10 07:55:40 [[32minfo[39m]: [32mNew WebSocket connection: n83oBcEWBSBC4dfIAAAB[39m
2025-09-10 07:55:40 [[32minfo[39m]: [32mMediaSoup handler for socket n83oBcEWBSBC4dfIAAAB[39m
새로운 mini area WebSocket 연결: n83oBcEWBSBC4dfIAAAB IP: 192.168.200.106
새로운 WebSocket 연결: n83oBcEWBSBC4dfIAAAB
2025-09-10 07:55:40 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:55:40 [[34mdebug[39m]: [34mWebSocket request info:[39m
2025-09-10 07:55:40 [[32minfo[39m]: [32mNew WebSocket connection: bHXLCo6tzYjbPKovAAAD[39m
2025-09-10 07:55:40 [[32minfo[39m]: [32mMediaSoup handler for socket bHXLCo6tzYjbPKovAAAD[39m
새로운 mini area WebSocket 연결: bHXLCo6tzYjbPKovAAAD IP: 192.168.200.106
새로운 WebSocket 연결: bHXLCo6tzYjbPKovAAAD
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'bHXLCo6tzYjbPKovAAAD',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:55:40 AM'
}
WebSocket 연결 해제: bHXLCo6tzYjbPKovAAAD
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🏓 Ping 전송 완료: 0개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'n83oBcEWBSBC4dfIAAAB',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:56:01 AM'
}
WebSocket 연결 해제: n83oBcEWBSBC4dfIAAAB
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-10 07:56:01 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:01 [[34mdebug[39m]: [34mWebSocket request info:[39m
2025-09-10 07:56:01 [[32minfo[39m]: [32mNew WebSocket connection: d7KyXgAHuOt4PiyGAAAF[39m
2025-09-10 07:56:01 [[32minfo[39m]: [32mMediaSoup handler for socket d7KyXgAHuOt4PiyGAAAF[39m
새로운 mini area WebSocket 연결: d7KyXgAHuOt4PiyGAAAF IP: 192.168.200.106
새로운 WebSocket 연결: d7KyXgAHuOt4PiyGAAAF
2025-09-10 07:56:01 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:01 [[34mdebug[39m]: [34mWebSocket request info:[39m
2025-09-10 07:56:01 [[32minfo[39m]: [32mNew WebSocket connection: V2rGak8PIM6oPRp6AAAH[39m
2025-09-10 07:56:01 [[32minfo[39m]: [32mMediaSoup handler for socket V2rGak8PIM6oPRp6AAAH[39m
새로운 mini area WebSocket 연결: V2rGak8PIM6oPRp6AAAH IP: 192.168.200.106
새로운 WebSocket 연결: V2rGak8PIM6oPRp6AAAH
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'V2rGak8PIM6oPRp6AAAH',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:56:01 AM'
}
WebSocket 연결 해제: V2rGak8PIM6oPRp6AAAH
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🏓 Ping 전송 완료: 0개 소켓
🔐 로그인 요청: { email: 'whl19810312@gmail.com', password: '제공됨' }
👤 사용자 조회 결과: ID: 1, Username: whl19810312, EmailVerified: true, IsActive: true
🔑 비밀번호 검증 결과: true
📧 이메일 인증 확인: { emailVerified: true, NODE_ENV: 'development' }
✅ 계정 활성화 확인: { isActive: true }
✅ 로그인 성공: { userId: 1, username: 'whl19810312' }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-10 07:56:33 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:33 [[34mdebug[39m]: [34mWebSocket request info:[39m
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-10 07:56:33 [[32minfo[39m]: [32mNew WebSocket connection: 6S_SJya_gyK3GAYMAAAJ[39m
2025-09-10 07:56:33 [[32minfo[39m]: [32mMediaSoup handler for socket 6S_SJya_gyK3GAYMAAAJ[39m
새로운 mini area WebSocket 연결: 6S_SJya_gyK3GAYMAAAJ IP: 192.168.200.106
새로운 WebSocket 연결: 6S_SJya_gyK3GAYMAAAJ
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:33.532Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:34.535Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:33.532Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'd7KyXgAHuOt4PiyGAAAF',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:56:34 AM'
}
WebSocket 연결 해제: d7KyXgAHuOt4PiyGAAAF
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '6S_SJya_gyK3GAYMAAAJ',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:56:34 AM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:34.635Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 0명, 오프라인: 3명
   활성 소켓: 0개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 6S_SJya_gyK3GAYMAAAJ
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-10 07:56:34 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:34 [[34mdebug[39m]: [34mWebSocket request info:[39m
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-10 07:56:34 [[32minfo[39m]: [32mNew WebSocket connection: IbaCRaBnv0zYY3xuAAAL[39m
2025-09-10 07:56:34 [[32minfo[39m]: [32mMediaSoup handler for socket IbaCRaBnv0zYY3xuAAAL[39m
새로운 mini area WebSocket 연결: IbaCRaBnv0zYY3xuAAAL IP: 192.168.200.106
새로운 WebSocket 연결: IbaCRaBnv0zYY3xuAAAL
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-10 07:56:35 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:35 [[34mdebug[39m]: [34mWebSocket request info:[39m
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-10 07:56:35 [[32minfo[39m]: [32mNew WebSocket connection: 5JI-mIzkFSjmBwhsAAAN[39m
2025-09-10 07:56:35 [[32minfo[39m]: [32mMediaSoup handler for socket 5JI-mIzkFSjmBwhsAAAN[39m
새로운 mini area WebSocket 연결: 5JI-mIzkFSjmBwhsAAAN IP: 192.168.200.106
새로운 WebSocket 연결: 5JI-mIzkFSjmBwhsAAAN
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:35.061Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=5JI-mIzkFSjmBwhsAAAN
📋 맵 3의 최종 참가자 수: 0
👥 방 3의 참가자 목록: []
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 0
📋 맵 3의 최종 참가자 수: 0
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 0 }
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:56:35.065Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 808, y: 191 },
  characterInfo: '있음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:35.069Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=5JI-mIzkFSjmBwhsAAAN
📋 맵 3의 최종 참가자 수: 0
👥 방 3의 참가자 목록: []
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 0
📋 맵 3의 최종 참가자 수: 0
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 0 }
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:56:35.072Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 808, y: 191 },
  characterInfo: '있음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:35.074Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=5JI-mIzkFSjmBwhsAAAN
📋 맵 3의 최종 참가자 수: 0
👥 방 3의 참가자 목록: []
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 0
📋 맵 3의 최종 참가자 수: 0
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 0 }
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:35.083Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:35.092Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
WebSocket 인증 성공: 1 whl19810312
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:36.085Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:56:36.092Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:36.094Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 808, y: 191 },
  characterInfo: '있음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:36.096Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:56:36.106Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 808, y: 191 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:56:36.109Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏓 Ping 전송 완료: 1개 소켓
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-10 07:56:54 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:56:54 [[34mdebug[39m]: [34mWebSocket request info:[39m
2025-09-10 07:56:55 [[32minfo[39m]: [32mNew WebSocket connection: OYKXEPq1mlo9ExDnAAAP[39m
2025-09-10 07:56:55 [[32minfo[39m]: [32mMediaSoup handler for socket OYKXEPq1mlo9ExDnAAAP[39m
새로운 mini area WebSocket 연결: OYKXEPq1mlo9ExDnAAAP IP: 192.168.200.108
새로운 WebSocket 연결: OYKXEPq1mlo9ExDnAAAP
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'OYKXEPq1mlo9ExDnAAAP',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:56:55 AM'
}
WebSocket 연결 해제: OYKXEPq1mlo9ExDnAAAP
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🔐 로그인 요청: { email: 'test1@test.com', password: '제공됨' }
👤 사용자 조회 결과: ID: 2, Username: test1, EmailVerified: true, IsActive: true
🔑 비밀번호 검증 결과: true
📧 이메일 인증 확인: { emailVerified: true, NODE_ENV: 'development' }
✅ 계정 활성화 확인: { isActive: true }
✅ 로그인 성공: { userId: 2, username: 'test1' }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-10 07:57:03 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:57:03 [[34mdebug[39m]: [34mWebSocket request info:[39m
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-10 07:57:03 [[32minfo[39m]: [32mNew WebSocket connection: fUeFqM7QRgrYayg4AAAR[39m
2025-09-10 07:57:03 [[32minfo[39m]: [32mMediaSoup handler for socket fUeFqM7QRgrYayg4AAAR[39m
새로운 mini area WebSocket 연결: fUeFqM7QRgrYayg4AAAR IP: 192.168.200.108
새로운 WebSocket 연결: fUeFqM7QRgrYayg4AAAR
Auth 미들웨어 - 인증 성공, 사용자: test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:03.262Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 인증 성공: 2 test1
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:04.264Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:03.262Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'fUeFqM7QRgrYayg4AAAR',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/10/2025, 7:57:04 AM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:04.533Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: fUeFqM7QRgrYayg4AAAR
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-10 07:57:05 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:57:05 [[34mdebug[39m]: [34mWebSocket request info:[39m
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-10 07:57:05 [[32minfo[39m]: [32mNew WebSocket connection: bqTEL_oDX97EKQGBAAAT[39m
2025-09-10 07:57:05 [[32minfo[39m]: [32mMediaSoup handler for socket bqTEL_oDX97EKQGBAAAT[39m
새로운 mini area WebSocket 연결: bqTEL_oDX97EKQGBAAAT IP: 192.168.200.108
새로운 WebSocket 연결: bqTEL_oDX97EKQGBAAAT
2025-09-10 07:57:05 [[34mdebug[39m]: [34mWebSocket headers:[39m
2025-09-10 07:57:05 [[34mdebug[39m]: [34mWebSocket request info:[39m
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-10 07:57:05 [[32minfo[39m]: [32mNew WebSocket connection: DaM0sJwgE49lPOizAAAV[39m
2025-09-10 07:57:05 [[32minfo[39m]: [32mMediaSoup handler for socket DaM0sJwgE49lPOizAAAV[39m
새로운 mini area WebSocket 연결: DaM0sJwgE49lPOizAAAV IP: 192.168.200.108
새로운 WebSocket 연결: DaM0sJwgE49lPOizAAAV
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.419Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=DaM0sJwgE49lPOizAAAV
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: undefined → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.422Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 undefined → 프라이빗 영역 1756736942592 입장 (참가자: 0명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
사용자 undefined (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 undefined (2)가 프라이빗 영역 1756736942592에 입장
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:05.424Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (2) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.426Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=DaM0sJwgE49lPOizAAAV
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: undefined → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.428Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 undefined ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.429Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 undefined → 프라이빗 영역 1756736942592 입장 (참가자: 0명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
사용자 undefined (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 undefined (2)가 프라이빗 영역 1756736942592에 입장
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.434Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:05.446Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:05.454Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:57:05.463Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🎬 프라이빗 영역 퇴장 요청: test1
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-09T22:57:05.467Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🧹 빈 프라이빗 영역 1756736942592 정리
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:06.439Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:06.449Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:06.562Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:06.589Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-09T22:57:06.592Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.845Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 204.44685814007644, y: 202.30771590149925 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 204.44685814007644, y: 202.30771590149925 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 204.44685814007644, y: 202.30771590149925 },
  '마지막활동': '2025-09-09T22:57:12.855Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 204.44685814007644, y: 202.30771590149925 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 204.44685814007644, y: 202.30771590149925 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 204.44685814007644, y: 202.30771590149925 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.858Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 204.44685814007693, y: 202.3077159014995 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 204.44685814007693, y: 202.3077159014995 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 204.44685814007693, y: 202.3077159014995 },
  '마지막활동': '2025-09-09T22:57:12.860Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 204.44685814007693, y: 202.3077159014995 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 204.44685814007693, y: 202.3077159014995 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 204.44685814007693, y: 202.3077159014995 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🔍 프라이빗 영역 1756736942592 변화 감지: 1명 → 1명 (user_updated)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.901Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 208.86708838709893, y: 204.6016131449059 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 208.86708838709893, y: 204.6016131449059 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 208.86708838709893, y: 204.6016131449059 },
  '마지막활동': '2025-09-09T22:57:12.912Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 208.86708838709893, y: 204.6016131449059 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 208.86708838709893, y: 204.6016131449059 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 208.86708838709893, y: 204.6016131449059 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.922Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 208.89371628015385, y: 204.615431802999 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 208.89371628015385, y: 204.615431802999 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 208.89371628015385, y: 204.615431802999 },
  '마지막활동': '2025-09-09T22:57:12.930Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 208.89371628015385, y: 204.615431802999 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 208.89371628015385, y: 204.615431802999 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 208.89371628015385, y: 204.615431802999 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.936Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 213.31394652717537, y: 206.90932904640516 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 213.31394652717537, y: 206.90932904640516 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 213.31394652717537, y: 206.90932904640516 },
  '마지막활동': '2025-09-09T22:57:12.946Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 213.31394652717537, y: 206.90932904640516 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 213.31394652717537, y: 206.90932904640516 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 213.31394652717537, y: 206.90932904640516 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:12.995Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 226.57463726824284, y: 213.79102077662512 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 226.57463726824284, y: 213.79102077662512 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 226.57463726824284, y: 213.79102077662512 },
  '마지막활동': '2025-09-09T22:57:13.005Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 226.57463726824284, y: 213.79102077662512 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 226.57463726824284, y: 213.79102077662512 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 226.57463726824284, y: 213.79102077662512 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.013Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 217.76080466725182, y: 209.2170449479044 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 217.76080466725182, y: 209.2170449479044 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 217.76080466725182, y: 209.2170449479044 },
  '마지막활동': '2025-09-09T22:57:13.021Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 217.76080466725182, y: 209.2170449479044 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 217.76080466725182, y: 209.2170449479044 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 217.76080466725182, y: 209.2170449479044 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.031Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 231.02149540831977, y: 216.09873667812462 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 231.02149540831977, y: 216.09873667812462 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 231.02149540831977, y: 216.09873667812462 },
  '마지막활동': '2025-09-09T22:57:13.041Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 231.02149540831977, y: 216.09873667812462 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 231.02149540831977, y: 216.09873667812462 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 231.02149540831977, y: 216.09873667812462 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.057Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 222.1810349142743, y: 211.51094219131107 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 222.1810349142743, y: 211.51094219131107 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 222.1810349142743, y: 211.51094219131107 },
  '마지막활동': '2025-09-09T22:57:13.068Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 222.1810349142743, y: 211.51094219131107 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 222.1810349142743, y: 211.51094219131107 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 222.1810349142743, y: 211.51094219131107 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.086Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 235.4683535483962, y: 218.40645257962387 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 235.4683535483962, y: 218.40645257962387 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 235.4683535483962, y: 218.40645257962387 },
  '마지막활동': '2025-09-09T22:57:13.095Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 235.4683535483962, y: 218.40645257962387 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 235.4683535483962, y: 218.40645257962387 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 235.4683535483962, y: 218.40645257962387 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.112Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 226.6012651612968, y: 213.80483943471774 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 226.6012651612968, y: 213.80483943471774 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 226.6012651612968, y: 213.80483943471774 },
  '마지막활동': '2025-09-09T22:57:13.121Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 226.6012651612968, y: 213.80483943471774 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 226.6012651612968, y: 213.80483943471774 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 226.6012651612968, y: 213.80483943471774 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.135Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 244.38869772160405, y: 223.0357030407155 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 244.38869772160405, y: 223.0357030407155 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 244.38869772160405, y: 223.0357030407155 },
  '마지막활동': '2025-09-09T22:57:13.144Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 244.38869772160405, y: 223.0357030407155 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 244.38869772160405, y: 223.0357030407155 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 244.38869772160405, y: 223.0357030407155 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.158Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 231.02149540831928, y: 216.0987366781244 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 231.02149540831928, y: 216.0987366781244 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 231.02149540831928, y: 216.0987366781244 },
  '마지막활동': '2025-09-09T22:57:13.167Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 231.02149540831928, y: 216.0987366781244 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 231.02149540831928, y: 216.0987366781244 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 231.02149540831928, y: 216.0987366781244 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.181Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 253.25578610870298, y: 227.63731618562142 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 253.25578610870298, y: 227.63731618562142 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 253.25578610870298, y: 227.63731618562142 },
  '마지막활동': '2025-09-09T22:57:13.192Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 253.25578610870298, y: 227.63731618562142 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 253.25578610870298, y: 227.63731618562142 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 253.25578610870298, y: 227.63731618562142 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.205Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 235.44172565534177, y: 218.39263392153106 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 235.44172565534177, y: 218.39263392153106 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 235.44172565534177, y: 218.39263392153106 },
  '마지막활동': '2025-09-09T22:57:13.217Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 235.44172565534177, y: 218.39263392153106 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 235.44172565534177, y: 218.39263392153106 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 235.44172565534177, y: 218.39263392153106 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.231Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 262.1228744958019, y: 232.23892933052733 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 262.1228744958019, y: 232.23892933052733 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 262.1228744958019, y: 232.23892933052733 },
  '마지막활동': '2025-09-09T22:57:13.240Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 262.1228744958019, y: 232.23892933052733 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 262.1228744958019, y: 232.23892933052733 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 262.1228744958019, y: 232.23892933052733 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.254Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 239.91521168847316, y: 220.71416848112344 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 239.91521168847316, y: 220.71416848112344 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 239.91521168847316, y: 220.71416848112344 },
  '마지막활동': '2025-09-09T22:57:13.265Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 239.91521168847316, y: 220.71416848112344 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 239.91521168847316, y: 220.71416848112344 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 239.91521168847316, y: 220.71416848112344 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.278Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 270.9633349898464, y: 236.82672381734037 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 270.9633349898464, y: 236.82672381734037 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 270.9633349898464, y: 236.82672381734037 },
  '마지막활동': '2025-09-09T22:57:13.288Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 270.9633349898464, y: 236.82672381734037 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 270.9633349898464, y: 236.82672381734037 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 270.9633349898464, y: 236.82672381734037 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.300Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 244.3620698285501, y: 223.02188438262294 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 244.3620698285501, y: 223.02188438262294 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 244.3620698285501, y: 223.02188438262294 },
  '마지막활동': '2025-09-09T22:57:13.309Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 244.3620698285501, y: 223.02188438262294 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 244.3620698285501, y: 223.02188438262294 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 244.3620698285501, y: 223.02188438262294 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.322Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 279.8304233769453, y: 241.42833696224628 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 279.8304233769453, y: 241.42833696224628 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 279.8304233769453, y: 241.42833696224628 },
  '마지막활동': '2025-09-09T22:57:13.332Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 279.8304233769453, y: 241.42833696224628 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 279.8304233769453, y: 241.42833696224628 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 279.8304233769453, y: 241.42833696224628 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.345Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 248.80892796862702, y: 225.32960028412245 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 248.80892796862702, y: 225.32960028412245 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 248.80892796862702, y: 225.32960028412245 },
  '마지막활동': '2025-09-09T22:57:13.357Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 248.80892796862702, y: 225.32960028412245 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 248.80892796862702, y: 225.32960028412245 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 248.80892796862702, y: 225.32960028412245 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.369Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 284.22402573091335, y: 243.70841554756007 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 284.22402573091335, y: 243.70841554756007 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 284.22402573091335, y: 243.70841554756007 },
  '마지막활동': '2025-09-09T22:57:13.378Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 284.22402573091335, y: 243.70841554756007 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 284.22402573091335, y: 243.70841554756007 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 284.22402573091335, y: 243.70841554756007 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.396Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 257.67601635572595, y: 229.93121342902836 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 257.67601635572595, y: 229.93121342902836 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 257.67601635572595, y: 229.93121342902836 },
  '마지막활동': '2025-09-09T22:57:13.406Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 257.67601635572595, y: 229.93121342902836 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 257.67601635572595, y: 229.93121342902836 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 257.67601635572595, y: 229.93121342902836 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.420Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 288.6708838709903, y: 246.01613144905957 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 288.6708838709903, y: 246.01613144905957 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 288.6708838709903, y: 246.01613144905957 },
  '마지막활동': '2025-09-09T22:57:13.433Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 288.6708838709903, y: 246.01613144905957 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 288.6708838709903, y: 246.01613144905957 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 288.6708838709903, y: 246.01613144905957 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.446Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 266.5431047428249, y: 234.53282657393427 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 266.5431047428249, y: 234.53282657393427 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 266.5431047428249, y: 234.53282657393427 },
  '마지막활동': '2025-09-09T22:57:13.455Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 266.5431047428249, y: 234.53282657393427 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 266.5431047428249, y: 234.53282657393427 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 266.5431047428249, y: 234.53282657393427 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.467Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 293.09111411801274, y: 248.31002869246623 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 293.09111411801274, y: 248.31002869246623 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 293.09111411801274, y: 248.31002869246623 },
  '마지막활동': '2025-09-09T22:57:13.476Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 293.09111411801274, y: 248.31002869246623 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 293.09111411801274, y: 248.31002869246623 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 293.09111411801274, y: 248.31002869246623 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.489Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 275.4368210229783, y: 239.14825837693303 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 275.4368210229783, y: 239.14825837693303 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 275.4368210229783, y: 239.14825837693303 },
  '마지막활동': '2025-09-09T22:57:13.500Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 275.4368210229783, y: 239.14825837693303 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 275.4368210229783, y: 239.14825837693303 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 275.4368210229783, y: 239.14825837693303 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.517Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 297.5113443650352, y: 250.6039259358729 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 297.5113443650352, y: 250.6039259358729 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 297.5113443650352, y: 250.6039259358729 },
  '마지막활동': '2025-09-09T22:57:13.527Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 297.5113443650352, y: 250.6039259358729 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 297.5113443650352, y: 250.6039259358729 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 297.5113443650352, y: 250.6039259358729 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.541Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 279.8836791630552, y: 241.45597427843254 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 279.8836791630552, y: 241.45597427843254 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 279.8836791630552, y: 241.45597427843254 },
  '마지막활동': '2025-09-09T22:57:13.550Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 279.8836791630552, y: 241.45597427843254 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 279.8836791630552, y: 241.45597427843254 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 279.8836791630552, y: 241.45597427843254 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.563Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 306.35180485907966, y: 255.19172042268593 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 306.35180485907966, y: 255.19172042268593 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 306.35180485907966, y: 255.19172042268593 },
  '마지막활동': '2025-09-09T22:57:13.571Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 306.35180485907966, y: 255.19172042268593 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 306.35180485907966, y: 255.19172042268593 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 306.35180485907966, y: 255.19172042268593 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.583Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 288.75076755015465, y: 246.0575874233387 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 288.75076755015465, y: 246.0575874233387 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 288.75076755015465, y: 246.0575874233387 },
  '마지막활동': '2025-09-09T22:57:13.593Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 288.75076755015465, y: 246.0575874233387 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 288.75076755015465, y: 246.0575874233387 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 288.75076755015465, y: 246.0575874233387 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.607Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 310.79866299915614, y: 257.4994363241852 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 310.79866299915614, y: 257.4994363241852 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 310.79866299915614, y: 257.4994363241852 },
  '마지막활동': '2025-09-09T22:57:13.623Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 310.79866299915614, y: 257.4994363241852 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 310.79866299915614, y: 257.4994363241852 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 310.79866299915614, y: 257.4994363241852 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.636Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 293.1709977971771, y: 248.35148466674536 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 293.1709977971771, y: 248.35148466674536 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 293.1709977971771, y: 248.35148466674536 },
  '마지막활동': '2025-09-09T22:57:13.645Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 293.1709977971771, y: 248.35148466674536 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 293.1709977971771, y: 248.35148466674536 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 293.1709977971771, y: 248.35148466674536 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.658Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 315.24552113923306, y: 259.8071522256847 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 315.24552113923306, y: 259.8071522256847 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 315.24552113923306, y: 259.8071522256847 },
  '마지막활동': '2025-09-09T22:57:13.666Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 315.24552113923306, y: 259.8071522256847 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 315.24552113923306, y: 259.8071522256847 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 315.24552113923306, y: 259.8071522256847 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.679Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 302.0114582912216, y: 252.9392791535584 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 302.0114582912216, y: 252.9392791535584 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 302.0114582912216, y: 252.9392791535584 },
  '마지막활동': '2025-09-09T22:57:13.687Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 302.0114582912216, y: 252.9392791535584 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 302.0114582912216, y: 252.9392791535584 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 302.0114582912216, y: 252.9392791535584 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.704Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 324.1126095263325, y: 264.40876537059086 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 324.1126095263325, y: 264.40876537059086 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 324.1126095263325, y: 264.40876537059086 },
  '마지막활동': '2025-09-09T22:57:13.717Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 324.1126095263325, y: 264.40876537059086 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 324.1126095263325, y: 264.40876537059086 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 324.1126095263325, y: 264.40876537059086 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.734Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 306.48494432435245, y: 255.26081371315053 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 306.48494432435245, y: 255.26081371315053 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 306.48494432435245, y: 255.26081371315053 },
  '마지막활동': '2025-09-09T22:57:13.743Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 306.48494432435245, y: 255.26081371315053 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 306.48494432435245, y: 255.26081371315053 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 306.48494432435245, y: 255.26081371315053 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.756Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 328.53283977335497, y: 266.7026626139975 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 328.53283977335497, y: 266.7026626139975 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 328.53283977335497, y: 266.7026626139975 },
  '마지막활동': '2025-09-09T22:57:13.765Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 328.53283977335497, y: 266.7026626139975 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 328.53283977335497, y: 266.7026626139975 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 328.53283977335497, y: 266.7026626139975 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.776Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 315.3520327114514, y: 259.86242685805644 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 315.3520327114514, y: 259.86242685805644 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 315.3520327114514, y: 259.86242685805644 },
  '마지막활동': '2025-09-09T22:57:13.785Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 315.3520327114514, y: 259.86242685805644 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 315.3520327114514, y: 259.86242685805644 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 315.3520327114514, y: 259.86242685805644 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.798Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 332.9796979134319, y: 269.01037851549705 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 332.9796979134319, y: 269.01037851549705 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 332.9796979134319, y: 269.01037851549705 },
  '마지막활동': '2025-09-09T22:57:13.807Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 332.9796979134319, y: 269.01037851549705 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 332.9796979134319, y: 269.01037851549705 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 332.9796979134319, y: 269.01037851549705 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.822Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 324.2191210985503, y: 264.46404000296235 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 324.2191210985503, y: 264.46404000296235 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 324.2191210985503, y: 264.46404000296235 },
  '마지막활동': '2025-09-09T22:57:13.831Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 324.2191210985503, y: 264.46404000296235 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 324.2191210985503, y: 264.46404000296235 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 324.2191210985503, y: 264.46404000296235 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.849Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 337.4265560535088, y: 271.3180944169966 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 337.4265560535088, y: 271.3180944169966 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 337.4265560535088, y: 271.3180944169966 },
  '마지막활동': '2025-09-09T22:57:13.859Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 337.4265560535088, y: 271.3180944169966 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 337.4265560535088, y: 271.3180944169966 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 337.4265560535088, y: 271.3180944169966 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.871Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 328.6393513455728, y: 266.757937246369 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 328.6393513455728, y: 266.757937246369 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 328.6393513455728, y: 266.757937246369 },
  '마지막활동': '2025-09-09T22:57:13.881Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 328.6393513455728, y: 266.757937246369 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 328.6393513455728, y: 266.757937246369 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 328.6393513455728, y: 266.757937246369 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.894Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔍 프라이빗 영역 1756736942592 변화 감지: 1명 → 1명 (user_updated)
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 346.29364444060775, y: 275.9197075619025 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 346.29364444060775, y: 275.9197075619025 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 346.29364444060775, y: 275.9197075619025 },
  '마지막활동': '2025-09-09T22:57:13.905Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 346.29364444060775, y: 275.9197075619025 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 346.29364444060775, y: 275.9197075619025 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 346.29364444060775, y: 275.9197075619025 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.916Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 333.05958159259524, y: 269.0518344897757 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 333.05958159259524, y: 269.0518344897757 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 333.05958159259524, y: 269.0518344897757 },
  '마지막활동': '2025-09-09T22:57:13.927Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 333.05958159259524, y: 269.0518344897757 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 333.05958159259524, y: 269.0518344897757 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 333.05958159259524, y: 269.0518344897757 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.939Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 355.1607328277067, y: 280.5213207068084 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 355.1607328277067, y: 280.5213207068084 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 355.1607328277067, y: 280.5213207068084 },
  '마지막활동': '2025-09-09T22:57:13.948Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 355.1607328277067, y: 280.5213207068084 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 355.1607328277067, y: 280.5213207068084 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 355.1607328277067, y: 280.5213207068084 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.962Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 337.53306762572663, y: 271.373369049368 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 337.53306762572663, y: 271.373369049368 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 337.53306762572663, y: 271.373369049368 },
  '마지막활동': '2025-09-09T22:57:13.972Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 337.53306762572663, y: 271.373369049368 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 337.53306762572663, y: 271.373369049368 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 337.53306762572663, y: 271.373369049368 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:13.987Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 359.60759096778315, y: 282.82903660830766 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 359.60759096778315, y: 282.82903660830766 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 359.60759096778315, y: 282.82903660830766 },
  '마지막활동': '2025-09-09T22:57:13.996Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 359.60759096778315, y: 282.82903660830766 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 359.60759096778315, y: 282.82903660830766 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 359.60759096778315, y: 282.82903660830766 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.010Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 346.3735281197716, y: 275.9611635361813 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 346.3735281197716, y: 275.9611635361813 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 346.3735281197716, y: 275.9611635361813 },
  '마지막활동': '2025-09-09T22:57:14.020Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 346.3735281197716, y: 275.9611635361813 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 346.3735281197716, y: 275.9611635361813 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 346.3735281197716, y: 275.9611635361813 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.036Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 364.0544491078601, y: 285.13675250980714 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 364.0544491078601, y: 285.13675250980714 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 364.0544491078601, y: 285.13675250980714 },
  '마지막활동': '2025-09-09T22:57:14.044Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 364.0544491078601, y: 285.13675250980714 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 364.0544491078601, y: 285.13675250980714 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 364.0544491078601, y: 285.13675250980714 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.059Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 355.24061650687054, y: 280.5627766810872 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 355.24061650687054, y: 280.5627766810872 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 355.24061650687054, y: 280.5627766810872 },
  '마지막활동': '2025-09-09T22:57:14.070Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 355.24061650687054, y: 280.5627766810872 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 355.24061650687054, y: 280.5627766810872 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 355.24061650687054, y: 280.5627766810872 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.083Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 368.4746793548826, y: 287.4306497532138 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 368.4746793548826, y: 287.4306497532138 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 368.4746793548826, y: 287.4306497532138 },
  '마지막활동': '2025-09-09T22:57:14.093Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 368.4746793548826, y: 287.4306497532138 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 368.4746793548826, y: 287.4306497532138 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 368.4746793548826, y: 287.4306497532138 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.106Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 364.10770489396947, y: 285.1643898259931 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 364.10770489396947, y: 285.1643898259931 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 364.10770489396947, y: 285.1643898259931 },
  '마지막활동': '2025-09-09T22:57:14.115Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 364.10770489396947, y: 285.1643898259931 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 364.10770489396947, y: 285.1643898259931 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 364.10770489396947, y: 285.1643898259931 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.128Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 372.89490960190506, y: 289.72454699662046 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 372.89490960190506, y: 289.72454699662046 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 372.89490960190506, y: 289.72454699662046 },
  '마지막활동': '2025-09-09T22:57:14.144Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 372.89490960190506, y: 289.72454699662046 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 372.89490960190506, y: 289.72454699662046 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 372.89490960190506, y: 289.72454699662046 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.160Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 368.5545630340464, y: 287.47210572749265 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 368.5545630340464, y: 287.47210572749265 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 368.5545630340464, y: 287.47210572749265 },
  '마지막활동': '2025-09-09T22:57:14.168Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 368.5545630340464, y: 287.47210572749265 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 368.5545630340464, y: 287.47210572749265 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 368.5545630340464, y: 287.47210572749265 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.182Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 381.761997989004, y: 294.3261601415264 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 381.761997989004, y: 294.3261601415264 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 381.761997989004, y: 294.3261601415264 },
  '마지막활동': '2025-09-09T22:57:14.190Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 381.761997989004, y: 294.3261601415264 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 381.761997989004, y: 294.3261601415264 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 381.761997989004, y: 294.3261601415264 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.206Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 377.3950235280914, y: 292.0599002143059 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 377.3950235280914, y: 292.0599002143059 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 377.3950235280914, y: 292.0599002143059 },
  '마지막활동': '2025-09-09T22:57:14.215Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 377.3950235280914, y: 292.0599002143059 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 377.3950235280914, y: 292.0599002143059 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 377.3950235280914, y: 292.0599002143059 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.228Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 386.23548402213487, y: 296.6476947011185 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 386.23548402213487, y: 296.6476947011185 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 386.23548402213487, y: 296.6476947011185 },
  '마지막활동': '2025-09-09T22:57:14.237Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 386.23548402213487, y: 296.6476947011185 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 386.23548402213487, y: 296.6476947011185 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 386.23548402213487, y: 296.6476947011185 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.251Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 381.8152537751139, y: 294.3537974577126 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 381.8152537751139, y: 294.3537974577126 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 381.8152537751139, y: 294.3537974577126 },
  '마지막활동': '2025-09-09T22:57:14.261Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 381.8152537751139, y: 294.3537974577126 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 381.8152537751139, y: 294.3537974577126 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 381.8152537751139, y: 294.3537974577126 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.273Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 395.1025724092338, y: 301.2493078460244 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 395.1025724092338, y: 301.2493078460244 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 395.1025724092338, y: 301.2493078460244 },
  '마지막활동': '2025-09-09T22:57:14.283Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 395.1025724092338, y: 301.2493078460244 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 395.1025724092338, y: 301.2493078460244 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 395.1025724092338, y: 301.2493078460244 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.297Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 386.23548402213635, y: 296.64769470111924 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 386.23548402213635, y: 296.64769470111924 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 386.23548402213635, y: 296.64769470111924 },
  '마지막활동': '2025-09-09T22:57:14.307Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 386.23548402213635, y: 296.64769470111924 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 386.23548402213635, y: 296.64769470111924 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 386.23548402213635, y: 296.64769470111924 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.326Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 403.9962886893872, y: 305.86473964902314 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 403.9962886893872, y: 305.86473964902314 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 403.9962886893872, y: 305.86473964902314 },
  '마지막활동': '2025-09-09T22:57:14.337Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 403.9962886893872, y: 305.86473964902314 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 403.9962886893872, y: 305.86473964902314 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 403.9962886893872, y: 305.86473964902314 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.350Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 390.65571426915886, y: 298.9415919445259 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 390.65571426915886, y: 298.9415919445259 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 390.65571426915886, y: 298.9415919445259 },
  '마지막활동': '2025-09-09T22:57:14.360Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 390.65571426915886, y: 298.9415919445259 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 390.65571426915886, y: 298.9415919445259 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 390.65571426915886, y: 298.9415919445259 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.375Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 412.86337707648613, y: 310.46635279392905 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 412.86337707648613, y: 310.46635279392905 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 412.86337707648613, y: 310.46635279392905 },
  '마지막활동': '2025-09-09T22:57:14.384Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 412.86337707648613, y: 310.46635279392905 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 412.86337707648613, y: 310.46635279392905 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 412.86337707648613, y: 310.46635279392905 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.401Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 395.1025724092358, y: 301.2493078460254 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 395.1025724092358, y: 301.2493078460254 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 395.1025724092358, y: 301.2493078460254 },
  '마지막활동': '2025-09-09T22:57:14.408Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 395.1025724092358, y: 301.2493078460254 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 395.1025724092358, y: 301.2493078460254 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 395.1025724092358, y: 301.2493078460254 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.423Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 421.7038375705311, y: 315.0541472807423 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 421.7038375705311, y: 315.0541472807423 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 421.7038375705311, y: 315.0541472807423 },
  '마지막활동': '2025-09-09T22:57:14.433Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 421.7038375705311, y: 315.0541472807423 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 421.7038375705311, y: 315.0541472807423 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 421.7038375705311, y: 315.0541472807423 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.446Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 399.54943054931226, y: 303.5570237475246 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 399.54943054931226, y: 303.5570237475246 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 399.54943054931226, y: 303.5570237475246 },
  '마지막활동': '2025-09-09T22:57:14.456Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 399.54943054931226, y: 303.5570237475246 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 399.54943054931226, y: 303.5570237475246 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 399.54943054931226, y: 303.5570237475246 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.468Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 426.15069571060803, y: 317.3618631822418 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 426.15069571060803, y: 317.3618631822418 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 426.15069571060803, y: 317.3618631822418 },
  '마지막활동': '2025-09-09T22:57:14.478Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 426.15069571060803, y: 317.3618631822418 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 426.15069571060803, y: 317.3618631822418 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 426.15069571060803, y: 317.3618631822418 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.490Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 408.3898910433568, y: 308.14481823433766 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 408.3898910433568, y: 308.14481823433766 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 408.3898910433568, y: 308.14481823433766 },
  '마지막활동': '2025-09-09T22:57:14.500Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 408.3898910433568, y: 308.14481823433766 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 408.3898910433568, y: 308.14481823433766 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 408.3898910433568, y: 308.14481823433766 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.513Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 430.59755385068496, y: 319.6695790837413 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 430.59755385068496, y: 319.6695790837413 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 430.59755385068496, y: 319.6695790837413 },
  '마지막활동': '2025-09-09T22:57:14.522Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 430.59755385068496, y: 319.6695790837413 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 430.59755385068496, y: 319.6695790837413 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 430.59755385068496, y: 319.6695790837413 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.535Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 417.2569794304557, y: 312.7464313792436 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 417.2569794304557, y: 312.7464313792436 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 417.2569794304557, y: 312.7464313792436 },
  '마지막활동': '2025-09-09T22:57:14.544Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 417.2569794304557, y: 312.7464313792436 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 417.2569794304557, y: 312.7464313792436 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 417.2569794304557, y: 312.7464313792436 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.557Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 435.0444119907619, y: 321.9772949852408 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 435.0444119907619, y: 321.9772949852408 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 435.0444119907619, y: 321.9772949852408 },
  '마지막활동': '2025-09-09T22:57:14.567Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 435.0444119907619, y: 321.9772949852408 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 435.0444119907619, y: 321.9772949852408 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 435.0444119907619, y: 321.9772949852408 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.582Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 421.6772096774782, y: 315.04032862265024 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 421.6772096774782, y: 315.04032862265024 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 421.6772096774782, y: 315.04032862265024 },
  '마지막활동': '2025-09-09T22:57:14.591Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 421.6772096774782, y: 315.04032862265024 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 421.6772096774782, y: 315.04032862265024 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 421.6772096774782, y: 315.04032862265024 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.605Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 443.9115003778608, y: 326.5789081301467 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 443.9115003778608, y: 326.5789081301467 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 443.9115003778608, y: 326.5789081301467 },
  '마지막활동': '2025-09-09T22:57:14.618Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 443.9115003778608, y: 326.5789081301467 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 443.9115003778608, y: 326.5789081301467 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 443.9115003778608, y: 326.5789081301467 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.627Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 426.0974399245007, y: 317.3342258660569 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 426.0974399245007, y: 317.3342258660569 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 426.0974399245007, y: 317.3342258660569 },
  '마지막활동': '2025-09-09T22:57:14.636Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 426.0974399245007, y: 317.3342258660569 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 426.0974399245007, y: 317.3342258660569 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 426.0974399245007, y: 317.3342258660569 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.649Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 448.33173062488333, y: 328.8728053735534 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 448.33173062488333, y: 328.8728053735534 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 448.33173062488333, y: 328.8728053735534 },
  '마지막활동': '2025-09-09T22:57:14.667Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 448.33173062488333, y: 328.8728053735534 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 448.33173062488333, y: 328.8728053735534 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 448.33173062488333, y: 328.8728053735534 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.680Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 434.9645283115996, y: 321.9358390109628 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 434.9645283115996, y: 321.9358390109628 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 434.9645283115996, y: 321.9358390109628 },
  '마지막활동': '2025-09-09T22:57:14.689Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 434.9645283115996, y: 321.9358390109628 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 434.9645283115996, y: 321.9358390109628 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 434.9645283115996, y: 321.9358390109628 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.703Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 452.77858876496026, y: 331.18052127505285 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 452.77858876496026, y: 331.18052127505285 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 452.77858876496026, y: 331.18052127505285 },
  '마지막활동': '2025-09-09T22:57:14.713Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 452.77858876496026, y: 331.18052127505285 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 452.77858876496026, y: 331.18052127505285 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 452.77858876496026, y: 331.18052127505285 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.727Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 443.83161669869855, y: 326.5374521558687 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 443.83161669869855, y: 326.5374521558687 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 443.83161669869855, y: 326.5374521558687 },
  '마지막활동': '2025-09-09T22:57:14.735Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 443.83161669869855, y: 326.5374521558687 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 443.83161669869855, y: 326.5374521558687 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 443.83161669869855, y: 326.5374521558687 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-09T22:57:14.750Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 455, y: 332.3333320617676 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 455, y: 332.3333320617676 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 455, y: 332.3333320617676 },
  '마지막활동': '2025-09-09T22:57:14.758Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 455, y: 332.3333320617676 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 455, y: 332.3333320617676 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔍 프라이빗 영역 1756736942592 변화 감지: 1명 → 1명 (user_updated)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.333Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 803.2056093023665, y: 191.23198672040627 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 803.2056093023665, y: 191.23198672040627 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 803.2056093023665, y: 191.23198672040627 },
  '마지막활동': '2025-09-09T22:57:18.335Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 803.2056093023665, y: 191.23198672040627 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 803.2056093023665, y: 191.23198672040627 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.2056093023665, y: 191.23198672040627 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.351Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 798.2014640117123, y: 191.47412285983026 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 798.2014640117123, y: 191.47412285983026 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 798.2014640117123, y: 191.47412285983026 },
  '마지막활동': '2025-09-09T22:57:18.354Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 798.2014640117123, y: 191.47412285983026 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 798.2014640117123, y: 191.47412285983026 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.2014640117123, y: 191.47412285983026 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.367Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 793.227283662918, y: 191.71480908225172 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 793.227283662918, y: 191.71480908225172 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 793.227283662918, y: 191.71480908225172 },
  '마지막활동': '2025-09-09T22:57:18.368Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 793.227283662918, y: 191.71480908225172 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 793.227283662918, y: 191.71480908225172 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.227283662918, y: 191.71480908225172 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.385Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 788.2231383722617, y: 191.95694522167582 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 788.2231383722617, y: 191.95694522167582 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 788.2231383722617, y: 191.95694522167582 },
  '마지막활동': '2025-09-09T22:57:18.387Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 788.2231383722617, y: 191.95694522167582 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 788.2231383722617, y: 191.95694522167582 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 788.2231383722617, y: 191.95694522167582 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.400Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 783.2489580234674, y: 192.19763144409728 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 783.2489580234674, y: 192.19763144409728 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 783.2489580234674, y: 192.19763144409728 },
  '마지막활동': '2025-09-09T22:57:18.403Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 783.2489580234674, y: 192.19763144409728 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 783.2489580234674, y: 192.19763144409728 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.2489580234674, y: 192.19763144409728 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.417Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 778.2448127328132, y: 192.43976758352127 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 778.2448127328132, y: 192.43976758352127 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 778.2448127328132, y: 192.43976758352127 },
  '마지막활동': '2025-09-09T22:57:18.420Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 778.2448127328132, y: 192.43976758352127 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 778.2448127328132, y: 192.43976758352127 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 778.2448127328132, y: 192.43976758352127 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.434Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 773.2706323840166, y: 192.68045380594285 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 773.2706323840166, y: 192.68045380594285 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 773.2706323840166, y: 192.68045380594285 },
  '마지막활동': '2025-09-09T22:57:18.437Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 773.2706323840166, y: 192.68045380594285 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 773.2706323840166, y: 192.68045380594285 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 773.2706323840166, y: 192.68045380594285 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.451Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 768.2365221515026, y: 192.92403986236934 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 768.2365221515026, y: 192.92403986236934 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 768.2365221515026, y: 192.92403986236934 },
  '마지막활동': '2025-09-09T22:57:18.453Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 768.2365221515026, y: 192.92403986236934 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 768.2365221515026, y: 192.92403986236934 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.2365221515026, y: 192.92403986236934 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.468Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 763.2623418027083, y: 193.1647260847908 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 763.2623418027083, y: 193.1647260847908 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 763.2623418027083, y: 193.1647260847908 },
  '마지막활동': '2025-09-09T22:57:18.470Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 763.2623418027083, y: 193.1647260847908 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 763.2623418027083, y: 193.1647260847908 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 763.2623418027083, y: 193.1647260847908 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.484Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 758.258196512052, y: 193.4068622242149 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 758.258196512052, y: 193.4068622242149 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 758.258196512052, y: 193.4068622242149 },
  '마지막활동': '2025-09-09T22:57:18.487Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 758.258196512052, y: 193.4068622242149 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 758.258196512052, y: 193.4068622242149 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 758.258196512052, y: 193.4068622242149 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.500Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 753.2840161632577, y: 193.64754844663636 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 753.2840161632577, y: 193.64754844663636 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 753.2840161632577, y: 193.64754844663636 },
  '마지막활동': '2025-09-09T22:57:18.502Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 753.2840161632577, y: 193.64754844663636 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 753.2840161632577, y: 193.64754844663636 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 753.2840161632577, y: 193.64754844663636 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.516Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 748.2798708726035, y: 193.88968458606035 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 748.2798708726035, y: 193.88968458606035 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 748.2798708726035, y: 193.88968458606035 },
  '마지막활동': '2025-09-09T22:57:18.519Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 748.2798708726035, y: 193.88968458606035 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 748.2798708726035, y: 193.88968458606035 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 748.2798708726035, y: 193.88968458606035 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.534Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 743.2757255819472, y: 194.13182072548446 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 743.2757255819472, y: 194.13182072548446 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 743.2757255819472, y: 194.13182072548446 },
  '마지막활동': '2025-09-09T22:57:18.536Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 743.2757255819472, y: 194.13182072548446 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 743.2757255819472, y: 194.13182072548446 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 743.2757255819472, y: 194.13182072548446 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.549Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 738.271580291293, y: 194.37395686490845 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 738.271580291293, y: 194.37395686490845 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 738.271580291293, y: 194.37395686490845 },
  '마지막활동': '2025-09-09T22:57:18.551Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 738.271580291293, y: 194.37395686490845 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 738.271580291293, y: 194.37395686490845 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 738.271580291293, y: 194.37395686490845 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.566Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 733.2973999424987, y: 194.6146430873299 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 733.2973999424987, y: 194.6146430873299 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 733.2973999424987, y: 194.6146430873299 },
  '마지막활동': '2025-09-09T22:57:18.569Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 733.2973999424987, y: 194.6146430873299 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 733.2973999424987, y: 194.6146430873299 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 733.2973999424987, y: 194.6146430873299 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.582Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 728.3232195937021, y: 194.85532930975148 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 728.3232195937021, y: 194.85532930975148 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 728.3232195937021, y: 194.85532930975148 },
  '마지막활동': '2025-09-09T22:57:18.585Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 728.3232195937021, y: 194.85532930975148 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 728.3232195937021, y: 194.85532930975148 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 728.3232195937021, y: 194.85532930975148 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.600Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 723.319074303048, y: 195.09746544917547 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 723.319074303048, y: 195.09746544917547 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 723.319074303048, y: 195.09746544917547 },
  '마지막활동': '2025-09-09T22:57:18.601Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 723.319074303048, y: 195.09746544917547 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 723.319074303048, y: 195.09746544917547 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 723.319074303048, y: 195.09746544917547 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.618Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 718.3149290123938, y: 195.33960158859946 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 718.3149290123938, y: 195.33960158859946 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 718.3149290123938, y: 195.33960158859946 },
  '마지막활동': '2025-09-09T22:57:18.623Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 718.3149290123938, y: 195.33960158859946 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 718.3149290123938, y: 195.33960158859946 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 718.3149290123938, y: 195.33960158859946 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.635Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 713.3107837217375, y: 195.58173772802357 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 713.3107837217375, y: 195.58173772802357 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 713.3107837217375, y: 195.58173772802357 },
  '마지막활동': '2025-09-09T22:57:18.638Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 713.3107837217375, y: 195.58173772802357 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 713.3107837217375, y: 195.58173772802357 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 713.3107837217375, y: 195.58173772802357 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.653Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 708.3066384310833, y: 195.82387386744756 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 708.3066384310833, y: 195.82387386744756 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 708.3066384310833, y: 195.82387386744756 },
  '마지막활동': '2025-09-09T22:57:18.656Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 708.3066384310833, y: 195.82387386744756 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 708.3066384310833, y: 195.82387386744756 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 708.3066384310833, y: 195.82387386744756 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.668Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 703.302493140427, y: 196.06601000687166 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 703.302493140427, y: 196.06601000687166 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 703.302493140427, y: 196.06601000687166 },
  '마지막활동': '2025-09-09T22:57:18.670Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 703.302493140427, y: 196.06601000687166 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 703.302493140427, y: 196.06601000687166 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 703.302493140427, y: 196.06601000687166 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.683Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 698.3283127916327, y: 196.30669622929312 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 698.3283127916327, y: 196.30669622929312 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 698.3283127916327, y: 196.30669622929312 },
  '마지막활동': '2025-09-09T22:57:18.686Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 698.3283127916327, y: 196.30669622929312 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 698.3283127916327, y: 196.30669622929312 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 698.3283127916327, y: 196.30669622929312 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.699Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 693.2942025591187, y: 196.55028228571962 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 693.2942025591187, y: 196.55028228571962 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 693.2942025591187, y: 196.55028228571962 },
  '마지막활동': '2025-09-09T22:57:18.702Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 693.2942025591187, y: 196.55028228571962 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 693.2942025591187, y: 196.55028228571962 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 693.2942025591187, y: 196.55028228571962 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.717Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 688.3200222103221, y: 196.7909685081412 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 688.3200222103221, y: 196.7909685081412 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 688.3200222103221, y: 196.7909685081412 },
  '마지막활동': '2025-09-09T22:57:18.720Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 688.3200222103221, y: 196.7909685081412 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 688.3200222103221, y: 196.7909685081412 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 688.3200222103221, y: 196.7909685081412 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.734Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 683.315876919668, y: 197.03310464756518 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 683.315876919668, y: 197.03310464756518 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 683.315876919668, y: 197.03310464756518 },
  '마지막활동': '2025-09-09T22:57:18.736Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 683.315876919668, y: 197.03310464756518 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 683.315876919668, y: 197.03310464756518 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 683.315876919668, y: 197.03310464756518 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.751Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 678.3416965708736, y: 197.27379086998664 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 678.3416965708736, y: 197.27379086998664 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 678.3416965708736, y: 197.27379086998664 },
  '마지막활동': '2025-09-09T22:57:18.754Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 678.3416965708736, y: 197.27379086998664 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 678.3416965708736, y: 197.27379086998664 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 678.3416965708736, y: 197.27379086998664 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.766Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 673.3375512802173, y: 197.51592700941075 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 673.3375512802173, y: 197.51592700941075 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 673.3375512802173, y: 197.51592700941075 },
  '마지막활동': '2025-09-09T22:57:18.769Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 673.3375512802173, y: 197.51592700941075 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 673.3375512802173, y: 197.51592700941075 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 673.3375512802173, y: 197.51592700941075 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.783Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 668.363370931423, y: 197.7566132318322 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 668.363370931423, y: 197.7566132318322 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 668.363370931423, y: 197.7566132318322 },
  '마지막활동': '2025-09-09T22:57:18.785Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 668.363370931423, y: 197.7566132318322 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 668.363370931423, y: 197.7566132318322 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 668.363370931423, y: 197.7566132318322 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.800Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 663.329260698909, y: 198.0001992882587 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 663.329260698909, y: 198.0001992882587 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 663.329260698909, y: 198.0001992882587 },
  '마지막활동': '2025-09-09T22:57:18.803Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 663.329260698909, y: 198.0001992882587 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 663.329260698909, y: 198.0001992882587 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 663.329260698909, y: 198.0001992882587 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: whl19810312 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': 'whl19810312',
  '위치': { x: 663.329260698909, y: 198.0001992882587 },
  '마지막활동': '2025-09-09T22:57:18.805Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 whl19810312 → 프라이빗 영역 1756736942592 입장 (참가자: 2명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에서 퇴장
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에 입장
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.823Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 658.3550803501124, y: 198.24088551068027 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 658.3550803501124, y: 198.24088551068027 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 658.3550803501124, y: 198.24088551068027 },
  '마지막활동': '2025-09-09T22:57:18.827Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 658.3550803501124, y: 198.24088551068027 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 658.3550803501124, y: 198.24088551068027 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 658.3550803501124, y: 198.24088551068027 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.836Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 653.3809000013181, y: 198.48157173310173 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 653.3809000013181, y: 198.48157173310173 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 653.3809000013181, y: 198.48157173310173 },
  '마지막활동': '2025-09-09T22:57:18.839Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 653.3809000013181, y: 198.48157173310173 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 653.3809000013181, y: 198.48157173310173 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 653.3809000013181, y: 198.48157173310173 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.849Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 648.3767547106639, y: 198.72370787252572 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 648.3767547106639, y: 198.72370787252572 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 648.3767547106639, y: 198.72370787252572 },
  '마지막활동': '2025-09-09T22:57:18.853Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 648.3767547106639, y: 198.72370787252572 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 648.3767547106639, y: 198.72370787252572 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 648.3767547106639, y: 198.72370787252572 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.866Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 643.3726094200076, y: 198.96584401194983 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 643.3726094200076, y: 198.96584401194983 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 643.3726094200076, y: 198.96584401194983 },
  '마지막활동': '2025-09-09T22:57:18.868Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 643.3726094200076, y: 198.96584401194983 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 643.3726094200076, y: 198.96584401194983 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 643.3726094200076, y: 198.96584401194983 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.884Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 638.3684641293535, y: 199.20798015137382 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 638.3684641293535, y: 199.20798015137382 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 638.3684641293535, y: 199.20798015137382 },
  '마지막활동': '2025-09-09T22:57:18.886Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 638.3684641293535, y: 199.20798015137382 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 638.3684641293535, y: 199.20798015137382 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 638.3684641293535, y: 199.20798015137382 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.903Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🔍 프라이빗 영역 1756736942592 변화 감지: 2명 → 2명 (user_updated)
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 633.3643188386993, y: 199.4501162907978 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 633.3643188386993, y: 199.4501162907978 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 633.3643188386993, y: 199.4501162907978 },
  '마지막활동': '2025-09-09T22:57:18.905Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 633.3643188386993, y: 199.4501162907978 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 633.3643188386993, y: 199.4501162907978 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 633.3643188386993, y: 199.4501162907978 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.917Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 628.3901384899027, y: 199.69080251321938 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 628.3901384899027, y: 199.69080251321938 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 628.3901384899027, y: 199.69080251321938 },
  '마지막활동': '2025-09-09T22:57:18.920Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 628.3901384899027, y: 199.69080251321938 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 628.3901384899027, y: 199.69080251321938 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 628.3901384899027, y: 199.69080251321938 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.934Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 623.3859931992486, y: 199.93293865264337 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 623.3859931992486, y: 199.93293865264337 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 623.3859931992486, y: 199.93293865264337 },
  '마지막활동': '2025-09-09T22:57:18.935Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 623.3859931992486, y: 199.93293865264337 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 623.3859931992486, y: 199.93293865264337 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 623.3859931992486, y: 199.93293865264337 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.950Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 618.4118128504542, y: 200.17362487506483 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 618.4118128504542, y: 200.17362487506483 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 618.4118128504542, y: 200.17362487506483 },
  '마지막활동': '2025-09-09T22:57:18.952Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 618.4118128504542, y: 200.17362487506483 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 618.4118128504542, y: 200.17362487506483 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 618.4118128504542, y: 200.17362487506483 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.967Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 613.4076675597979, y: 200.41576101448894 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 613.4076675597979, y: 200.41576101448894 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 613.4076675597979, y: 200.41576101448894 },
  '마지막활동': '2025-09-09T22:57:18.970Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 613.4076675597979, y: 200.41576101448894 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 613.4076675597979, y: 200.41576101448894 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 613.4076675597979, y: 200.41576101448894 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:18.984Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 608.4035222691438, y: 200.65789715391293 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 608.4035222691438, y: 200.65789715391293 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 608.4035222691438, y: 200.65789715391293 },
  '마지막활동': '2025-09-09T22:57:18.986Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 608.4035222691438, y: 200.65789715391293 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 608.4035222691438, y: 200.65789715391293 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 608.4035222691438, y: 200.65789715391293 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.000Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 603.4293419203494, y: 200.8985833763344 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 603.4293419203494, y: 200.8985833763344 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 603.4293419203494, y: 200.8985833763344 },
  '마지막활동': '2025-09-09T22:57:19.002Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 603.4293419203494, y: 200.8985833763344 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 603.4293419203494, y: 200.8985833763344 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 603.4293419203494, y: 200.8985833763344 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.017Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 598.4251966296931, y: 201.1407195157585 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 598.4251966296931, y: 201.1407195157585 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 598.4251966296931, y: 201.1407195157585 },
  '마지막활동': '2025-09-09T22:57:19.020Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 598.4251966296931, y: 201.1407195157585 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 598.4251966296931, y: 201.1407195157585 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 598.4251966296931, y: 201.1407195157585 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.034Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 593.4510162808988, y: 201.38140573817998 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 593.4510162808988, y: 201.38140573817998 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 593.4510162808988, y: 201.38140573817998 },
  '마지막활동': '2025-09-09T22:57:19.036Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 593.4510162808988, y: 201.38140573817998 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 593.4510162808988, y: 201.38140573817998 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 593.4510162808988, y: 201.38140573817998 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.049Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 588.4468709902446, y: 201.62354187760397 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 588.4468709902446, y: 201.62354187760397 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 588.4468709902446, y: 201.62354187760397 },
  '마지막활동': '2025-09-09T22:57:19.051Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 588.4468709902446, y: 201.62354187760397 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 588.4468709902446, y: 201.62354187760397 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 588.4468709902446, y: 201.62354187760397 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.070Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 583.4427256995883, y: 201.86567801702807 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 583.4427256995883, y: 201.86567801702807 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 583.4427256995883, y: 201.86567801702807 },
  '마지막활동': '2025-09-09T22:57:19.073Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 583.4427256995883, y: 201.86567801702807 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 583.4427256995883, y: 201.86567801702807 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 583.4427256995883, y: 201.86567801702807 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.083Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 578.468545350794, y: 202.10636423944953 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 578.468545350794, y: 202.10636423944953 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 578.468545350794, y: 202.10636423944953 },
  '마지막활동': '2025-09-09T22:57:19.086Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 578.468545350794, y: 202.10636423944953 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 578.468545350794, y: 202.10636423944953 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 578.468545350794, y: 202.10636423944953 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.100Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 573.4644000601398, y: 202.34850037887352 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 573.4644000601398, y: 202.34850037887352 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 573.4644000601398, y: 202.34850037887352 },
  '마지막활동': '2025-09-09T22:57:19.102Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 573.4644000601398, y: 202.34850037887352 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 573.4644000601398, y: 202.34850037887352 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 573.4644000601398, y: 202.34850037887352 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.118Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 568.4602547694835, y: 202.59063651829763 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 568.4602547694835, y: 202.59063651829763 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 568.4602547694835, y: 202.59063651829763 },
  '마지막활동': '2025-09-09T22:57:19.120Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 568.4602547694835, y: 202.59063651829763 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 568.4602547694835, y: 202.59063651829763 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 568.4602547694835, y: 202.59063651829763 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.133Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 563.4561094788294, y: 202.83277265772162 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 563.4561094788294, y: 202.83277265772162 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 563.4561094788294, y: 202.83277265772162 },
  '마지막활동': '2025-09-09T22:57:19.136Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 563.4561094788294, y: 202.83277265772162 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 563.4561094788294, y: 202.83277265772162 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 563.4561094788294, y: 202.83277265772162 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': null,
  '마지막활동': '2025-09-09T22:57:19.152Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (whl19810312)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: 1,
  position: { x: 560, y: 203.00000381469727 },
  characterInfo: '있음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 560, y: 203.00000381469727 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': 'whl19810312',
  '위치': { x: 560, y: 203.00000381469727 },
  '마지막활동': '2025-09-09T22:57:19.154Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (whl19810312)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': 'whl19810312',
  '위치': { x: 560, y: 203.00000381469727 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 455, y: 332.3333320617676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:57:05.446Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: 1,
    position: { x: 560, y: 203.00000381469727 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-09T22:56:35.092Z,
    characterInfo: {
      id: 1,
      name: 'whl19810312',
      appearance: [Object],
      images: [Object],
      size: 32,
      position: [Object],
      isActive: true,
      currentMapId: null,
      createdAt: '2025-09-09T17:47:54.277Z',
      updatedAt: '2025-09-09T17:47:54.277Z',
      userId: 1,
      owner: [Object]
    },
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 560, y: 203.00000381469727 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🔍 프라이빗 영역 1756736942592 변화 감지: 2명 → 2명 (user_updated)
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: DaM0sJwgE49lPOizAAAV
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 5JI-mIzkFSjmBwhsAAAN
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
