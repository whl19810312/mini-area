
> metaverse-project@1.0.0 server
> nodemon server/index.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 2명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
✅ 데이터베이스 테이블 동기화 완료
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 2명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
✅ 데이터베이스 테이블 동기화 완료
2025-09-08T05:49:30.201Z - GET / from 127.0.0.1 (HTTPS: true)
🏓 Ping 전송 완료: 0개 소켓
2025-09-08T05:49:52.042Z - OPTIONS /api/auth/login from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:52.044Z - POST /api/auth/login from 192.168.200.106 (HTTPS: true)
🔐 로그인 요청: { email: 'whl19810312@gmail.com', password: '제공됨' }
👤 사용자 조회 결과: ID: 1, Username: whl19810312, EmailVerified: true, IsActive: true
🔑 비밀번호 검증 결과: true
📧 이메일 인증 확인: { emailVerified: true, NODE_ENV: undefined }
✅ 계정 활성화 확인: { isActive: true }
✅ 로그인 성공: { userId: 1, username: 'whl19810312' }
2025-09-08T05:49:52.164Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:52.168Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:52.176Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T05:49:52.179Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'VAoIbyXRG5GPJGaQXiNO2g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 5BEExTDZCtzwtclxAAAB
연결 정보: {
  id: '5BEExTDZCtzwtclxAAAB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 5BEExTDZCtzwtclxAAAB IP: 192.168.200.106
새로운 WebSocket 연결: 5BEExTDZCtzwtclxAAAB
2025-09-08T05:49:52.228Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:52.230Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 인증 성공: whl19810312 (1)
✨ [온라인] 새로운 사용자 또는 대기실 입장: whl19810312 (ID: 1)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': undefined,
  '마지막활동': '2025-09-08T05:49:52.241Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '5BEExTDZCtzwtclxAAAB',
  userId: 1,
  username: 'whl19810312',
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 2:49:54 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 wait에 입실 중 → 오프라인 (방 정보 유지)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': undefined,
  '마지막활동': '2025-09-08T05:49:54.645Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 0명, 오프라인: 3명
   활성 소켓: 0개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 0명, 오프라인: 3명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 0, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 5BEExTDZCtzwtclxAAAB
2025-09-08T05:49:54.769Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:54.771Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:54.772Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T05:49:54.782Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:54.790Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T05:49:54.795Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'sH2M33e2Fi7wuM0Arb8hCA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): GzJ97GLyrNOr4K6cAAAD
연결 정보: {
  id: 'GzJ97GLyrNOr4K6cAAAD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: GzJ97GLyrNOr4K6cAAAD IP: 192.168.200.106
새로운 WebSocket 연결: GzJ97GLyrNOr4K6cAAAD
2025-09-08T05:49:54.817Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T05:49:54.835Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T05:49:54.839Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'M2ilXGd8UcRaRy0/1pWSdQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 6K0OBRFiV44b5geuAAAF
연결 정보: {
  id: '6K0OBRFiV44b5geuAAAF',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 6K0OBRFiV44b5geuAAAF IP: 192.168.200.106
새로운 WebSocket 연결: 6K0OBRFiV44b5geuAAAF
2025-09-08T05:49:54.872Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T05:49:54.898Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T05:49:54.908Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 wait
   📍 이전 위치: (N/A, N/A), 방향: N/A
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': undefined,
  '마지막활동': '2025-09-08T05:49:54.913Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 wait
   📍 이전 위치: (N/A, N/A), 방향: N/A
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': undefined,
  '마지막활동': '2025-09-08T05:49:54.917Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T05:49:54.919Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
2025-09-08T05:49:54.939Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
❌ 자동 재입장 실패: 맵 wait가 존재하지 않음
❌ 자동 재입장 실패: 맵 wait가 존재하지 않음
2025-09-08T05:49:58.608Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T05:49:58.610Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T05:49:58.645Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: whl19810312 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T05:49:58.651Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 whl19810312 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에서 퇴장
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에 입장
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T05:49:58.652Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T05:49:58.655Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: whl19810312 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T05:49:58.657Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 whl19810312 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T05:49:58.658Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 whl19810312 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에서 퇴장
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에 입장
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T05:49:58.659Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T05:49:58.661Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 퇴장 요청: whl19810312
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T05:49:58.662Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 whl19810312 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🧹 빈 프라이빗 영역 1756736942592 정리
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:54.524Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 201 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 201 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 201 },
  '마지막활동': '2025-09-08T06:13:54.527Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 201 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 201 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 201 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:54.548Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 201 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 201 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 201 },
  '마지막활동': '2025-09-08T06:13:54.550Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 201 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 201 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 201 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:55.408Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 211 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 211 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 211 },
  '마지막활동': '2025-09-08T06:13:55.410Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 211 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 211 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 211 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:55.734Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 221 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 221 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 221 },
  '마지막활동': '2025-09-08T06:13:55.736Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 221 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 221 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 221 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.234Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 231 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 231 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 231 },
  '마지막활동': '2025-09-08T06:13:56.237Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 231 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 231 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 231 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.264Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 241 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 241 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 241 },
  '마지막활동': '2025-09-08T06:13:56.266Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 241 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 241 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 241 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.295Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 251 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 251 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 251 },
  '마지막활동': '2025-09-08T06:13:56.297Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 251 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 251 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 251 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.325Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 261 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 261 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 261 },
  '마지막활동': '2025-09-08T06:13:56.327Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 261 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 261 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 261 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.355Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 271 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 271 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 271 },
  '마지막활동': '2025-09-08T06:13:56.357Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 271 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 271 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 271 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.386Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 281 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 281 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 281 },
  '마지막활동': '2025-09-08T06:13:56.387Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 281 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 281 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 281 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.415Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 291 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 291 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 291 },
  '마지막활동': '2025-09-08T06:13:56.417Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 291 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 291 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 291 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.445Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 301 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 301 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 301 },
  '마지막활동': '2025-09-08T06:13:56.447Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 301 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 301 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 301 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.475Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 311 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 311 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 311 },
  '마지막활동': '2025-09-08T06:13:56.477Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 311 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 311 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 311 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.505Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 321 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 321 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 321 },
  '마지막활동': '2025-09-08T06:13:56.507Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 321 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 321 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 321 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:13:56.535Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818, y: 331 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818, y: 331 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818, y: 331 },
  '마지막활동': '2025-09-08T06:13:56.537Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818, y: 331 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 818, y: 331 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
🏓 Ping 전송 완료: 1개 소켓
2025-09-08T06:54:48.368Z - OPTIONS /api/auth/login from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:48.381Z - POST /api/auth/login from 192.168.200.108 (HTTPS: true)
🔐 로그인 요청: { email: 'test1@test.com', password: '제공됨' }
👤 사용자 조회 결과: ID: 2, Username: test1, EmailVerified: true, IsActive: true
🔑 비밀번호 검증 결과: true
📧 이메일 인증 확인: { emailVerified: true, NODE_ENV: undefined }
✅ 계정 활성화 확인: { isActive: true }
✅ 로그인 성공: { userId: 2, username: 'test1' }
2025-09-08T06:54:48.562Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:48.578Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:48.603Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T06:54:48.608Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ClzzFNlLSp5mtfnNphunwA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): 0HYslqOwZnYmMY9qAAAH
연결 정보: {
  id: '0HYslqOwZnYmMY9qAAAH',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 0HYslqOwZnYmMY9qAAAH IP: 192.168.200.108
새로운 WebSocket 연결: 0HYslqOwZnYmMY9qAAAH
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (440, 197), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 440, y: 197 },
  '마지막활동': '2025-09-08T06:54:48.645Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T06:54:48.704Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:48.710Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 440, y: 197 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 440, y: 197 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 440, y: 197 },
  '마지막활동': '2025-09-08T06:54:49.645Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 440, y: 197 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 440, y: 197 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:48.645Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 440, y: 197 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '0HYslqOwZnYmMY9qAAAH',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 3:54:49 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 440, y: 197 },
  '마지막활동': '2025-09-08T06:54:49.983Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 0HYslqOwZnYmMY9qAAAH
2025-09-08T06:54:50.360Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:50.363Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:50.369Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T06:54:50.383Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T06:54:50.420Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T06:54:50.433Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:54:50.443Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:54:50.478Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T06:54:50.486Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T06:54:50.488Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T06:54:50.540Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'TaiEifoyU91Wj59LariKoQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): nBd6_AsqGVHi7ixIAAAJ
연결 정보: {
  id: 'nBd6_AsqGVHi7ixIAAAJ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: nBd6_AsqGVHi7ixIAAAJ IP: 192.168.200.108
새로운 WebSocket 연결: nBd6_AsqGVHi7ixIAAAJ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Q2dUaiLjuqPI0J1lMJs47g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T06:54:50.603Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): 6zzZqOz0BCkNLeyXAAAL
연결 정보: {
  id: '6zzZqOz0BCkNLeyXAAAL',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 6zzZqOz0BCkNLeyXAAAL IP: 192.168.200.108
새로운 WebSocket 연결: 6zzZqOz0BCkNLeyXAAAL
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:54:50.769Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=6zzZqOz0BCkNLeyXAAAL
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: undefined → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:54:50.771Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 undefined → 프라이빗 영역 1756736942592 입장 (참가자: 0명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
사용자 undefined (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 undefined (2)가 프라이빗 영역 1756736942592에 입장
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:54:50.772Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (2) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:54:50.774Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=6zzZqOz0BCkNLeyXAAAL
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: undefined → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:54:50.776Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 undefined ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:54:50.777Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 undefined → 프라이빗 영역 1756736942592 입장 (참가자: 0명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
사용자 undefined (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 undefined (2)가 프라이빗 영역 1756736942592에 입장
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:54:50.780Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (2) left room 3
WebSocket 인증 성공: 2 test1
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 wait
   📍 이전 위치: (N/A, N/A), 방향: N/A
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:54:50.784Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:54:50.788Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.784Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 퇴장 요청: test1
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:54:50.790Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:54:50.791Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🧹 빈 프라이빗 영역 1756736942592 정리
❌ 자동 재입장 실패: 맵 wait가 존재하지 않음
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:54:51.793Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:54:51.856Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:54:51.868Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.491Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 807.2195383782938, y: 195.94883619218265 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 807.2195383782938, y: 195.94883619218265 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 807.2195383782938, y: 195.94883619218265 },
  '마지막활동': '2025-09-08T06:55:26.497Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 807.2195383782938, y: 195.94883619218265 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 807.2195383782938, y: 195.94883619218265 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 807.2195383782938, y: 195.94883619218265 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.518Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 806.4437501794723, y: 200.8680386347098 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 806.4437501794723, y: 200.8680386347098 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 806.4437501794723, y: 200.8680386347098 },
  '마지막활동': '2025-09-08T06:55:26.522Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 806.4437501794723, y: 200.8680386347098 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 806.4437501794723, y: 200.8680386347098 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 806.4437501794723, y: 200.8680386347098 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.531Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 806.4437501794723, y: 200.8680386347098 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 806.4437501794723, y: 200.8680386347098 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 806.4437501794723, y: 200.8680386347098 },
  '마지막활동': '2025-09-08T06:55:26.540Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 806.4437501794723, y: 200.8680386347098 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 806.4437501794723, y: 200.8680386347098 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 806.4437501794723, y: 200.8680386347098 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.559Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 805.6632885577661, y: 205.81687482689244 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 805.6632885577661, y: 205.81687482689244 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 805.6632885577661, y: 205.81687482689244 },
  '마지막활동': '2025-09-08T06:55:26.567Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 805.6632885577661, y: 205.81687482689244 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 805.6632885577661, y: 205.81687482689244 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 805.6632885577661, y: 205.81687482689244 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.609Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 803.3265771155325, y: 220.63374965378273 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 803.3265771155325, y: 220.63374965378273 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 803.3265771155325, y: 220.63374965378273 },
  '마지막활동': '2025-09-08T06:55:26.617Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 803.3265771155325, y: 220.63374965378273 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 803.3265771155325, y: 220.63374965378273 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.3265771155325, y: 220.63374965378273 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.622Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 804.8875003589446, y: 210.73607726941958 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 804.8875003589446, y: 210.73607726941958 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 804.8875003589446, y: 210.73607726941958 },
  '마지막활동': '2025-09-08T06:55:26.629Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 804.8875003589446, y: 210.73607726941958 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 804.8875003589446, y: 210.73607726941958 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 804.8875003589446, y: 210.73607726941958 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.643Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 802.5461154938266, y: 225.58258584596322 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 802.5461154938266, y: 225.58258584596322 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 802.5461154938266, y: 225.58258584596322 },
  '마지막활동': '2025-09-08T06:55:26.656Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 802.5461154938266, y: 225.58258584596322 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 802.5461154938266, y: 225.58258584596322 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 802.5461154938266, y: 225.58258584596322 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.666Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 804.1117121601231, y: 215.65527971194672 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 804.1117121601231, y: 215.65527971194672 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 804.1117121601231, y: 215.65527971194672 },
  '마지막활동': '2025-09-08T06:55:26.676Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 804.1117121601231, y: 215.65527971194672 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 804.1117121601231, y: 215.65527971194672 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 804.1117121601231, y: 215.65527971194672 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.686Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 801.7656538721204, y: 230.53142203814588 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 801.7656538721204, y: 230.53142203814588 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 801.7656538721204, y: 230.53142203814588 },
  '마지막활동': '2025-09-08T06:55:26.695Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 801.7656538721204, y: 230.53142203814588 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 801.7656538721204, y: 230.53142203814588 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 801.7656538721204, y: 230.53142203814588 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.704Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 803.3359239613017, y: 220.57448215447386 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 803.3359239613017, y: 220.57448215447386 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 803.3359239613017, y: 220.57448215447386 },
  '마지막활동': '2025-09-08T06:55:26.713Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 803.3359239613017, y: 220.57448215447386 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 803.3359239613017, y: 220.57448215447386 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.3359239613017, y: 220.57448215447386 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.723Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 800.9851922504146, y: 235.48025823032637 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 800.9851922504146, y: 235.48025823032637 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 800.9851922504146, y: 235.48025823032637 },
  '마지막활동': '2025-09-08T06:55:26.732Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 800.9851922504146, y: 235.48025823032637 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 800.9851922504146, y: 235.48025823032637 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 800.9851922504146, y: 235.48025823032637 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.744Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 802.5601357624798, y: 225.49368459700315 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 802.5601357624798, y: 225.49368459700315 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 802.5601357624798, y: 225.49368459700315 },
  '마지막활동': '2025-09-08T06:55:26.752Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 802.5601357624798, y: 225.49368459700315 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 802.5601357624798, y: 225.49368459700315 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 802.5601357624798, y: 225.49368459700315 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.763Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 799.4289424298872, y: 245.348296865034 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 799.4289424298872, y: 245.348296865034 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 799.4289424298872, y: 245.348296865034 },
  '마지막활동': '2025-09-08T06:55:26.771Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 799.4289424298872, y: 245.348296865034 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 799.4289424298872, y: 245.348296865034 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 799.4289424298872, y: 245.348296865034 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.781Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 801.7796741407736, y: 230.4425207891858 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 801.7796741407736, y: 230.4425207891858 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 801.7796741407736, y: 230.4425207891858 },
  '마지막활동': '2025-09-08T06:55:26.790Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 801.7796741407736, y: 230.4425207891858 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 801.7796741407736, y: 230.4425207891858 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 801.7796741407736, y: 230.4425207891858 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.799Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 798.6484808081814, y: 250.2971330572145 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 798.6484808081814, y: 250.2971330572145 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 798.6484808081814, y: 250.2971330572145 },
  '마지막활동': '2025-09-08T06:55:26.808Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 798.6484808081814, y: 250.2971330572145 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 798.6484808081814, y: 250.2971330572145 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.6484808081814, y: 250.2971330572145 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.817Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 801.0038859419521, y: 235.36172323171294 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 801.0038859419521, y: 235.36172323171294 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 801.0038859419521, y: 235.36172323171294 },
  '마지막활동': '2025-09-08T06:55:26.825Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 801.0038859419521, y: 235.36172323171294 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 801.0038859419521, y: 235.36172323171294 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 801.0038859419521, y: 235.36172323171294 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.835Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.8726926093599, y: 255.21633549974163 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 797.8726926093599, y: 255.21633549974163 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.8726926093599, y: 255.21633549974163 },
  '마지막활동': '2025-09-08T06:55:26.844Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.8726926093599, y: 255.21633549974163 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 797.8726926093599, y: 255.21633549974163 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.8726926093599, y: 255.21633549974163 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.854Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 800.223424320246, y: 240.3105594238956 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 800.223424320246, y: 240.3105594238956 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 800.223424320246, y: 240.3105594238956 },
  '마지막활동': '2025-09-08T06:55:26.862Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 800.223424320246, y: 240.3105594238956 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 800.223424320246, y: 240.3105594238956 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 800.223424320246, y: 240.3105594238956 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.872Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.0969044105384, y: 260.1355379422688 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 797.0969044105384, y: 260.1355379422688 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.0969044105384, y: 260.1355379422688 },
  '마지막활동': '2025-09-08T06:55:26.880Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.0969044105384, y: 260.1355379422688 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 797.0969044105384, y: 260.1355379422688 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.0969044105384, y: 260.1355379422688 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.890Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 799.4382892756553, y: 245.28902936573158 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 799.4382892756553, y: 245.28902936573158 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 799.4382892756553, y: 245.28902936573158 },
  '마지막활동': '2025-09-08T06:55:26.899Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 799.4382892756553, y: 245.28902936573158 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 799.4382892756553, y: 245.28902936573158 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 799.4382892756553, y: 245.28902936573158 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.908Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 795.5453280128954, y: 269.97394282732307 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 795.5453280128954, y: 269.97394282732307 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 795.5453280128954, y: 269.97394282732307 },
  '마지막활동': '2025-09-08T06:55:26.917Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 795.5453280128954, y: 269.97394282732307 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 795.5453280128954, y: 269.97394282732307 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 795.5453280128954, y: 269.97394282732307 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 798.6578276539494, y: 250.23786555791207 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 798.6578276539494, y: 250.23786555791207 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 798.6578276539494, y: 250.23786555791207 },
  '마지막활동': '2025-09-08T06:55:26.934Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 798.6578276539494, y: 250.23786555791207 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 798.6578276539494, y: 250.23786555791207 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.6578276539494, y: 250.23786555791207 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.945Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 794.7695398140736, y: 274.89314526985237 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 794.7695398140736, y: 274.89314526985237 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 794.7695398140736, y: 274.89314526985237 },
  '마지막활동': '2025-09-08T06:55:26.953Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 794.7695398140736, y: 274.89314526985237 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 794.7695398140736, y: 274.89314526985237 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 794.7695398140736, y: 274.89314526985237 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.964Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.8820394551279, y: 255.1570680004392 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 797.8820394551279, y: 255.1570680004392 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.8820394551279, y: 255.1570680004392 },
  '마지막활동': '2025-09-08T06:55:26.970Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.8820394551279, y: 255.1570680004392 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 797.8820394551279, y: 255.1570680004392 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.8820394551279, y: 255.1570680004392 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.982Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.9890781923677, y: 279.84198146203283 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 793.9890781923677, y: 279.84198146203283 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.9890781923677, y: 279.84198146203283 },
  '마지막활동': '2025-09-08T06:55:26.989Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.9890781923677, y: 279.84198146203283 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 793.9890781923677, y: 279.84198146203283 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.9890781923677, y: 279.84198146203283 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:26.999Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.1015778334217, y: 260.10590419262184 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 797.1015778334217, y: 260.10590419262184 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.1015778334217, y: 260.10590419262184 },
  '마지막활동': '2025-09-08T06:55:27.009Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.1015778334217, y: 260.10590419262184 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 797.1015778334217, y: 260.10590419262184 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.1015778334217, y: 260.10590419262184 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.017Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.2132899935463, y: 284.76118390455997 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 793.2132899935463, y: 284.76118390455997 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.2132899935463, y: 284.76118390455997 },
  '마지막활동': '2025-09-08T06:55:27.025Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.2132899935463, y: 284.76118390455997 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 793.2132899935463, y: 284.76118390455997 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.2132899935463, y: 284.76118390455997 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.034Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 796.3211162117159, y: 265.0547403848023 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 796.3211162117159, y: 265.0547403848023 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 796.3211162117159, y: 265.0547403848023 },
  '마지막활동': '2025-09-08T06:55:27.041Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 796.3211162117159, y: 265.0547403848023 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 796.3211162117159, y: 265.0547403848023 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 796.3211162117159, y: 265.0547403848023 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.051Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 792.4375017947248, y: 289.6803863470871 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 792.4375017947248, y: 289.6803863470871 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 792.4375017947248, y: 289.6803863470871 },
  '마지막활동': '2025-09-08T06:55:27.065Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 792.4375017947248, y: 289.6803863470871 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 792.4375017947248, y: 289.6803863470871 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 792.4375017947248, y: 289.6803863470871 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.074Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 795.5359811671252, y: 270.0332103266383 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 795.5359811671252, y: 270.0332103266383 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 795.5359811671252, y: 270.0332103266383 },
  '마지막활동': '2025-09-08T06:55:27.082Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 795.5359811671252, y: 270.0332103266383 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 795.5359811671252, y: 270.0332103266383 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 795.5359811671252, y: 270.0332103266383 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.093Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.8859253970818, y: 299.5187912321414 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 790.8859253970818, y: 299.5187912321414 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.8859253970818, y: 299.5187912321414 },
  '마지막활동': '2025-09-08T06:55:27.100Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.8859253970818, y: 299.5187912321414 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 790.8859253970818, y: 299.5187912321414 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.8859253970818, y: 299.5187912321414 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.109Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 794.7601929683034, y: 274.9524127691676 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 794.7601929683034, y: 274.9524127691676 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 794.7601929683034, y: 274.9524127691676 },
  '마지막활동': '2025-09-08T06:55:27.116Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 794.7601929683034, y: 274.9524127691676 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 794.7601929683034, y: 274.9524127691676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 794.7601929683034, y: 274.9524127691676 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.126Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.1054637753759, y: 304.46762742432185 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 790.1054637753759, y: 304.46762742432185 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.1054637753759, y: 304.46762742432185 },
  '마지막활동': '2025-09-08T06:55:27.134Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.1054637753759, y: 304.46762742432185 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 790.1054637753759, y: 304.46762742432185 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.1054637753759, y: 304.46762742432185 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.144Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.9797313465975, y: 279.9012489613481 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 793.9797313465975, y: 279.9012489613481 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.9797313465975, y: 279.9012489613481 },
  '마지막활동': '2025-09-08T06:55:27.151Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.9797313465975, y: 279.9012489613481 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 793.9797313465975, y: 279.9012489613481 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.9797313465975, y: 279.9012489613481 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.161Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 789.3296755765541, y: 309.38682986685114 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 789.3296755765541, y: 309.38682986685114 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 789.3296755765541, y: 309.38682986685114 },
  '마지막활동': '2025-09-08T06:55:27.168Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 789.3296755765541, y: 309.38682986685114 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 789.3296755765541, y: 309.38682986685114 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 789.3296755765541, y: 309.38682986685114 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.180Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.203943147776, y: 284.8204514038752 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 793.203943147776, y: 284.8204514038752 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.203943147776, y: 284.8204514038752 },
  '마지막활동': '2025-09-08T06:55:27.187Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.203943147776, y: 284.8204514038752 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 793.203943147776, y: 284.8204514038752 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.203943147776, y: 284.8204514038752 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.197Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 788.5492139548483, y: 314.3356660590316 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 788.5492139548483, y: 314.3356660590316 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 788.5492139548483, y: 314.3356660590316 },
  '마지막활동': '2025-09-08T06:55:27.204Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 788.5492139548483, y: 314.3356660590316 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 788.5492139548483, y: 314.3356660590316 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 788.5492139548483, y: 314.3356660590316 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.215Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 792.4234815260698, y: 289.76928759605784 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 792.4234815260698, y: 289.76928759605784 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 792.4234815260698, y: 289.76928759605784 },
  '마지막활동': '2025-09-08T06:55:27.223Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 792.4234815260698, y: 289.76928759605784 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 792.4234815260698, y: 289.76928759605784 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 792.4234815260698, y: 289.76928759605784 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.235Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 787.7687523331424, y: 319.2845022512121 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 787.7687523331424, y: 319.2845022512121 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 787.7687523331424, y: 319.2845022512121 },
  '마지막활동': '2025-09-08T06:55:27.243Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 787.7687523331424, y: 319.2845022512121 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 787.7687523331424, y: 319.2845022512121 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 787.7687523331424, y: 319.2845022512121 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.253Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 791.643019904364, y: 294.7181237882383 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 791.643019904364, y: 294.7181237882383 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 791.643019904364, y: 294.7181237882383 },
  '마지막활동': '2025-09-08T06:55:27.261Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 791.643019904364, y: 294.7181237882383 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 791.643019904364, y: 294.7181237882383 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 791.643019904364, y: 294.7181237882383 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.271Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.9976375572053, y: 324.1740709440859 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 786.9976375572053, y: 324.1740709440859 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.9976375572053, y: 324.1740709440859 },
  '마지막활동': '2025-09-08T06:55:27.279Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.9976375572053, y: 324.1740709440859 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 786.9976375572053, y: 324.1740709440859 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.9976375572053, y: 324.1740709440859 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.290Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.0820966609518, y: 304.61579617260145 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 790.0820966609518, y: 304.61579617260145 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.0820966609518, y: 304.61579617260145 },
  '마지막활동': '2025-09-08T06:55:27.297Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.0820966609518, y: 304.61579617260145 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 790.0820966609518, y: 304.61579617260145 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.0820966609518, y: 304.61579617260145 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.307Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.2218493583838, y: 329.093273386613 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 786.2218493583838, y: 329.093273386613 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.2218493583838, y: 329.093273386613 },
  '마지막활동': '2025-09-08T06:55:27.313Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.2218493583838, y: 329.093273386613 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 786.2218493583838, y: 329.093273386613 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.2218493583838, y: 329.093273386613 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.323Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 789.3016350392456, y: 309.5646323647841 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 789.3016350392456, y: 309.5646323647841 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 789.3016350392456, y: 309.5646323647841 },
  '마지막활동': '2025-09-08T06:55:27.330Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 789.3016350392456, y: 309.5646323647841 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 789.3016350392456, y: 309.5646323647841 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 789.3016350392456, y: 309.5646323647841 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.343Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 785.4460611595623, y: 334.01247582914016 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 785.4460611595623, y: 334.01247582914016 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 785.4460611595623, y: 334.01247582914016 },
  '마지막활동': '2025-09-08T06:55:27.349Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 785.4460611595623, y: 334.01247582914016 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 785.4460611595623, y: 334.01247582914016 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 785.4460611595623, y: 334.01247582914016 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.361Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 788.5258468404242, y: 314.4838348073112 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 788.5258468404242, y: 314.4838348073112 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 788.5258468404242, y: 314.4838348073112 },
  '마지막활동': '2025-09-08T06:55:27.369Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 788.5258468404242, y: 314.4838348073112 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 788.5258468404242, y: 314.4838348073112 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 788.5258468404242, y: 314.4838348073112 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.379Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 784.6609261149716, y: 338.99094577097617 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 784.6609261149716, y: 338.99094577097617 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 784.6609261149716, y: 338.99094577097617 },
  '마지막활동': '2025-09-08T06:55:27.387Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 784.6609261149716, y: 338.99094577097617 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 784.6609261149716, y: 338.99094577097617 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 784.6609261149716, y: 338.99094577097617 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.397Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 787.7453852187183, y: 319.4326709994917 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 787.7453852187183, y: 319.4326709994917 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 787.7453852187183, y: 319.4326709994917 },
  '마지막활동': '2025-09-08T06:55:27.406Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 787.7453852187183, y: 319.4326709994917 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 787.7453852187183, y: 319.4326709994917 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 787.7453852187183, y: 319.4326709994917 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.417Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.8851379161501, y: 343.9101482135033 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 783.8851379161501, y: 343.9101482135033 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.8851379161501, y: 343.9101482135033 },
  '마지막활동': '2025-09-08T06:55:27.423Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.8851379161501, y: 343.9101482135033 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 783.8851379161501, y: 343.9101482135033 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.8851379161501, y: 343.9101482135033 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.434Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.9695970198965, y: 324.351873442021 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 786.9695970198965, y: 324.351873442021 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.9695970198965, y: 324.351873442021 },
  '마지막활동': '2025-09-08T06:55:27.441Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.9695970198965, y: 324.351873442021 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 786.9695970198965, y: 324.351873442021 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.9695970198965, y: 324.351873442021 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.453Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.1046762944443, y: 348.85898440568377 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 783.1046762944443, y: 348.85898440568377 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.1046762944443, y: 348.85898440568377 },
  '마지막활동': '2025-09-08T06:55:27.467Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.1046762944443, y: 348.85898440568377 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 783.1046762944443, y: 348.85898440568377 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.1046762944443, y: 348.85898440568377 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.476Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.193808821075, y: 329.2710758845481 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 786.193808821075, y: 329.2710758845481 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.193808821075, y: 329.2710758845481 },
  '마지막활동': '2025-09-08T06:55:27.484Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.193808821075, y: 329.2710758845481 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 786.193808821075, y: 329.2710758845481 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.193808821075, y: 329.2710758845481 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.494Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 781.553099896801, y: 358.6973892907402 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 781.553099896801, y: 358.6973892907402 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 781.553099896801, y: 358.6973892907402 },
  '마지막활동': '2025-09-08T06:55:27.502Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 781.553099896801, y: 358.6973892907402 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 781.553099896801, y: 358.6973892907402 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 781.553099896801, y: 358.6973892907402 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.513Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 785.4133471993691, y: 334.2199120767286 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 785.4133471993691, y: 334.2199120767286 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 785.4133471993691, y: 334.2199120767286 },
  '마지막활동': '2025-09-08T06:55:27.521Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 785.4133471993691, y: 334.2199120767286 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 785.4133471993691, y: 334.2199120767286 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 785.4133471993691, y: 334.2199120767286 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.531Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 780.7773116979795, y: 363.61659173326734 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 780.7773116979795, y: 363.61659173326734 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 780.7773116979795, y: 363.61659173326734 },
  '마지막활동': '2025-09-08T06:55:27.537Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 780.7773116979795, y: 363.61659173326734 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 780.7773116979795, y: 363.61659173326734 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 780.7773116979795, y: 363.61659173326734 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.549Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 784.6328855776629, y: 339.1687482689112 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 784.6328855776629, y: 339.1687482689112 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 784.6328855776629, y: 339.1687482689112 },
  '마지막활동': '2025-09-08T06:55:27.557Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 784.6328855776629, y: 339.1687482689112 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 784.6328855776629, y: 339.1687482689112 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 784.6328855776629, y: 339.1687482689112 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.568Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.9968500762736, y: 368.5654279254478 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 779.9968500762736, y: 368.5654279254478 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.9968500762736, y: 368.5654279254478 },
  '마지막활동': '2025-09-08T06:55:27.577Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.9968500762736, y: 368.5654279254478 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 779.9968500762736, y: 368.5654279254478 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.9968500762736, y: 368.5654279254478 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.586Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.8570973788414, y: 344.08795071143834 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 783.8570973788414, y: 344.08795071143834 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.8570973788414, y: 344.08795071143834 },
  '마지막활동': '2025-09-08T06:55:27.594Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.8570973788414, y: 344.08795071143834 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 783.8570973788414, y: 344.08795071143834 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.8570973788414, y: 344.08795071143834 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.602Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.2163884545674, y: 373.51426411763043 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 779.2163884545674, y: 373.51426411763043 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.2163884545674, y: 373.51426411763043 },
  '마지막활동': '2025-09-08T06:55:27.610Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.2163884545674, y: 373.51426411763043 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 779.2163884545674, y: 373.51426411763043 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.2163884545674, y: 373.51426411763043 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.621Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 782.3008475583141, y: 353.95598934614594 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 782.3008475583141, y: 353.95598934614594 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 782.3008475583141, y: 353.95598934614594 },
  '마지막활동': '2025-09-08T06:55:27.628Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 782.3008475583141, y: 353.95598934614594 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 782.3008475583141, y: 353.95598934614594 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 782.3008475583141, y: 353.95598934614594 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.639Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 778.4359268328612, y: 378.46310030981306 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 778.4359268328612, y: 378.46310030981306 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 778.4359268328612, y: 378.46310030981306 },
  '마지막활동': '2025-09-08T06:55:27.646Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 778.4359268328612, y: 378.46310030981306 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 778.4359268328612, y: 378.46310030981306 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 778.4359268328612, y: 378.46310030981306 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.657Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 781.5250593594926, y: 358.8751917886731 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 781.5250593594926, y: 358.8751917886731 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 781.5250593594926, y: 358.8751917886731 },
  '마지막활동': '2025-09-08T06:55:27.665Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 781.5250593594926, y: 358.8751917886731 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 781.5250593594926, y: 358.8751917886731 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 781.5250593594926, y: 358.8751917886731 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.677Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 777.6601386340398, y: 383.3823027523402 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 777.6601386340398, y: 383.3823027523402 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 777.6601386340398, y: 383.3823027523402 },
  '마지막활동': '2025-09-08T06:55:27.684Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 777.6601386340398, y: 383.3823027523402 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 777.6601386340398, y: 383.3823027523402 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 777.6601386340398, y: 383.3823027523402 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.693Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 780.7492711606711, y: 363.7943942312002 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 780.7492711606711, y: 363.7943942312002 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 780.7492711606711, y: 363.7943942312002 },
  '마지막활동': '2025-09-08T06:55:27.701Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 780.7492711606711, y: 363.7943942312002 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 780.7492711606711, y: 363.7943942312002 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 780.7492711606711, y: 363.7943942312002 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.711Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 776.8796770123336, y: 388.3311389445228 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 776.8796770123336, y: 388.3311389445228 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 776.8796770123336, y: 388.3311389445228 },
  '마지막활동': '2025-09-08T06:55:27.718Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 776.8796770123336, y: 388.3311389445228 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 776.8796770123336, y: 388.3311389445228 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 776.8796770123336, y: 388.3311389445228 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.729Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.9734829618496, y: 368.71359667372735 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 779.9734829618496, y: 368.71359667372735 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.9734829618496, y: 368.71359667372735 },
  '마지막활동': '2025-09-08T06:55:27.737Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.9734829618496, y: 368.71359667372735 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 779.9734829618496, y: 368.71359667372735 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.9734829618496, y: 368.71359667372735 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.746Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 776.0992153906277, y: 393.2799751367033 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 776.0992153906277, y: 393.2799751367033 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 776.0992153906277, y: 393.2799751367033 },
  '마지막활동': '2025-09-08T06:55:27.753Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 776.0992153906277, y: 393.2799751367033 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 776.0992153906277, y: 393.2799751367033 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 776.0992153906277, y: 393.2799751367033 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.764Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.1930213401434, y: 373.66243286591 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 779.1930213401434, y: 373.66243286591 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.1930213401434, y: 373.66243286591 },
  '마지막활동': '2025-09-08T06:55:27.771Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.1930213401434, y: 373.66243286591 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 779.1930213401434, y: 373.66243286591 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.1930213401434, y: 373.66243286591 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.781Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 775.3234271918062, y: 398.1991775792304 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 775.3234271918062, y: 398.1991775792304 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 775.3234271918062, y: 398.1991775792304 },
  '마지막활동': '2025-09-08T06:55:27.789Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 775.3234271918062, y: 398.1991775792304 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 775.3234271918062, y: 398.1991775792304 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 775.3234271918062, y: 398.1991775792304 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.799Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 778.4125597184376, y: 378.61126905809044 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 778.4125597184376, y: 378.61126905809044 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 778.4125597184376, y: 378.61126905809044 },
  '마지막활동': '2025-09-08T06:55:27.807Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 778.4125597184376, y: 378.61126905809044 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 778.4125597184376, y: 378.61126905809044 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 778.4125597184376, y: 378.61126905809044 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.817Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 774.5429655701, y: 403.14801377141305 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 774.5429655701, y: 403.14801377141305 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 774.5429655701, y: 403.14801377141305 },
  '마지막활동': '2025-09-08T06:55:27.824Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 774.5429655701, y: 403.14801377141305 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 774.5429655701, y: 403.14801377141305 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 774.5429655701, y: 403.14801377141305 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.834Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 777.6367715196161, y: 383.5304715006176 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 777.6367715196161, y: 383.5304715006176 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 777.6367715196161, y: 383.5304715006176 },
  '마지막활동': '2025-09-08T06:55:27.842Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 777.6367715196161, y: 383.5304715006176 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 777.6367715196161, y: 383.5304715006176 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 777.6367715196161, y: 383.5304715006176 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.852Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 773.7671773712785, y: 408.0672162139402 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 773.7671773712785, y: 408.0672162139402 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 773.7671773712785, y: 408.0672162139402 },
  '마지막활동': '2025-09-08T06:55:27.865Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 773.7671773712785, y: 408.0672162139402 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 773.7671773712785, y: 408.0672162139402 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 773.7671773712785, y: 408.0672162139402 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.874Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 776.8563098979103, y: 388.47930769279805 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 776.8563098979103, y: 388.47930769279805 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 776.8563098979103, y: 388.47930769279805 },
  '마지막활동': '2025-09-08T06:55:27.882Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 776.8563098979103, y: 388.47930769279805 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 776.8563098979103, y: 388.47930769279805 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 776.8563098979103, y: 388.47930769279805 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.891Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 772.9867157495723, y: 413.0160524061228 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 772.9867157495723, y: 413.0160524061228 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 772.9867157495723, y: 413.0160524061228 },
  '마지막활동': '2025-09-08T06:55:27.898Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 772.9867157495723, y: 413.0160524061228 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 772.9867157495723, y: 413.0160524061228 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 772.9867157495723, y: 413.0160524061228 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.909Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 775.3047335002673, y: 398.3177125778523 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 775.3047335002673, y: 398.3177125778523 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 775.3047335002673, y: 398.3177125778523 },
  '마지막활동': '2025-09-08T06:55:27.917Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 775.3047335002673, y: 398.3177125778523 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 775.3047335002673, y: 398.3177125778523 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 775.3047335002673, y: 398.3177125778523 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.927Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 772.2062541278661, y: 417.96488859830544 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 772.2062541278661, y: 417.96488859830544 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 772.2062541278661, y: 417.96488859830544 },
  '마지막활동': '2025-09-08T06:55:27.934Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 772.2062541278661, y: 417.96488859830544 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 772.2062541278661, y: 417.96488859830544 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 772.2062541278661, y: 417.96488859830544 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.944Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 774.5289453014458, y: 403.23691502037946 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 774.5289453014458, y: 403.23691502037946 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 774.5289453014458, y: 403.23691502037946 },
  '마지막활동': '2025-09-08T06:55:27.951Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 774.5289453014458, y: 403.23691502037946 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 774.5289453014458, y: 403.23691502037946 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 774.5289453014458, y: 403.23691502037946 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.960Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 771.4257925061602, y: 422.9137247904859 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 771.4257925061602, y: 422.9137247904859 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 771.4257925061602, y: 422.9137247904859 },
  '마지막활동': '2025-09-08T06:55:27.967Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 771.4257925061602, y: 422.9137247904859 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 771.4257925061602, y: 422.9137247904859 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 771.4257925061602, y: 422.9137247904859 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.979Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 773.7531571026243, y: 408.1561174629066 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 773.7531571026243, y: 408.1561174629066 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 773.7531571026243, y: 408.1561174629066 },
  '마지막활동': '2025-09-08T06:55:27.986Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 773.7531571026243, y: 408.1561174629066 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 773.7531571026243, y: 408.1561174629066 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 773.7531571026243, y: 408.1561174629066 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:27.999Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 770.645330884454, y: 427.8625609826685 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 770.645330884454, y: 427.8625609826685 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 770.645330884454, y: 427.8625609826685 },
  '마지막활동': '2025-09-08T06:55:28.005Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 770.645330884454, y: 427.8625609826685 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 770.645330884454, y: 427.8625609826685 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 770.645330884454, y: 427.8625609826685 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.017Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 772.9773689038028, y: 413.07531990543373 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 772.9773689038028, y: 413.07531990543373 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 772.9773689038028, y: 413.07531990543373 },
  '마지막활동': '2025-09-08T06:55:28.024Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 772.9773689038028, y: 413.07531990543373 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 772.9773689038028, y: 413.07531990543373 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 772.9773689038028, y: 413.07531990543373 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.035Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.864869262748, y: 432.811397174849 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.864869262748, y: 432.811397174849 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.864869262748, y: 432.811397174849 },
  '마지막활동': '2025-09-08T06:55:28.044Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.864869262748, y: 432.811397174849 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.864869262748, y: 432.811397174849 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.864869262748, y: 432.811397174849 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.052Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 772.201580704981, y: 417.994522347963 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 772.201580704981, y: 417.994522347963 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 772.201580704981, y: 417.994522347963 },
  '마지막활동': '2025-09-08T06:55:28.060Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 772.201580704981, y: 417.994522347963 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 772.201580704981, y: 417.994522347963 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 772.201580704981, y: 417.994522347963 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.070Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.0844076410422, y: 437.76023336702946 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.0844076410422, y: 437.76023336702946 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.0844076410422, y: 437.76023336702946 },
  '마지막활동': '2025-09-08T06:55:28.077Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.0844076410422, y: 437.76023336702946 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.0844076410422, y: 437.76023336702946 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.0844076410422, y: 437.76023336702946 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.090Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 770.6453308844532, y: 427.8625609826728 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 770.6453308844532, y: 427.8625609826728 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 770.6453308844532, y: 427.8625609826728 },
  '마지막활동': '2025-09-08T06:55:28.098Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 770.6453308844532, y: 427.8625609826728 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 770.6453308844532, y: 427.8625609826728 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 770.6453308844532, y: 427.8625609826728 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.111Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.3039460193362, y: 442.7090695592099 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.3039460193362, y: 442.7090695592099 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.3039460193362, y: 442.7090695592099 },
  '마지막활동': '2025-09-08T06:55:28.120Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.3039460193362, y: 442.7090695592099 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.3039460193362, y: 442.7090695592099 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.3039460193362, y: 442.7090695592099 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.132Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.8695426856317, y: 432.7817634251999 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.8695426856317, y: 432.7817634251999 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.8695426856317, y: 432.7817634251999 },
  '마지막활동': '2025-09-08T06:55:28.141Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.8695426856317, y: 432.7817634251999 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.8695426856317, y: 432.7817634251999 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.8695426856317, y: 432.7817634251999 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.154Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.52348439763, y: 447.65790575139255 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.52348439763, y: 447.65790575139255 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.52348439763, y: 447.65790575139255 },
  '마지막활동': '2025-09-08T06:55:28.165Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.52348439763, y: 447.65790575139255 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.52348439763, y: 447.65790575139255 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.52348439763, y: 447.65790575139255 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.178Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.0937544868102, y: 437.70096586772706 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.0937544868102, y: 437.70096586772706 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.0937544868102, y: 437.70096586772706 },
  '마지막활동': '2025-09-08T06:55:28.188Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.0937544868102, y: 437.70096586772706 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.0937544868102, y: 437.70096586772706 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.0937544868102, y: 437.70096586772706 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.200Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.743022775924, y: 452.606741943573 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.743022775924, y: 452.606741943573 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.743022775924, y: 452.606741943573 },
  '마지막활동': '2025-09-08T06:55:28.212Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.743022775924, y: 452.606741943573 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.743022775924, y: 452.606741943573 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.743022775924, y: 452.606741943573 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.221Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.5375046662824, y: 447.5690045024368 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.5375046662824, y: 447.5690045024368 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.5375046662824, y: 447.5690045024368 },
  '마지막활동': '2025-09-08T06:55:28.229Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.5375046662824, y: 447.5690045024368 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.5375046662824, y: 447.5690045024368 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.5375046662824, y: 447.5690045024368 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.241Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.9672345771025, y: 457.52594438610015 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.9672345771025, y: 457.52594438610015 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.9672345771025, y: 457.52594438610015 },
  '마지막활동': '2025-09-08T06:55:28.251Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.9672345771025, y: 457.52594438610015 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.9672345771025, y: 457.52594438610015 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.9672345771025, y: 457.52594438610015 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.263Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.9765814228703, y: 457.4666768868 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.9765814228703, y: 457.4666768868 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.9765814228703, y: 457.4666768868 },
  '마지막활동': '2025-09-08T06:55:28.274Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.9765814228703, y: 457.4666768868 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.9765814228703, y: 457.4666768868 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.9765814228703, y: 457.4666768868 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.284Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.1914463782811, y: 462.4451468286273 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.1914463782811, y: 462.4451468286273 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.1914463782811, y: 462.4451468286273 },
  '마지막활동': '2025-09-08T06:55:28.299Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.1914463782811, y: 462.4451468286273 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.1914463782811, y: 462.4451468286273 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.1914463782811, y: 462.4451468286273 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.310Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.1961198011644, y: 462.41551307898044 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.1961198011644, y: 462.41551307898044 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.1961198011644, y: 462.41551307898044 },
  '마지막활동': '2025-09-08T06:55:28.318Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.1961198011644, y: 462.41551307898044 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.1961198011644, y: 462.41551307898044 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.1961198011644, y: 462.41551307898044 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.329Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.4156581794592, y: 467.3643492711566 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.4156581794592, y: 467.3643492711566 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.4156581794592, y: 467.3643492711566 },
  '마지막활동': '2025-09-08T06:55:28.337Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.4156581794592, y: 467.3643492711566 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.4156581794592, y: 467.3643492711566 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.4156581794592, y: 467.3643492711566 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.348Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764, y: 470 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764, y: 470 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764, y: 470 },
  '마지막활동': '2025-09-08T06:55:28.356Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764, y: 470 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764, y: 470 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 764, y: 470 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.367Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764, y: 470 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764, y: 470 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764, y: 470 },
  '마지막활동': '2025-09-08T06:55:28.374Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764, y: 470 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764, y: 470 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 764, y: 470 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.799Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.0996325092856, y: 465.2010341360775 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.0996325092856, y: 465.2010341360775 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.0996325092856, y: 465.2010341360775 },
  '마지막활동': '2025-09-08T06:55:28.805Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.0996325092856, y: 465.2010341360775 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.0996325092856, y: 465.2010341360775 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.0996325092856, y: 465.2010341360775 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.812Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.1039914315669, y: 464.9910793795296 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.1039914315669, y: 464.9910793795296 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.1039914315669, y: 464.9910793795296 },
  '마지막활동': '2025-09-08T06:55:28.819Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.1039914315669, y: 464.9910793795296 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.1039914315669, y: 464.9910793795296 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.1039914315669, y: 464.9910793795296 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.824Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.2036239408524, y: 460.19211351560926 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.2036239408524, y: 460.19211351560926 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.2036239408524, y: 460.19211351560926 },
  '마지막활동': '2025-09-08T06:55:28.827Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.2036239408524, y: 460.19211351560926 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.2036239408524, y: 460.19211351560926 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.2036239408524, y: 460.19211351560926 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.857Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.41036139762, y: 450.23425934796876 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.41036139762, y: 450.23425934796876 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.41036139762, y: 450.23425934796876 },
  '마지막활동': '2025-09-08T06:55:28.858Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.41036139762, y: 450.23425934796876 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.41036139762, y: 450.23425934796876 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.41036139762, y: 450.23425934796876 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.895Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.6177215575706, y: 440.24641164368137 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.6177215575706, y: 440.24641164368137 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.6177215575706, y: 440.24641164368137 },
  '마지막활동': '2025-09-08T06:55:28.901Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.6177215575706, y: 440.24641164368137 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.6177215575706, y: 440.24641164368137 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.6177215575706, y: 440.24641164368137 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.903Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.5143528291869, y: 445.22533872749835 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.5143528291869, y: 445.22533872749835 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.5143528291869, y: 445.22533872749835 },
  '마지막활동': '2025-09-08T06:55:28.905Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.5143528291869, y: 445.22533872749835 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.5143528291869, y: 445.22533872749835 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.5143528291869, y: 445.22533872749835 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.938Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.6183442607537, y: 440.2164181070301 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.6183442607537, y: 440.2164181070301 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.6183442607537, y: 440.2164181070301 },
  '마지막활동': '2025-09-08T06:55:28.946Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.6183442607537, y: 440.2164181070301 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.6183442607537, y: 440.2164181070301 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.6183442607537, y: 440.2164181070301 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.952Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.6177215575707, y: 440.2464116436792 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.6177215575707, y: 440.2464116436792 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.6177215575707, y: 440.2464116436792 },
  '마지막활동': '2025-09-08T06:55:28.958Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.6177215575707, y: 440.2464116436792 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.6177215575707, y: 440.2464116436792 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.6177215575707, y: 440.2464116436792 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.966Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.7223356923206, y: 435.2074974865597 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.7223356923206, y: 435.2074974865597 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.7223356923206, y: 435.2074974865597 },
  '마지막활동': '2025-09-08T06:55:28.974Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.7223356923206, y: 435.2074974865597 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.7223356923206, y: 435.2074974865597 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.7223356923206, y: 435.2074974865597 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:28.984Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.7217129891375, y: 435.23749102321096 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.7217129891375, y: 435.23749102321096 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.7217129891375, y: 435.23749102321096 },
  '마지막활동': '2025-09-08T06:55:28.991Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.7217129891375, y: 435.23749102321096 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.7217129891375, y: 435.23749102321096 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.7217129891375, y: 435.23749102321096 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.003Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.8263271238874, y: 430.19857686609146 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.8263271238874, y: 430.19857686609146 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.8263271238874, y: 430.19857686609146 },
  '마지막활동': '2025-09-08T06:55:29.011Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.8263271238874, y: 430.19857686609146 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.8263271238874, y: 430.19857686609146 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.8263271238874, y: 430.19857686609146 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.023Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.8244590143382, y: 430.28855747604086 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.8244590143382, y: 430.28855747604086 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.8244590143382, y: 430.28855747604086 },
  '마지막활동': '2025-09-08T06:55:29.031Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.8244590143382, y: 430.28855747604086 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.8244590143382, y: 430.28855747604086 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.8244590143382, y: 430.28855747604086 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.041Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.9303185554543, y: 425.18965624562105 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.9303185554543, y: 425.18965624562105 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.9303185554543, y: 425.18965624562105 },
  '마지막활동': '2025-09-08T06:55:29.049Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.9303185554543, y: 425.18965624562105 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.9303185554543, y: 425.18965624562105 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.9303185554543, y: 425.18965624562105 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.058Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.927827742722, y: 425.3096303922217 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 764.927827742722, y: 425.3096303922217 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.927827742722, y: 425.3096303922217 },
  '마지막활동': '2025-09-08T06:55:29.065Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.927827742722, y: 425.3096303922217 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 764.927827742722, y: 425.3096303922217 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.927827742722, y: 425.3096303922217 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.074Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.0343099870211, y: 420.1807356251528 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.0343099870211, y: 420.1807356251528 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.0343099870211, y: 420.1807356251528 },
  '마지막활동': '2025-09-08T06:55:29.082Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.0343099870211, y: 420.1807356251528 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.0343099870211, y: 420.1807356251528 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.0343099870211, y: 420.1807356251528 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.092Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.0318191742889, y: 420.3007097717513 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.0318191742889, y: 420.3007097717513 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.0318191742889, y: 420.3007097717513 },
  '마지막활동': '2025-09-08T06:55:29.099Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.0318191742889, y: 420.3007097717513 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.0318191742889, y: 420.3007097717513 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.0318191742889, y: 420.3007097717513 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.111Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.1376787154048, y: 415.20180854133366 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.1376787154048, y: 415.20180854133366 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.1376787154048, y: 415.20180854133366 },
  '마지막활동': '2025-09-08T06:55:29.118Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.1376787154048, y: 415.20180854133366 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.1376787154048, y: 415.20180854133366 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.1376787154048, y: 415.20180854133366 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.128Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.1358106058557, y: 415.29178915128307 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.1358106058557, y: 415.29178915128307 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.1358106058557, y: 415.29178915128307 },
  '마지막활동': '2025-09-08T06:55:29.136Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.1358106058557, y: 415.29178915128307 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.1358106058557, y: 415.29178915128307 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.1358106058557, y: 415.29178915128307 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.145Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.2416701469717, y: 410.19288792086326 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.2416701469717, y: 410.19288792086326 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.2416701469717, y: 410.19288792086326 },
  '마지막활동': '2025-09-08T06:55:29.153Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.2416701469717, y: 410.19288792086326 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.2416701469717, y: 410.19288792086326 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.2416701469717, y: 410.19288792086326 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.162Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.2391793342395, y: 410.3128620674639 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.2391793342395, y: 410.3128620674639 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.2391793342395, y: 410.3128620674639 },
  '마지막활동': '2025-09-08T06:55:29.169Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.2391793342395, y: 410.3128620674639 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.2391793342395, y: 410.3128620674639 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.2391793342395, y: 410.3128620674639 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.179Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.3456615785385, y: 405.183967300395 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.3456615785385, y: 405.183967300395 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.3456615785385, y: 405.183967300395 },
  '마지막활동': '2025-09-08T06:55:29.187Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.3456615785385, y: 405.183967300395 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.3456615785385, y: 405.183967300395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.3456615785385, y: 405.183967300395 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.196Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.3425480626233, y: 405.33393498364256 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.3425480626233, y: 405.33393498364256 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.3425480626233, y: 405.33393498364256 },
  '마지막활동': '2025-09-08T06:55:29.204Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.3425480626233, y: 405.33393498364256 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.3425480626233, y: 405.33393498364256 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.3425480626233, y: 405.33393498364256 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.214Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.4496530101053, y: 400.17504667992677 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.4496530101053, y: 400.17504667992677 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.4496530101053, y: 400.17504667992677 },
  '마지막활동': '2025-09-08T06:55:29.223Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.4496530101053, y: 400.17504667992677 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.4496530101053, y: 400.17504667992677 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.4496530101053, y: 400.17504667992677 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.231Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.4459167910071, y: 400.3550078998234 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.4459167910071, y: 400.3550078998234 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.4459167910071, y: 400.3550078998234 },
  '마지막활동': '2025-09-08T06:55:29.239Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.4459167910071, y: 400.3550078998234 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.4459167910071, y: 400.3550078998234 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.4459167910071, y: 400.3550078998234 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.250Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.5536444416722, y: 395.16612605945636 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.5536444416722, y: 395.16612605945636 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.5536444416722, y: 395.16612605945636 },
  '마지막활동': '2025-09-08T06:55:29.266Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.5536444416722, y: 395.16612605945636 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.5536444416722, y: 395.16612605945636 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.5536444416722, y: 395.16612605945636 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.275Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.5492855193909, y: 395.3760808160043 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.5492855193909, y: 395.3760808160043 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.5492855193909, y: 395.3760808160043 },
  '마지막활동': '2025-09-08T06:55:29.282Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.5492855193909, y: 395.3760808160043 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.5492855193909, y: 395.3760808160043 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.5492855193909, y: 395.3760808160043 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.292Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.657635873239, y: 390.1572054389881 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.657635873239, y: 390.1572054389881 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.657635873239, y: 390.1572054389881 },
  '마지막활동': '2025-09-08T06:55:29.299Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.657635873239, y: 390.1572054389881 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.657635873239, y: 390.1572054389881 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.657635873239, y: 390.1572054389881 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.311Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.7566456793415, y: 385.38823311171467 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.7566456793415, y: 385.38823311171467 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.7566456793415, y: 385.38823311171467 },
  '마지막활동': '2025-09-08T06:55:29.319Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.7566456793415, y: 385.38823311171467 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.7566456793415, y: 385.38823311171467 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.7566456793415, y: 385.38823311171467 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.330Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.7610046016227, y: 385.17827835516897 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.7610046016227, y: 385.17827835516897 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.7610046016227, y: 385.17827835516897 },
  '마지막활동': '2025-09-08T06:55:29.338Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.7610046016227, y: 385.17827835516897 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.7610046016227, y: 385.17827835516897 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.7610046016227, y: 385.17827835516897 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.348Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.8606371109083, y: 380.3793124912464 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.8606371109083, y: 380.3793124912464 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.8606371109083, y: 380.3793124912464 },
  '마지막활동': '2025-09-08T06:55:29.355Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.8606371109083, y: 380.3793124912464 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.8606371109083, y: 380.3793124912464 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.8606371109083, y: 380.3793124912464 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.366Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.8649960331896, y: 380.16935773469856 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.8649960331896, y: 380.16935773469856 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.8649960331896, y: 380.16935773469856 },
  '마지막활동': '2025-09-08T06:55:29.373Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.8649960331896, y: 380.16935773469856 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.8649960331896, y: 380.16935773469856 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.8649960331896, y: 380.16935773469856 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.383Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.9640058392921, y: 375.4003854074273 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.9640058392921, y: 375.4003854074273 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.9640058392921, y: 375.4003854074273 },
  '마지막활동': '2025-09-08T06:55:29.389Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.9640058392921, y: 375.4003854074273 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.9640058392921, y: 375.4003854074273 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.9640058392921, y: 375.4003854074273 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.399Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.9683647615734, y: 375.1904306508794 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 765.9683647615734, y: 375.1904306508794 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.9683647615734, y: 375.1904306508794 },
  '마지막활동': '2025-09-08T06:55:29.405Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.9683647615734, y: 375.1904306508794 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 765.9683647615734, y: 375.1904306508794 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.9683647615734, y: 375.1904306508794 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.415Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.067997270859, y: 370.3914647869569 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.067997270859, y: 370.3914647869569 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.067997270859, y: 370.3914647869569 },
  '마지막활동': '2025-09-08T06:55:29.422Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.067997270859, y: 370.3914647869569 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.067997270859, y: 370.3914647869569 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.067997270859, y: 370.3914647869569 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.432Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.175724921524, y: 365.20258294659203 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.175724921524, y: 365.20258294659203 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.175724921524, y: 365.20258294659203 },
  '마지막활동': '2025-09-08T06:55:29.440Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.175724921524, y: 365.20258294659203 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.175724921524, y: 365.20258294659203 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.175724921524, y: 365.20258294659203 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.450Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.1713659992428, y: 365.41253770313773 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.1713659992428, y: 365.41253770313773 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.1713659992428, y: 365.41253770313773 },
  '마지막활동': '2025-09-08T06:55:29.458Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.1713659992428, y: 365.41253770313773 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.1713659992428, y: 365.41253770313773 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.1713659992428, y: 365.41253770313773 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.468Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.2797163530909, y: 360.1936623261216 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.2797163530909, y: 360.1936623261216 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.2797163530909, y: 360.1936623261216 },
  '마지막활동': '2025-09-08T06:55:29.477Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.2797163530909, y: 360.1936623261216 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.2797163530909, y: 360.1936623261216 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.2797163530909, y: 360.1936623261216 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.486Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.2753574308095, y: 360.4036170826695 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.2753574308095, y: 360.4036170826695 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.2753574308095, y: 360.4036170826695 },
  '마지막활동': '2025-09-08T06:55:29.493Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.2753574308095, y: 360.4036170826695 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.2753574308095, y: 360.4036170826695 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.2753574308095, y: 360.4036170826695 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.502Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.3830850814746, y: 355.2147352423025 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.3830850814746, y: 355.2147352423025 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.3830850814746, y: 355.2147352423025 },
  '마지막활동': '2025-09-08T06:55:29.510Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.3830850814746, y: 355.2147352423025 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.3830850814746, y: 355.2147352423025 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.3830850814746, y: 355.2147352423025 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.520Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.3793488623764, y: 355.3946964621991 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.3793488623764, y: 355.3946964621991 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.3793488623764, y: 355.3946964621991 },
  '마지막활동': '2025-09-08T06:55:29.527Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.3793488623764, y: 355.3946964621991 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.3793488623764, y: 355.3946964621991 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.3793488623764, y: 355.3946964621991 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.537Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.4870765130414, y: 350.20581462183424 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.4870765130414, y: 350.20581462183424 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.4870765130414, y: 350.20581462183424 },
  '마지막활동': '2025-09-08T06:55:29.543Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.4870765130414, y: 350.20581462183424 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.4870765130414, y: 350.20581462183424 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.4870765130414, y: 350.20581462183424 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.555Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.4827175907602, y: 350.41576937837993 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.4827175907602, y: 350.41576937837993 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.4827175907602, y: 350.41576937837993 },
  '마지막활동': '2025-09-08T06:55:29.561Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.4827175907602, y: 350.41576937837993 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.4827175907602, y: 350.41576937837993 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.4827175907602, y: 350.41576937837993 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.573Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.5910679446083, y: 345.19689400136383 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.5910679446083, y: 345.19689400136383 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.5910679446083, y: 345.19689400136383 },
  '마지막활동': '2025-09-08T06:55:29.580Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.5910679446083, y: 345.19689400136383 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.5910679446083, y: 345.19689400136383 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.5910679446083, y: 345.19689400136383 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.591Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.585463615961, y: 345.46683583120983 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.585463615961, y: 345.46683583120983 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.585463615961, y: 345.46683583120983 },
  '마지막활동': '2025-09-08T06:55:29.597Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.585463615961, y: 345.46683583120983 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.585463615961, y: 345.46683583120983 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.585463615961, y: 345.46683583120983 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.609Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.6950593761751, y: 340.1879733808956 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.6950593761751, y: 340.1879733808956 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.6950593761751, y: 340.1879733808956 },
  '마지막활동': '2025-09-08T06:55:29.617Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.6950593761751, y: 340.1879733808956 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.6950593761751, y: 340.1879733808956 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.6950593761751, y: 340.1879733808956 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.628Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.6894550475279, y: 340.45791521073943 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.6894550475279, y: 340.45791521073943 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.6894550475279, y: 340.45791521073943 },
  '마지막활동': '2025-09-08T06:55:29.635Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.6894550475279, y: 340.45791521073943 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.6894550475279, y: 340.45791521073943 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.6894550475279, y: 340.45791521073943 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.644Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.7984281045589, y: 335.20904629707644 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.7984281045589, y: 335.20904629707644 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.7984281045589, y: 335.20904629707644 },
  '마지막활동': '2025-09-08T06:55:29.659Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.7984281045589, y: 335.20904629707644 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.7984281045589, y: 335.20904629707644 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.7984281045589, y: 335.20904629707644 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.667Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.7934464790947, y: 335.4489945902712 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.7934464790947, y: 335.4489945902712 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.7934464790947, y: 335.4489945902712 },
  '마지막활동': '2025-09-08T06:55:29.675Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.7934464790947, y: 335.4489945902712 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.7934464790947, y: 335.4489945902712 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.7934464790947, y: 335.4489945902712 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.685Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.9024195361258, y: 330.20012567660604 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.9024195361258, y: 330.20012567660604 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.9024195361258, y: 330.20012567660604 },
  '마지막활동': '2025-09-08T06:55:29.693Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.9024195361258, y: 330.20012567660604 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.9024195361258, y: 330.20012567660604 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.9024195361258, y: 330.20012567660604 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.704Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.8968152074784, y: 330.47006750645204 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 766.8968152074784, y: 330.47006750645204 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.8968152074784, y: 330.47006750645204 },
  '마지막활동': '2025-09-08T06:55:29.711Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.8968152074784, y: 330.47006750645204 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 766.8968152074784, y: 330.47006750645204 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.8968152074784, y: 330.47006750645204 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.722Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.1097796960763, y: 320.21227797231865 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.1097796960763, y: 320.21227797231865 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.1097796960763, y: 320.21227797231865 },
  '마지막활동': '2025-09-08T06:55:29.729Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.1097796960763, y: 320.21227797231865 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.1097796960763, y: 320.21227797231865 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.1097796960763, y: 320.21227797231865 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.739Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.0001839358623, y: 325.4911404226307 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.0001839358623, y: 325.4911404226307 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.0001839358623, y: 325.4911404226307 },
  '마지막활동': '2025-09-08T06:55:29.746Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.0001839358623, y: 325.4911404226307 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.0001839358623, y: 325.4911404226307 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.0001839358623, y: 325.4911404226307 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.757Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.2137711276431, y: 315.2033573518504 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.2137711276431, y: 315.2033573518504 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.2137711276431, y: 315.2033573518504 },
  '마지막활동': '2025-09-08T06:55:29.763Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.2137711276431, y: 315.2033573518504 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.2137711276431, y: 315.2033573518504 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.2137711276431, y: 315.2033573518504 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.777Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.1041753674291, y: 320.48221980216243 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.1041753674291, y: 320.48221980216243 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.1041753674291, y: 320.48221980216243 },
  '마지막활동': '2025-09-08T06:55:29.785Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.1041753674291, y: 320.48221980216243 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.1041753674291, y: 320.48221980216243 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.1041753674291, y: 320.48221980216243 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.796Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.317139856027, y: 310.22443026802904 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.317139856027, y: 310.22443026802904 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.317139856027, y: 310.22443026802904 },
  '마지막활동': '2025-09-08T06:55:29.803Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.317139856027, y: 310.22443026802904 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.317139856027, y: 310.22443026802904 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.317139856027, y: 310.22443026802904 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.814Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.2081667989959, y: 315.4732991816942 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.2081667989959, y: 315.4732991816942 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.2081667989959, y: 315.4732991816942 },
  '마지막활동': '2025-09-08T06:55:29.821Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.2081667989959, y: 315.4732991816942 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.2081667989959, y: 315.4732991816942 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.2081667989959, y: 315.4732991816942 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.827Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.4205085844108, y: 305.2455031842099 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.4205085844108, y: 305.2455031842099 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.4205085844108, y: 305.2455031842099 },
  '마지막활동': '2025-09-08T06:55:29.832Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.4205085844108, y: 305.2455031842099 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.4205085844108, y: 305.2455031842099 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.4205085844108, y: 305.2455031842099 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.861Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.6278687443614, y: 295.2576554799203 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.6278687443614, y: 295.2576554799203 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.6278687443614, y: 295.2576554799203 },
  '마지막활동': '2025-09-08T06:55:29.868Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.6278687443614, y: 295.2576554799203 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.6278687443614, y: 295.2576554799203 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.6278687443614, y: 295.2576554799203 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.877Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.5245000159775, y: 300.23658256374165 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.5245000159775, y: 300.23658256374165 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.5245000159775, y: 300.23658256374165 },
  '마지막활동': '2025-09-08T06:55:29.885Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.5245000159775, y: 300.23658256374165 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.5245000159775, y: 300.23658256374165 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.5245000159775, y: 300.23658256374165 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.894Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.7312374727452, y: 290.27872839610114 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.7312374727452, y: 290.27872839610114 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.7312374727452, y: 290.27872839610114 },
  '마지막활동': '2025-09-08T06:55:29.901Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.7312374727452, y: 290.27872839610114 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.7312374727452, y: 290.27872839610114 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.7312374727452, y: 290.27872839610114 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.911Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.6284914475444, y: 295.22766194327124 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.6284914475444, y: 295.22766194327124 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.6284914475444, y: 295.22766194327124 },
  '마지막활동': '2025-09-08T06:55:29.918Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.6284914475444, y: 295.22766194327124 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.6284914475444, y: 295.22766194327124 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.6284914475444, y: 295.22766194327124 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.928Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.834606201129, y: 285.299801312282 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.834606201129, y: 285.299801312282 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.834606201129, y: 285.299801312282 },
  '마지막활동': '2025-09-08T06:55:29.934Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.834606201129, y: 285.299801312282 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.834606201129, y: 285.299801312282 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.834606201129, y: 285.299801312282 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.945Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.7324828791112, y: 290.218741322803 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.7324828791112, y: 290.218741322803 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.7324828791112, y: 290.218741322803 },
  '마지막활동': '2025-09-08T06:55:29.952Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.7324828791112, y: 290.218741322803 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.7324828791112, y: 290.218741322803 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.7324828791112, y: 290.218741322803 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.966Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.9385976326959, y: 280.2908806918116 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.9385976326959, y: 280.2908806918116 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.9385976326959, y: 280.2908806918116 },
  '마지막활동': '2025-09-08T06:55:29.973Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.9385976326959, y: 280.2908806918116 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.9385976326959, y: 280.2908806918116 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.9385976326959, y: 280.2908806918116 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:29.983Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.835851607495, y: 285.23981423898385 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.835851607495, y: 285.23981423898385 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.835851607495, y: 285.23981423898385 },
  '마지막활동': '2025-09-08T06:55:29.991Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.835851607495, y: 285.23981423898385 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.835851607495, y: 285.23981423898385 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.835851607495, y: 285.23981423898385 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.002Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.0425890642626, y: 275.28196007134335 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.0425890642626, y: 275.28196007134335 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.0425890642626, y: 275.28196007134335 },
  '마지막활동': '2025-09-08T06:55:30.008Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.0425890642626, y: 275.28196007134335 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.0425890642626, y: 275.28196007134335 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.0425890642626, y: 275.28196007134335 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.017Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.9392203358789, y: 280.2608871551625 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 767.9392203358789, y: 280.2608871551625 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.9392203358789, y: 280.2608871551625 },
  '마지막활동': '2025-09-08T06:55:30.023Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.9392203358789, y: 280.2608871551625 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 767.9392203358789, y: 280.2608871551625 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.9392203358789, y: 280.2608871551625 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.034Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.2499492242133, y: 265.29411236705596 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.2499492242133, y: 265.29411236705596 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.2499492242133, y: 265.29411236705596 },
  '마지막활동': '2025-09-08T06:55:30.046Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.2499492242133, y: 265.29411236705596 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.2499492242133, y: 265.29411236705596 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.2499492242133, y: 265.29411236705596 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.056Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.0425890642626, y: 275.28196007134335 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.0425890642626, y: 275.28196007134335 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.0425890642626, y: 275.28196007134335 },
  '마지막활동': '2025-09-08T06:55:30.063Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.0425890642626, y: 275.28196007134335 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.0425890642626, y: 275.28196007134335 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.0425890642626, y: 275.28196007134335 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.074Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.3545633589632, y: 260.25519820993645 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.3545633589632, y: 260.25519820993645 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.3545633589632, y: 260.25519820993645 },
  '마지막활동': '2025-09-08T06:55:30.081Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.3545633589632, y: 260.25519820993645 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.3545633589632, y: 260.25519820993645 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.3545633589632, y: 260.25519820993645 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.092Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.1453350894634, y: 270.33302652417325 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.1453350894634, y: 270.33302652417325 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.1453350894634, y: 270.33302652417325 },
  '마지막활동': '2025-09-08T06:55:30.099Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.1453350894634, y: 270.33302652417325 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.1453350894634, y: 270.33302652417325 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.1453350894634, y: 270.33302652417325 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.112Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.45855479053, y: 255.2462775894682 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.45855479053, y: 255.2462775894682 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.45855479053, y: 255.2462775894682 },
  '마지막활동': '2025-09-08T06:55:30.119Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.45855479053, y: 255.2462775894682 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.45855479053, y: 255.2462775894682 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.45855479053, y: 255.2462775894682 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.130Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.2493265210303, y: 265.32410590370284 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.2493265210303, y: 265.32410590370284 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.2493265210303, y: 265.32410590370284 },
  '마지막활동': '2025-09-08T06:55:30.136Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.2493265210303, y: 265.32410590370284 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.2493265210303, y: 265.32410590370284 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.2493265210303, y: 265.32410590370284 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.147Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.5619235189138, y: 250.26735050564903 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.5619235189138, y: 250.26735050564903 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.5619235189138, y: 250.26735050564903 },
  '마지막활동': '2025-09-08T06:55:30.155Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.5619235189138, y: 250.26735050564903 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.5619235189138, y: 250.26735050564903 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.5619235189138, y: 250.26735050564903 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.164Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.3526952494141, y: 260.3451788198837 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.3526952494141, y: 260.3451788198837 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.3526952494141, y: 260.3451788198837 },
  '마지막활동': '2025-09-08T06:55:30.172Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.3526952494141, y: 260.3451788198837 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.3526952494141, y: 260.3451788198837 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.3526952494141, y: 260.3451788198837 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.182Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.6659149504807, y: 245.2584298851786 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.6659149504807, y: 245.2584298851786 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.6659149504807, y: 245.2584298851786 },
  '마지막활동': '2025-09-08T06:55:30.188Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.6659149504807, y: 245.2584298851786 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.6659149504807, y: 245.2584298851786 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.6659149504807, y: 245.2584298851786 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.199Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.4560639777978, y: 255.36625173606453 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.4560639777978, y: 255.36625173606453 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.4560639777978, y: 255.36625173606453 },
  '마지막활동': '2025-09-08T06:55:30.206Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.4560639777978, y: 255.36625173606453 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.4560639777978, y: 255.36625173606453 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.4560639777978, y: 255.36625173606453 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.216Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.7699063820475, y: 240.24950926471035 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.7699063820475, y: 240.24950926471035 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.7699063820475, y: 240.24950926471035 },
  '마지막활동': '2025-09-08T06:55:30.224Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.7699063820475, y: 240.24950926471035 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.7699063820475, y: 240.24950926471035 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.7699063820475, y: 240.24950926471035 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.236Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.6634241377485, y: 245.37840403177495 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.6634241377485, y: 245.37840403177495 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.6634241377485, y: 245.37840403177495 },
  '마지막활동': '2025-09-08T06:55:30.243Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.6634241377485, y: 245.37840403177495 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.6634241377485, y: 245.37840403177495 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.6634241377485, y: 245.37840403177495 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.253Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.8738978136142, y: 235.2405886442421 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.8738978136142, y: 235.2405886442421 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.8738978136142, y: 235.2405886442421 },
  '마지막활동': '2025-09-08T06:55:30.260Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.8738978136142, y: 235.2405886442421 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.8738978136142, y: 235.2405886442421 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.8738978136142, y: 235.2405886442421 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.268Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.7667928661323, y: 240.39947694795578 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.7667928661323, y: 240.39947694795578 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.7667928661323, y: 240.39947694795578 },
  '마지막활동': '2025-09-08T06:55:30.275Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.7667928661323, y: 240.39947694795578 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.7667928661323, y: 240.39947694795578 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.7667928661323, y: 240.39947694795578 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.285Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.9778892451811, y: 230.23166802377168 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.9778892451811, y: 230.23166802377168 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.9778892451811, y: 230.23166802377168 },
  '마지막활동': '2025-09-08T06:55:30.292Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.9778892451811, y: 230.23166802377168 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.9778892451811, y: 230.23166802377168 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.9778892451811, y: 230.23166802377168 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.303Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.8707842976991, y: 235.39055632748753 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.8707842976991, y: 235.39055632748753 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.8707842976991, y: 235.39055632748753 },
  '마지막활동': '2025-09-08T06:55:30.310Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.8707842976991, y: 235.39055632748753 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.8707842976991, y: 235.39055632748753 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.8707842976991, y: 235.39055632748753 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.320Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.0812579735649, y: 225.2527409399525 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.0812579735649, y: 225.2527409399525 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.0812579735649, y: 225.2527409399525 },
  '마지막활동': '2025-09-08T06:55:30.328Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.0812579735649, y: 225.2527409399525 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.0812579735649, y: 225.2527409399525 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.0812579735649, y: 225.2527409399525 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.337Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.974775729266, y: 230.3816357070171 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 768.974775729266, y: 230.3816357070171 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.974775729266, y: 230.3816357070171 },
  '마지막활동': '2025-09-08T06:55:30.344Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.974775729266, y: 230.3816357070171 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 768.974775729266, y: 230.3816357070171 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.974775729266, y: 230.3816357070171 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.355Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.1840039987657, y: 220.30380739278243 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.1840039987657, y: 220.30380739278243 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.1840039987657, y: 220.30380739278243 },
  '마지막활동': '2025-09-08T06:55:30.361Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.1840039987657, y: 220.30380739278243 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.1840039987657, y: 220.30380739278243 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.1840039987657, y: 220.30380739278243 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.372Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.0787671608327, y: 225.37271508654885 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.0787671608327, y: 225.37271508654885 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.0787671608327, y: 225.37271508654885 },
  '마지막활동': '2025-09-08T06:55:30.379Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.0787671608327, y: 225.37271508654885 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.0787671608327, y: 225.37271508654885 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.0787671608327, y: 225.37271508654885 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.390Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.2879954303326, y: 215.294886772312 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.2879954303326, y: 215.294886772312 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.2879954303326, y: 215.294886772312 },
  '마지막활동': '2025-09-08T06:55:30.397Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.2879954303326, y: 215.294886772312 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.2879954303326, y: 215.294886772312 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.2879954303326, y: 215.294886772312 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.407Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.1821358892165, y: 220.39378800272968 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.1821358892165, y: 220.39378800272968 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.1821358892165, y: 220.39378800272968 },
  '마지막활동': '2025-09-08T06:55:30.414Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.1821358892165, y: 220.39378800272968 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.1821358892165, y: 220.39378800272968 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.1821358892165, y: 220.39378800272968 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.425Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.3919868618993, y: 210.28596615184375 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.3919868618993, y: 210.28596615184375 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.3919868618993, y: 210.28596615184375 },
  '마지막활동': '2025-09-08T06:55:30.438Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.3919868618993, y: 210.28596615184375 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.3919868618993, y: 210.28596615184375 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.3919868618993, y: 210.28596615184375 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.447Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.2855046176003, y: 215.4148609189105 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.2855046176003, y: 215.4148609189105 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.2855046176003, y: 215.4148609189105 },
  '마지막활동': '2025-09-08T06:55:30.454Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.2855046176003, y: 215.4148609189105 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.2855046176003, y: 215.4148609189105 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.2855046176003, y: 215.4148609189105 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.464Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.4959782934662, y: 205.27704553137332 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.4959782934662, y: 205.27704553137332 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.4959782934662, y: 205.27704553137332 },
  '마지막활동': '2025-09-08T06:55:30.472Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.4959782934662, y: 205.27704553137332 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.4959782934662, y: 205.27704553137332 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.4959782934662, y: 205.27704553137332 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.485Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.388873345984, y: 210.43593383509133 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.388873345984, y: 210.43593383509133 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.388873345984, y: 210.43593383509133 },
  '마지막활동': '2025-09-08T06:55:30.496Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.388873345984, y: 210.43593383509133 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.388873345984, y: 210.43593383509133 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.388873345984, y: 210.43593383509133 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.507Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.599969725033, y: 200.26812491090507 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.599969725033, y: 200.26812491090507 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.599969725033, y: 200.26812491090507 },
  '마지막활동': '2025-09-08T06:55:30.514Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.599969725033, y: 200.26812491090507 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.599969725033, y: 200.26812491090507 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.599969725033, y: 200.26812491090507 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.523Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.492864777551, y: 205.4270132146209 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.492864777551, y: 205.4270132146209 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.492864777551, y: 205.4270132146209 },
  '마지막활동': '2025-09-08T06:55:30.531Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.492864777551, y: 205.4270132146209 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.492864777551, y: 205.4270132146209 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.492864777551, y: 205.4270132146209 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.542Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.8067071818007, y: 190.31027074326676 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.8067071818007, y: 190.31027074326676 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.8067071818007, y: 190.31027074326676 },
  '마지막활동': '2025-09-08T06:55:30.549Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.8067071818007, y: 190.31027074326676 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.8067071818007, y: 190.31027074326676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.8067071818007, y: 190.31027074326676 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.559Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.5968562091178, y: 200.41809259415047 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.5968562091178, y: 200.41809259415047 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.5968562091178, y: 200.41809259415047 },
  '마지막활동': '2025-09-08T06:55:30.565Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.5968562091178, y: 200.41809259415047 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.5968562091178, y: 200.41809259415047 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.5968562091178, y: 200.41809259415047 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.575Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.9100759101844, y: 185.33134365944758 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.9100759101844, y: 185.33134365944758 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.9100759101844, y: 185.33134365944758 },
  '마지막활동': '2025-09-08T06:55:30.582Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.9100759101844, y: 185.33134365944758 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.9100759101844, y: 185.33134365944758 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.9100759101844, y: 185.33134365944758 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.593Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.7008476406847, y: 195.40917197368222 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 769.7008476406847, y: 195.40917197368222 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.7008476406847, y: 195.40917197368222 },
  '마지막활동': '2025-09-08T06:55:30.599Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.7008476406847, y: 195.40917197368222 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 769.7008476406847, y: 195.40917197368222 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.7008476406847, y: 195.40917197368222 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:30.614Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 770, y: 181 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 770, y: 181 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 770, y: 181 },
  '마지막활동': '2025-09-08T06:55:30.620Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 770, y: 181 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 770, y: 181 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 770, y: 181 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:33.237Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
2025-09-08T06:55:33.325Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T06:55:33.327Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T06:55:33.351Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:55:33.392Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:55:33.434Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T06:55:33.447Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:55:33.467Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T06:55:35.417Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.418Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.420Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:35.420Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.421Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.422Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.422Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:35.422Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
2025-09-08T06:55:35.436Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.535Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.537Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.537Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:35.538Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.539Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.541Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T06:55:35.541Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:35.542Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:55:35.547Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818, y: 331 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 퇴장 요청: test1
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T06:55:35.550Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 ← 프라이빗 영역 1756736942592 퇴장
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 0개 영역
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🧹 빈 프라이빗 영역 1756736942592 정리
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.796Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 814.200978667612, y: 328.066156630619 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 814.200978667612, y: 328.066156630619 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 814.200978667612, y: 328.066156630619 },
  '마지막활동': '2025-09-08T06:55:50.799Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 814.200978667612, y: 328.066156630619 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 814.200978667612, y: 328.066156630619 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 814.200978667612, y: 328.066156630619 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.810Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 810.2594940352374, y: 325.0222941348691 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 810.2594940352374, y: 325.0222941348691 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 810.2594940352374, y: 325.0222941348691 },
  '마지막활동': '2025-09-08T06:55:50.812Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 810.2594940352374, y: 325.0222941348691 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 810.2594940352374, y: 325.0222941348691 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 810.2594940352374, y: 325.0222941348691 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.826Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 806.2942655195131, y: 321.96009511804357 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 806.2942655195131, y: 321.96009511804357 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 806.2942655195131, y: 321.96009511804357 },
  '마지막활동': '2025-09-08T06:55:50.829Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 806.2942655195131, y: 321.96009511804357 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 806.2942655195131, y: 321.96009511804357 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 806.2942655195131, y: 321.96009511804357 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.843Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 802.3290370038995, y: 318.8978961013034 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 802.3290370038995, y: 318.8978961013034 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 802.3290370038995, y: 318.8978961013034 },
  '마지막활동': '2025-09-08T06:55:50.845Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 802.3290370038995, y: 318.8978961013034 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 802.3290370038995, y: 318.8978961013034 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 802.3290370038995, y: 318.8978961013034 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.860Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 798.3875523715249, y: 315.8540336055535 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 798.3875523715249, y: 315.8540336055535 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 798.3875523715249, y: 315.8540336055535 },
  '마지막활동': '2025-09-08T06:55:50.862Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 798.3875523715249, y: 315.8540336055535 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 798.3875523715249, y: 315.8540336055535 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.3875523715249, y: 315.8540336055535 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.877Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 794.4223238558006, y: 312.79183458872797 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 794.4223238558006, y: 312.79183458872797 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 794.4223238558006, y: 312.79183458872797 },
  '마지막활동': '2025-09-08T06:55:50.880Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 794.4223238558006, y: 312.79183458872797 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 794.4223238558006, y: 312.79183458872797 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 794.4223238558006, y: 312.79183458872797 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.893Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.480839223426, y: 309.7479720929781 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 790.480839223426, y: 309.7479720929781 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.480839223426, y: 309.7479720929781 },
  '마지막활동': '2025-09-08T06:55:50.895Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.480839223426, y: 309.7479720929781 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 790.480839223426, y: 309.7479720929781 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.480839223426, y: 309.7479720929781 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.909Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.5156107078124, y: 306.6857730762379 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 786.5156107078124, y: 306.6857730762379 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.5156107078124, y: 306.6857730762379 },
  '마지막활동': '2025-09-08T06:55:50.912Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.5156107078124, y: 306.6857730762379 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 786.5156107078124, y: 306.6857730762379 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.5156107078124, y: 306.6857730762379 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 782.5503821920881, y: 303.62357405941236 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 782.5503821920881, y: 303.62357405941236 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 782.5503821920881, y: 303.62357405941236 },
  '마지막활동': '2025-09-08T06:55:50.928Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 782.5503821920881, y: 303.62357405941236 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 782.5503821920881, y: 303.62357405941236 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 782.5503821920881, y: 303.62357405941236 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 778.5851536764745, y: 300.5613750426722 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 778.5851536764745, y: 300.5613750426722 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 778.5851536764745, y: 300.5613750426722 },
  '마지막활동': '2025-09-08T06:55:50.945Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 778.5851536764745, y: 300.5613750426722 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 778.5851536764745, y: 300.5613750426722 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 778.5851536764745, y: 300.5613750426722 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.959Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 774.6436690440999, y: 297.5175125469223 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 774.6436690440999, y: 297.5175125469223 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 774.6436690440999, y: 297.5175125469223 },
  '마지막활동': '2025-09-08T06:55:50.962Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 774.6436690440999, y: 297.5175125469223 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 774.6436690440999, y: 297.5175125469223 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 774.6436690440999, y: 297.5175125469223 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.977Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 770.6784405283756, y: 294.45531353009676 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 770.6784405283756, y: 294.45531353009676 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 770.6784405283756, y: 294.45531353009676 },
  '마지막활동': '2025-09-08T06:55:50.979Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 770.6784405283756, y: 294.45531353009676 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 770.6784405283756, y: 294.45531353009676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 770.6784405283756, y: 294.45531353009676 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:50.993Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.736955896001, y: 291.4114510343469 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 766.736955896001, y: 291.4114510343469 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.736955896001, y: 291.4114510343469 },
  '마지막활동': '2025-09-08T06:55:50.995Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.736955896001, y: 291.4114510343469 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 766.736955896001, y: 291.4114510343469 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.736955896001, y: 291.4114510343469 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.010Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 762.7717273803873, y: 288.3492520176067 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 762.7717273803873, y: 288.3492520176067 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 762.7717273803873, y: 288.3492520176067 },
  '마지막활동': '2025-09-08T06:55:51.012Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 762.7717273803873, y: 288.3492520176067 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 762.7717273803873, y: 288.3492520176067 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 762.7717273803873, y: 288.3492520176067 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.026Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 758.8064988646631, y: 285.28705300078116 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 758.8064988646631, y: 285.28705300078116 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 758.8064988646631, y: 285.28705300078116 },
  '마지막활동': '2025-09-08T06:55:51.029Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 758.8064988646631, y: 285.28705300078116 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 758.8064988646631, y: 285.28705300078116 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 758.8064988646631, y: 285.28705300078116 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.043Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 754.8650142322884, y: 282.2431905050313 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 754.8650142322884, y: 282.2431905050313 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 754.8650142322884, y: 282.2431905050313 },
  '마지막활동': '2025-09-08T06:55:51.045Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 754.8650142322884, y: 282.2431905050313 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 754.8650142322884, y: 282.2431905050313 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 754.8650142322884, y: 282.2431905050313 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.060Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 750.8997857166748, y: 279.1809914882911 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 750.8997857166748, y: 279.1809914882911 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 750.8997857166748, y: 279.1809914882911 },
  '마지막활동': '2025-09-08T06:55:51.062Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 750.8997857166748, y: 279.1809914882911 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 750.8997857166748, y: 279.1809914882911 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 750.8997857166748, y: 279.1809914882911 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.078Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 746.9583010843002, y: 276.13712899254125 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 746.9583010843002, y: 276.13712899254125 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 746.9583010843002, y: 276.13712899254125 },
  '마지막활동': '2025-09-08T06:55:51.080Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 746.9583010843002, y: 276.13712899254125 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 746.9583010843002, y: 276.13712899254125 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 746.9583010843002, y: 276.13712899254125 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.093Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 742.969328685337, y: 273.0565934547254 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 742.969328685337, y: 273.0565934547254 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 742.969328685337, y: 273.0565934547254 },
  '마지막활동': '2025-09-08T06:55:51.094Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 742.969328685337, y: 273.0565934547254 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 742.969328685337, y: 273.0565934547254 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 742.969328685337, y: 273.0565934547254 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.110Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 739.0278440529623, y: 270.0127309589755 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 739.0278440529623, y: 270.0127309589755 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 739.0278440529623, y: 270.0127309589755 },
  '마지막활동': '2025-09-08T06:55:51.113Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 739.0278440529623, y: 270.0127309589755 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 739.0278440529623, y: 270.0127309589755 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 739.0278440529623, y: 270.0127309589755 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.128Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 735.0863594205877, y: 266.96886846322565 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 735.0863594205877, y: 266.96886846322565 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 735.0863594205877, y: 266.96886846322565 },
  '마지막활동': '2025-09-08T06:55:51.130Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 735.0863594205877, y: 266.96886846322565 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 735.0863594205877, y: 266.96886846322565 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 735.0863594205877, y: 266.96886846322565 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.144Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 731.1211309048634, y: 263.9066694464001 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 731.1211309048634, y: 263.9066694464001 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 731.1211309048634, y: 263.9066694464001 },
  '마지막활동': '2025-09-08T06:55:51.146Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 731.1211309048634, y: 263.9066694464001 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 731.1211309048634, y: 263.9066694464001 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 731.1211309048634, y: 263.9066694464001 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.159Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 727.1559023892498, y: 260.8444704296599 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 727.1559023892498, y: 260.8444704296599 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 727.1559023892498, y: 260.8444704296599 },
  '마지막활동': '2025-09-08T06:55:51.162Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 727.1559023892498, y: 260.8444704296599 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 727.1559023892498, y: 260.8444704296599 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 727.1559023892498, y: 260.8444704296599 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.176Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 723.2144177568752, y: 257.80060793391004 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 723.2144177568752, y: 257.80060793391004 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 723.2144177568752, y: 257.80060793391004 },
  '마지막활동': '2025-09-08T06:55:51.178Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 723.2144177568752, y: 257.80060793391004 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 723.2144177568752, y: 257.80060793391004 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 723.2144177568752, y: 257.80060793391004 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.193Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 719.2491892411509, y: 254.73840891708446 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 719.2491892411509, y: 254.73840891708446 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 719.2491892411509, y: 254.73840891708446 },
  '마지막활동': '2025-09-08T06:55:51.194Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 719.2491892411509, y: 254.73840891708446 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 719.2491892411509, y: 254.73840891708446 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 719.2491892411509, y: 254.73840891708446 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:51.210Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 715.2839607255373, y: 251.67620990034428 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 715.2839607255373, y: 251.67620990034428 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 715.2839607255373, y: 251.67620990034428 },
  '마지막활동': '2025-09-08T06:55:51.211Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 715.2839607255373, y: 251.67620990034428 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 715.2839607255373, y: 251.67620990034428 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 715.2839607255373, y: 251.67620990034428 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.359Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 718.7110854101586, y: 248.31543374057713 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 718.7110854101586, y: 248.31543374057713 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 718.7110854101586, y: 248.31543374057713 },
  '마지막활동': '2025-09-08T06:55:52.361Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 718.7110854101586, y: 248.31543374057713 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 718.7110854101586, y: 248.31543374057713 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 718.7110854101586, y: 248.31543374057713 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.377Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 722.288146799772, y: 244.80762362378104 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 722.288146799772, y: 244.80762362378104 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 722.288146799772, y: 244.80762362378104 },
  '마지막활동': '2025-09-08T06:55:52.379Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 722.288146799772, y: 244.80762362378104 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 722.288146799772, y: 244.80762362378104 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 722.288146799772, y: 244.80762362378104 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.393Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 725.8652081893854, y: 241.29981350698495 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 725.8652081893854, y: 241.29981350698495 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 725.8652081893854, y: 241.29981350698495 },
  '마지막활동': '2025-09-08T06:55:52.395Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 725.8652081893854, y: 241.29981350698495 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 725.8652081893854, y: 241.29981350698495 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 725.8652081893854, y: 241.29981350698495 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.409Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 729.4208500496002, y: 237.81300824130477 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 729.4208500496002, y: 237.81300824130477 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 729.4208500496002, y: 237.81300824130477 },
  '마지막활동': '2025-09-08T06:55:52.411Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 729.4208500496002, y: 237.81300824130477 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 729.4208500496002, y: 237.81300824130477 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 729.4208500496002, y: 237.81300824130477 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.426Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 732.9979114392136, y: 234.30519812450868 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 732.9979114392136, y: 234.30519812450868 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 732.9979114392136, y: 234.30519812450868 },
  '마지막활동': '2025-09-08T06:55:52.428Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 732.9979114392136, y: 234.30519812450868 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 732.9979114392136, y: 234.30519812450868 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 732.9979114392136, y: 234.30519812450868 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.444Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 736.574972828827, y: 230.79738800771258 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 736.574972828827, y: 230.79738800771258 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 736.574972828827, y: 230.79738800771258 },
  '마지막활동': '2025-09-08T06:55:52.446Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 736.574972828827, y: 230.79738800771258 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 736.574972828827, y: 230.79738800771258 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 736.574972828827, y: 230.79738800771258 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.461Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 740.1520342183406, y: 227.28957789101432 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 740.1520342183406, y: 227.28957789101432 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 740.1520342183406, y: 227.28957789101432 },
  '마지막활동': '2025-09-08T06:55:52.463Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 740.1520342183406, y: 227.28957789101432 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 740.1520342183406, y: 227.28957789101432 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 740.1520342183406, y: 227.28957789101432 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.476Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 743.7076760786553, y: 223.80277262523634 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 743.7076760786553, y: 223.80277262523634 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 743.7076760786553, y: 223.80277262523634 },
  '마지막활동': '2025-09-08T06:55:52.479Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 743.7076760786553, y: 223.80277262523634 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 743.7076760786553, y: 223.80277262523634 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 743.7076760786553, y: 223.80277262523634 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.494Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 747.2633179389699, y: 220.31596735945837 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 747.2633179389699, y: 220.31596735945837 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 747.2633179389699, y: 220.31596735945837 },
  '마지막활동': '2025-09-08T06:55:52.496Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 747.2633179389699, y: 220.31596735945837 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 747.2633179389699, y: 220.31596735945837 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 747.2633179389699, y: 220.31596735945837 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.509Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 750.8403793284836, y: 216.80815724276007 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 750.8403793284836, y: 216.80815724276007 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 750.8403793284836, y: 216.80815724276007 },
  '마지막활동': '2025-09-08T06:55:52.512Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 750.8403793284836, y: 216.80815724276007 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 750.8403793284836, y: 216.80815724276007 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 750.8403793284836, y: 216.80815724276007 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.527Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 754.4174407180969, y: 213.30034712596398 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 754.4174407180969, y: 213.30034712596398 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 754.4174407180969, y: 213.30034712596398 },
  '마지막활동': '2025-09-08T06:55:52.529Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 754.4174407180969, y: 213.30034712596398 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 754.4174407180969, y: 213.30034712596398 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 754.4174407180969, y: 213.30034712596398 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.544Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 757.9945021077103, y: 209.7925370091679 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 757.9945021077103, y: 209.7925370091679 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 757.9945021077103, y: 209.7925370091679 },
  '마지막활동': '2025-09-08T06:55:52.546Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 757.9945021077103, y: 209.7925370091679 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 757.9945021077103, y: 209.7925370091679 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 757.9945021077103, y: 209.7925370091679 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.560Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 761.571563497224, y: 206.2847268924696 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 761.571563497224, y: 206.2847268924696 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 761.571563497224, y: 206.2847268924696 },
  '마지막활동': '2025-09-08T06:55:52.562Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 761.571563497224, y: 206.2847268924696 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 761.571563497224, y: 206.2847268924696 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 761.571563497224, y: 206.2847268924696 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.576Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 765.1272053575386, y: 202.79792162669162 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 765.1272053575386, y: 202.79792162669162 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 765.1272053575386, y: 202.79792162669162 },
  '마지막활동': '2025-09-08T06:55:52.578Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 765.1272053575386, y: 202.79792162669162 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 765.1272053575386, y: 202.79792162669162 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 765.1272053575386, y: 202.79792162669162 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.593Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 768.6828472178532, y: 199.31111636091362 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 768.6828472178532, y: 199.31111636091362 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 768.6828472178532, y: 199.31111636091362 },
  '마지막활동': '2025-09-08T06:55:52.595Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 768.6828472178532, y: 199.31111636091362 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 768.6828472178532, y: 199.31111636091362 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 768.6828472178532, y: 199.31111636091362 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.610Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 772.2599086073669, y: 195.80330624421532 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 772.2599086073669, y: 195.80330624421532 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 772.2599086073669, y: 195.80330624421532 },
  '마지막활동': '2025-09-08T06:55:52.612Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 772.2599086073669, y: 195.80330624421532 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 772.2599086073669, y: 195.80330624421532 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 772.2599086073669, y: 195.80330624421532 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.626Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 775.8583895262791, y: 192.2744912764011 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 775.8583895262791, y: 192.2744912764011 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 775.8583895262791, y: 192.2744912764011 },
  '마지막활동': '2025-09-08T06:55:52.628Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 775.8583895262791, y: 192.2744912764011 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 775.8583895262791, y: 192.2744912764011 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 775.8583895262791, y: 192.2744912764011 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.643Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.4140313865937, y: 188.78768601062313 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 779.4140313865937, y: 188.78768601062313 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.4140313865937, y: 188.78768601062313 },
  '마지막활동': '2025-09-08T06:55:52.645Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.4140313865937, y: 188.78768601062313 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 779.4140313865937, y: 188.78768601062313 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.4140313865937, y: 188.78768601062313 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.659Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 782.9696732468085, y: 185.30088074494296 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 782.9696732468085, y: 185.30088074494296 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 782.9696732468085, y: 185.30088074494296 },
  '마지막활동': '2025-09-08T06:55:52.661Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 782.9696732468085, y: 185.30088074494296 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 782.9696732468085, y: 185.30088074494296 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 782.9696732468085, y: 185.30088074494296 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.677Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.5467346364219, y: 181.79307062814686 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 786.5467346364219, y: 181.79307062814686 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.5467346364219, y: 181.79307062814686 },
  '마지막활동': '2025-09-08T06:55:52.679Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.5467346364219, y: 181.79307062814686 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 786.5467346364219, y: 181.79307062814686 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.5467346364219, y: 181.79307062814686 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.694Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.1023764967365, y: 178.30626536236886 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 790.1023764967365, y: 178.30626536236886 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.1023764967365, y: 178.30626536236886 },
  '마지막활동': '2025-09-08T06:55:52.696Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.1023764967365, y: 178.30626536236886 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 790.1023764967365, y: 178.30626536236886 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.1023764967365, y: 178.30626536236886 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.711Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.700857415549, y: 174.77745039465248 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 793.700857415549, y: 174.77745039465248 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.700857415549, y: 174.77745039465248 },
  '마지막활동': '2025-09-08T06:55:52.713Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.700857415549, y: 174.77745039465248 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 793.700857415549, y: 174.77745039465248 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.700857415549, y: 174.77745039465248 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.727Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.2564992758636, y: 171.29064512887447 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 797.2564992758636, y: 171.29064512887447 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.2564992758636, y: 171.29064512887447 },
  '마지막활동': '2025-09-08T06:55:52.729Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.2564992758636, y: 171.29064512887447 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 797.2564992758636, y: 171.29064512887447 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.2564992758636, y: 171.29064512887447 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.743Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 800.833560665477, y: 167.78283501207838 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 800.833560665477, y: 167.78283501207838 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 800.833560665477, y: 167.78283501207838 },
  '마지막활동': '2025-09-08T06:55:52.745Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 800.833560665477, y: 167.78283501207838 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 800.833560665477, y: 167.78283501207838 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 800.833560665477, y: 167.78283501207838 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.760Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 804.4106220549907, y: 164.27502489538008 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 804.4106220549907, y: 164.27502489538008 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 804.4106220549907, y: 164.27502489538008 },
  '마지막활동': '2025-09-08T06:55:52.762Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 804.4106220549907, y: 164.27502489538008 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 804.4106220549907, y: 164.27502489538008 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 804.4106220549907, y: 164.27502489538008 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.776Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 807.9662639153051, y: 160.78821962960208 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 807.9662639153051, y: 160.78821962960208 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 807.9662639153051, y: 160.78821962960208 },
  '마지막활동': '2025-09-08T06:55:52.779Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 807.9662639153051, y: 160.78821962960208 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 807.9662639153051, y: 160.78821962960208 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 807.9662639153051, y: 160.78821962960208 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.793Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 811.5433253049185, y: 157.280409512806 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 811.5433253049185, y: 157.280409512806 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 811.5433253049185, y: 157.280409512806 },
  '마지막활동': '2025-09-08T06:55:52.795Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 811.5433253049185, y: 157.280409512806 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 811.5433253049185, y: 157.280409512806 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 811.5433253049185, y: 157.280409512806 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.810Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 815.0989671651333, y: 153.7936042471258 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 815.0989671651333, y: 153.7936042471258 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 815.0989671651333, y: 153.7936042471258 },
  '마지막활동': '2025-09-08T06:55:52.812Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 815.0989671651333, y: 153.7936042471258 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 815.0989671651333, y: 153.7936042471258 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 815.0989671651333, y: 153.7936042471258 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.826Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818.6760285547467, y: 150.28579413032972 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818.6760285547467, y: 150.28579413032972 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818.6760285547467, y: 150.28579413032972 },
  '마지막활동': '2025-09-08T06:55:52.828Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818.6760285547467, y: 150.28579413032972 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818.6760285547467, y: 150.28579413032972 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 818.6760285547467, y: 150.28579413032972 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.843Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 822.2530899443601, y: 146.7779840135336 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 822.2530899443601, y: 146.7779840135336 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 822.2530899443601, y: 146.7779840135336 },
  '마지막활동': '2025-09-08T06:55:52.845Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 822.2530899443601, y: 146.7779840135336 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 822.2530899443601, y: 146.7779840135336 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 822.2530899443601, y: 146.7779840135336 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.859Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 825.8301513338738, y: 143.2701738968353 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 825.8301513338738, y: 143.2701738968353 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 825.8301513338738, y: 143.2701738968353 },
  '마지막활동': '2025-09-08T06:55:52.860Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 825.8301513338738, y: 143.2701738968353 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 825.8301513338738, y: 143.2701738968353 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 825.8301513338738, y: 143.2701738968353 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.876Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 829.3857931941883, y: 139.78336863105727 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 829.3857931941883, y: 139.78336863105727 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 829.3857931941883, y: 139.78336863105727 },
  '마지막활동': '2025-09-08T06:55:52.878Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 829.3857931941883, y: 139.78336863105727 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 829.3857931941883, y: 139.78336863105727 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 829.3857931941883, y: 139.78336863105727 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:52.893Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 830.1265089512877, y: 139.05699299938144 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 830.1265089512877, y: 139.05699299938144 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 830.1265089512877, y: 139.05699299938144 },
  '마지막활동': '2025-09-08T06:55:52.895Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 830.1265089512877, y: 139.05699299938144 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 830.1265089512877, y: 139.05699299938144 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 830.1265089512877, y: 139.05699299938144 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.743Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 825.7848452290375, y: 141.1039312307153 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 825.7848452290375, y: 141.1039312307153 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 825.7848452290375, y: 141.1039312307153 },
  '마지막활동': '2025-09-08T06:55:53.745Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 825.7848452290375, y: 141.1039312307153 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 825.7848452290375, y: 141.1039312307153 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 825.7848452290375, y: 141.1039312307153 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.760Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 821.280369117304, y: 143.2276296456765 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 821.280369117304, y: 143.2276296456765 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 821.280369117304, y: 143.2276296456765 },
  '마지막활동': '2025-09-08T06:55:53.761Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 821.280369117304, y: 143.2276296456765 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 821.280369117304, y: 143.2276296456765 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 821.280369117304, y: 143.2276296456765 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.776Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 816.7487576071547, y: 145.36412142465505 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 816.7487576071547, y: 145.36412142465505 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 816.7487576071547, y: 145.36412142465505 },
  '마지막활동': '2025-09-08T06:55:53.778Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 816.7487576071547, y: 145.36412142465505 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 816.7487576071547, y: 145.36412142465505 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 816.7487576071547, y: 145.36412142465505 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.793Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 812.2171460970055, y: 147.5006132036336 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 812.2171460970055, y: 147.5006132036336 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 812.2171460970055, y: 147.5006132036336 },
  '마지막활동': '2025-09-08T06:55:53.795Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 812.2171460970055, y: 147.5006132036336 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 812.2171460970055, y: 147.5006132036336 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 812.2171460970055, y: 147.5006132036336 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.809Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 807.712669985272, y: 149.62431161859482 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 807.712669985272, y: 149.62431161859482 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 807.712669985272, y: 149.62431161859482 },
  '마지막활동': '2025-09-08T06:55:53.812Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 807.712669985272, y: 149.62431161859482 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 807.712669985272, y: 149.62431161859482 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 807.712669985272, y: 149.62431161859482 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.827Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 803.1810584751228, y: 151.76080339757337 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 803.1810584751228, y: 151.76080339757337 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 803.1810584751228, y: 151.76080339757337 },
  '마지막활동': '2025-09-08T06:55:53.828Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 803.1810584751228, y: 151.76080339757337 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 803.1810584751228, y: 151.76080339757337 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.1810584751228, y: 151.76080339757337 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.843Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 798.6765823632629, y: 153.88450181259415 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 798.6765823632629, y: 153.88450181259415 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 798.6765823632629, y: 153.88450181259415 },
  '마지막활동': '2025-09-08T06:55:53.844Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 798.6765823632629, y: 153.88450181259415 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 798.6765823632629, y: 153.88450181259415 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.6765823632629, y: 153.88450181259415 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.860Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 794.14497085324, y: 156.02099359151313 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 794.14497085324, y: 156.02099359151313 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 794.14497085324, y: 156.02099359151313 },
  '마지막활동': '2025-09-08T06:55:53.862Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 794.14497085324, y: 156.02099359151313 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 794.14497085324, y: 156.02099359151313 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 794.14497085324, y: 156.02099359151313 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.877Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 789.6404947413802, y: 158.14469200653392 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 789.6404947413802, y: 158.14469200653392 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 789.6404947413802, y: 158.14469200653392 },
  '마지막활동': '2025-09-08T06:55:53.879Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 789.6404947413802, y: 158.14469200653392 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 789.6404947413802, y: 158.14469200653392 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 789.6404947413802, y: 158.14469200653392 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.893Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 785.108883231231, y: 160.28118378551247 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 785.108883231231, y: 160.28118378551247 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 785.108883231231, y: 160.28118378551247 },
  '마지막활동': '2025-09-08T06:55:53.895Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 785.108883231231, y: 160.28118378551247 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 785.108883231231, y: 160.28118378551247 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 785.108883231231, y: 160.28118378551247 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.910Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 780.577271721208, y: 162.41767556443145 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 780.577271721208, y: 162.41767556443145 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 780.577271721208, y: 162.41767556443145 },
  '마지막활동': '2025-09-08T06:55:53.912Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 780.577271721208, y: 162.41767556443145 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 780.577271721208, y: 162.41767556443145 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 780.577271721208, y: 162.41767556443145 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 776.0727956093482, y: 164.54137397945223 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 776.0727956093482, y: 164.54137397945223 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 776.0727956093482, y: 164.54137397945223 },
  '마지막활동': '2025-09-08T06:55:53.928Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 776.0727956093482, y: 164.54137397945223 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 776.0727956093482, y: 164.54137397945223 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 776.0727956093482, y: 164.54137397945223 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 771.541184099199, y: 166.67786575843078 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 771.541184099199, y: 166.67786575843078 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 771.541184099199, y: 166.67786575843078 },
  '마지막활동': '2025-09-08T06:55:53.945Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 771.541184099199, y: 166.67786575843078 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 771.541184099199, y: 166.67786575843078 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 771.541184099199, y: 166.67786575843078 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.959Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.0367079873391, y: 168.80156417345157 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 767.0367079873391, y: 168.80156417345157 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.0367079873391, y: 168.80156417345157 },
  '마지막활동': '2025-09-08T06:55:53.961Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.0367079873391, y: 168.80156417345157 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 767.0367079873391, y: 168.80156417345157 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.0367079873391, y: 168.80156417345157 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.976Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 762.5050964773162, y: 170.93805595237055 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 762.5050964773162, y: 170.93805595237055 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 762.5050964773162, y: 170.93805595237055 },
  '마지막활동': '2025-09-08T06:55:53.978Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 762.5050964773162, y: 170.93805595237055 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 762.5050964773162, y: 170.93805595237055 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 762.5050964773162, y: 170.93805595237055 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:53.992Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 757.973484967167, y: 173.0745477313491 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 757.973484967167, y: 173.0745477313491 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 757.973484967167, y: 173.0745477313491 },
  '마지막활동': '2025-09-08T06:55:53.994Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 757.973484967167, y: 173.0745477313491 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 757.973484967167, y: 173.0745477313491 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 757.973484967167, y: 173.0745477313491 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.009Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 753.3876026605654, y: 175.23662623818356 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 753.3876026605654, y: 175.23662623818356 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 753.3876026605654, y: 175.23662623818356 },
  '마지막활동': '2025-09-08T06:55:54.012Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 753.3876026605654, y: 175.23662623818356 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 753.3876026605654, y: 175.23662623818356 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 753.3876026605654, y: 175.23662623818356 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.027Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 748.8831265487056, y: 177.36032465320434 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 748.8831265487056, y: 177.36032465320434 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 748.8831265487056, y: 177.36032465320434 },
  '마지막활동': '2025-09-08T06:55:54.029Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 748.8831265487056, y: 177.36032465320434 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 748.8831265487056, y: 177.36032465320434 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 748.8831265487056, y: 177.36032465320434 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.044Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 744.3515150386827, y: 179.49681643212332 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 744.3515150386827, y: 179.49681643212332 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 744.3515150386827, y: 179.49681643212332 },
  '마지막활동': '2025-09-08T06:55:54.046Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 744.3515150386827, y: 179.49681643212332 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 744.3515150386827, y: 179.49681643212332 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 744.3515150386827, y: 179.49681643212332 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.060Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 739.8199035285335, y: 181.63330821110188 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 739.8199035285335, y: 181.63330821110188 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 739.8199035285335, y: 181.63330821110188 },
  '마지막활동': '2025-09-08T06:55:54.062Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 739.8199035285335, y: 181.63330821110188 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 739.8199035285335, y: 181.63330821110188 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 739.8199035285335, y: 181.63330821110188 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.077Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 735.2882920183843, y: 183.76979999008043 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 735.2882920183843, y: 183.76979999008043 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 735.2882920183843, y: 183.76979999008043 },
  '마지막활동': '2025-09-08T06:55:54.079Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 735.2882920183843, y: 183.76979999008043 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 735.2882920183843, y: 183.76979999008043 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 735.2882920183843, y: 183.76979999008043 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.094Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 730.7838159066507, y: 185.89349840504164 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 730.7838159066507, y: 185.89349840504164 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 730.7838159066507, y: 185.89349840504164 },
  '마지막활동': '2025-09-08T06:55:54.096Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 730.7838159066507, y: 185.89349840504164 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 730.7838159066507, y: 185.89349840504164 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 730.7838159066507, y: 185.89349840504164 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.109Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 726.2522043965015, y: 188.0299901840202 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 726.2522043965015, y: 188.0299901840202 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 726.2522043965015, y: 188.0299901840202 },
  '마지막활동': '2025-09-08T06:55:54.110Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 726.2522043965015, y: 188.0299901840202 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 726.2522043965015, y: 188.0299901840202 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 726.2522043965015, y: 188.0299901840202 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.126Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 721.7477282846417, y: 190.15368859904098 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 721.7477282846417, y: 190.15368859904098 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 721.7477282846417, y: 190.15368859904098 },
  '마지막활동': '2025-09-08T06:55:54.127Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 721.7477282846417, y: 190.15368859904098 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 721.7477282846417, y: 190.15368859904098 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 721.7477282846417, y: 190.15368859904098 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.143Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 717.2161167746187, y: 192.29018037795996 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 717.2161167746187, y: 192.29018037795996 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 717.2161167746187, y: 192.29018037795996 },
  '마지막활동': '2025-09-08T06:55:54.144Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 717.2161167746187, y: 192.29018037795996 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 717.2161167746187, y: 192.29018037795996 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 717.2161167746187, y: 192.29018037795996 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.161Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 712.6845052644695, y: 194.4266721569385 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 712.6845052644695, y: 194.4266721569385 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 712.6845052644695, y: 194.4266721569385 },
  '마지막활동': '2025-09-08T06:55:54.163Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 712.6845052644695, y: 194.4266721569385 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 712.6845052644695, y: 194.4266721569385 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 712.6845052644695, y: 194.4266721569385 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.178Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 708.1800291526097, y: 196.5503705719593 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 708.1800291526097, y: 196.5503705719593 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 708.1800291526097, y: 196.5503705719593 },
  '마지막활동': '2025-09-08T06:55:54.180Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 708.1800291526097, y: 196.5503705719593 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 708.1800291526097, y: 196.5503705719593 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 708.1800291526097, y: 196.5503705719593 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.194Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 703.6484176425868, y: 198.68686235087827 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 703.6484176425868, y: 198.68686235087827 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 703.6484176425868, y: 198.68686235087827 },
  '마지막활동': '2025-09-08T06:55:54.196Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 703.6484176425868, y: 198.68686235087827 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 703.6484176425868, y: 198.68686235087827 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 703.6484176425868, y: 198.68686235087827 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.211Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 699.1168061324375, y: 200.82335412985682 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 699.1168061324375, y: 200.82335412985682 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 699.1168061324375, y: 200.82335412985682 },
  '마지막활동': '2025-09-08T06:55:54.213Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 699.1168061324375, y: 200.82335412985682 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 699.1168061324375, y: 200.82335412985682 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 699.1168061324375, y: 200.82335412985682 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.227Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 694.6123300205777, y: 202.9470525448776 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 694.6123300205777, y: 202.9470525448776 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 694.6123300205777, y: 202.9470525448776 },
  '마지막활동': '2025-09-08T06:55:54.229Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 694.6123300205777, y: 202.9470525448776 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 694.6123300205777, y: 202.9470525448776 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 694.6123300205777, y: 202.9470525448776 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.244Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 690.0807185105548, y: 205.0835443237966 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 690.0807185105548, y: 205.0835443237966 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 690.0807185105548, y: 205.0835443237966 },
  '마지막활동': '2025-09-08T06:55:54.246Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 690.0807185105548, y: 205.0835443237966 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 690.0807185105548, y: 205.0835443237966 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 690.0807185105548, y: 205.0835443237966 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.259Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 685.5491070004056, y: 207.22003610277514 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 685.5491070004056, y: 207.22003610277514 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 685.5491070004056, y: 207.22003610277514 },
  '마지막활동': '2025-09-08T06:55:54.261Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 685.5491070004056, y: 207.22003610277514 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 685.5491070004056, y: 207.22003610277514 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 685.5491070004056, y: 207.22003610277514 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.277Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 681.0174954902564, y: 209.3565278817537 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 681.0174954902564, y: 209.3565278817537 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 681.0174954902564, y: 209.3565278817537 },
  '마지막활동': '2025-09-08T06:55:54.280Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 681.0174954902564, y: 209.3565278817537 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 681.0174954902564, y: 209.3565278817537 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 681.0174954902564, y: 209.3565278817537 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.294Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 676.4858839802334, y: 211.49301966067267 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 676.4858839802334, y: 211.49301966067267 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 676.4858839802334, y: 211.49301966067267 },
  '마지막활동': '2025-09-08T06:55:54.296Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 676.4858839802334, y: 211.49301966067267 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 676.4858839802334, y: 211.49301966067267 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 676.4858839802334, y: 211.49301966067267 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.310Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 671.9814078683736, y: 213.61671807569346 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 671.9814078683736, y: 213.61671807569346 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 671.9814078683736, y: 213.61671807569346 },
  '마지막활동': '2025-09-08T06:55:54.312Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 671.9814078683736, y: 213.61671807569346 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 671.9814078683736, y: 213.61671807569346 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 671.9814078683736, y: 213.61671807569346 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.326Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 667.4769317565137, y: 215.74041649071424 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 667.4769317565137, y: 215.74041649071424 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 667.4769317565137, y: 215.74041649071424 },
  '마지막활동': '2025-09-08T06:55:54.328Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 667.4769317565137, y: 215.74041649071424 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 667.4769317565137, y: 215.74041649071424 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 667.4769317565137, y: 215.74041649071424 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: whl19810312 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 667.4769317565137, y: 215.74041649071424 },
  '마지막활동': '2025-09-08T06:55:54.330Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 whl19810312 → 프라이빗 영역 1756736942592 입장 (참가자: 1명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에서 퇴장
사용자 whl19810312 (1)가 프라이빗 영역 1756736942592에 입장
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.344Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 662.9453202464908, y: 217.87690826963322 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 662.9453202464908, y: 217.87690826963322 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 662.9453202464908, y: 217.87690826963322 },
  '마지막활동': '2025-09-08T06:55:54.345Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 662.9453202464908, y: 217.87690826963322 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 662.9453202464908, y: 217.87690826963322 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 662.9453202464908, y: 217.87690826963322 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.359Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 658.4137087363416, y: 220.01340004861177 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 658.4137087363416, y: 220.01340004861177 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 658.4137087363416, y: 220.01340004861177 },
  '마지막활동': '2025-09-08T06:55:54.362Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 658.4137087363416, y: 220.01340004861177 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 658.4137087363416, y: 220.01340004861177 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 658.4137087363416, y: 220.01340004861177 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.376Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 653.9092326244818, y: 222.13709846363255 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 653.9092326244818, y: 222.13709846363255 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 653.9092326244818, y: 222.13709846363255 },
  '마지막활동': '2025-09-08T06:55:54.378Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 653.9092326244818, y: 222.13709846363255 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 653.9092326244818, y: 222.13709846363255 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 653.9092326244818, y: 222.13709846363255 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.394Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 649.3776211144589, y: 224.27359024255153 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 649.3776211144589, y: 224.27359024255153 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 649.3776211144589, y: 224.27359024255153 },
  '마지막활동': '2025-09-08T06:55:54.396Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 649.3776211144589, y: 224.27359024255153 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 649.3776211144589, y: 224.27359024255153 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 649.3776211144589, y: 224.27359024255153 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.409Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 644.8460096043096, y: 226.4100820215301 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 644.8460096043096, y: 226.4100820215301 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 644.8460096043096, y: 226.4100820215301 },
  '마지막활동': '2025-09-08T06:55:54.411Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 644.8460096043096, y: 226.4100820215301 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 644.8460096043096, y: 226.4100820215301 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 644.8460096043096, y: 226.4100820215301 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.426Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 640.3415334924498, y: 228.53378043655087 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 640.3415334924498, y: 228.53378043655087 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 640.3415334924498, y: 228.53378043655087 },
  '마지막활동': '2025-09-08T06:55:54.427Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 640.3415334924498, y: 228.53378043655087 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 640.3415334924498, y: 228.53378043655087 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 640.3415334924498, y: 228.53378043655087 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.443Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 635.8099219824269, y: 230.67027221546985 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 635.8099219824269, y: 230.67027221546985 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 635.8099219824269, y: 230.67027221546985 },
  '마지막활동': '2025-09-08T06:55:54.445Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 635.8099219824269, y: 230.67027221546985 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 635.8099219824269, y: 230.67027221546985 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 635.8099219824269, y: 230.67027221546985 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.460Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 631.305445870567, y: 232.79397063049063 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 631.305445870567, y: 232.79397063049063 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 631.305445870567, y: 232.79397063049063 },
  '마지막활동': '2025-09-08T06:55:54.462Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 631.305445870567, y: 232.79397063049063 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 631.305445870567, y: 232.79397063049063 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 631.305445870567, y: 232.79397063049063 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.477Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 626.7738343604178, y: 234.9304624094692 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 626.7738343604178, y: 234.9304624094692 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 626.7738343604178, y: 234.9304624094692 },
  '마지막활동': '2025-09-08T06:55:54.479Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 626.7738343604178, y: 234.9304624094692 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 626.7738343604178, y: 234.9304624094692 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 626.7738343604178, y: 234.9304624094692 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.493Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 622.2422228503949, y: 237.06695418838817 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 622.2422228503949, y: 237.06695418838817 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 622.2422228503949, y: 237.06695418838817 },
  '마지막활동': '2025-09-08T06:55:54.495Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 622.2422228503949, y: 237.06695418838817 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 622.2422228503949, y: 237.06695418838817 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 622.2422228503949, y: 237.06695418838817 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.509Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 617.7106113402457, y: 239.20344596736672 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 617.7106113402457, y: 239.20344596736672 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 617.7106113402457, y: 239.20344596736672 },
  '마지막활동': '2025-09-08T06:55:54.511Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 617.7106113402457, y: 239.20344596736672 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 617.7106113402457, y: 239.20344596736672 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 617.7106113402457, y: 239.20344596736672 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.526Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 613.2061352283858, y: 241.3271443823875 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 613.2061352283858, y: 241.3271443823875 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 613.2061352283858, y: 241.3271443823875 },
  '마지막활동': '2025-09-08T06:55:54.528Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 613.2061352283858, y: 241.3271443823875 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 613.2061352283858, y: 241.3271443823875 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 613.2061352283858, y: 241.3271443823875 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.543Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 608.6745237183629, y: 243.46363616130648 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 608.6745237183629, y: 243.46363616130648 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 608.6745237183629, y: 243.46363616130648 },
  '마지막활동': '2025-09-08T06:55:54.545Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 608.6745237183629, y: 243.46363616130648 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 608.6745237183629, y: 243.46363616130648 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 608.6745237183629, y: 243.46363616130648 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.559Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 604.1700476065031, y: 245.58733457632727 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 604.1700476065031, y: 245.58733457632727 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 604.1700476065031, y: 245.58733457632727 },
  '마지막활동': '2025-09-08T06:55:54.562Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 604.1700476065031, y: 245.58733457632727 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 604.1700476065031, y: 245.58733457632727 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 604.1700476065031, y: 245.58733457632727 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.576Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 599.6113006980645, y: 247.73661971926356 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 599.6113006980645, y: 247.73661971926356 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 599.6113006980645, y: 247.73661971926356 },
  '마지막활동': '2025-09-08T06:55:54.578Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 599.6113006980645, y: 247.73661971926356 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 599.6113006980645, y: 247.73661971926356 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 599.6113006980645, y: 247.73661971926356 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.594Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 595.106824586331, y: 249.86031813422477 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 595.106824586331, y: 249.86031813422477 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 595.106824586331, y: 249.86031813422477 },
  '마지막활동': '2025-09-08T06:55:54.596Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 595.106824586331, y: 249.86031813422477 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 595.106824586331, y: 249.86031813422477 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 595.106824586331, y: 249.86031813422477 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.610Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 590.5752130761817, y: 251.99680991320332 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 590.5752130761817, y: 251.99680991320332 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 590.5752130761817, y: 251.99680991320332 },
  '마지막활동': '2025-09-08T06:55:54.612Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 590.5752130761817, y: 251.99680991320332 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 590.5752130761817, y: 251.99680991320332 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 590.5752130761817, y: 251.99680991320332 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.627Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🔍 프라이빗 영역 1756736942592 변화 감지: 1명 → 1명 (user_updated)
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 586.0707369643219, y: 254.1205083282241 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 586.0707369643219, y: 254.1205083282241 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 586.0707369643219, y: 254.1205083282241 },
  '마지막활동': '2025-09-08T06:55:54.629Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 586.0707369643219, y: 254.1205083282241 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 586.0707369643219, y: 254.1205083282241 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 586.0707369643219, y: 254.1205083282241 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.643Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 581.539125454299, y: 256.2570001071431 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 581.539125454299, y: 256.2570001071431 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 581.539125454299, y: 256.2570001071431 },
  '마지막활동': '2025-09-08T06:55:54.645Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 581.539125454299, y: 256.2570001071431 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 581.539125454299, y: 256.2570001071431 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 581.539125454299, y: 256.2570001071431 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.659Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 577.0075139441498, y: 258.39349188612164 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 577.0075139441498, y: 258.39349188612164 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 577.0075139441498, y: 258.39349188612164 },
  '마지막활동': '2025-09-08T06:55:54.661Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 577.0075139441498, y: 258.39349188612164 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 577.0075139441498, y: 258.39349188612164 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 577.0075139441498, y: 258.39349188612164 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.676Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 572.4759024340005, y: 260.5299836651002 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 572.4759024340005, y: 260.5299836651002 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 572.4759024340005, y: 260.5299836651002 },
  '마지막활동': '2025-09-08T06:55:54.678Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 572.4759024340005, y: 260.5299836651002 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 572.4759024340005, y: 260.5299836651002 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 572.4759024340005, y: 260.5299836651002 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.693Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 567.99856172043, y: 262.6408887161632 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 567.99856172043, y: 262.6408887161632 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 567.99856172043, y: 262.6408887161632 },
  '마지막활동': '2025-09-08T06:55:54.695Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 567.99856172043, y: 262.6408887161632 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 567.99856172043, y: 262.6408887161632 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 567.99856172043, y: 262.6408887161632 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.709Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 563.4398148121178, y: 264.7901738590399 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 563.4398148121178, y: 264.7901738590399 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 563.4398148121178, y: 264.7901738590399 },
  '마지막활동': '2025-09-08T06:55:54.711Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 563.4398148121178, y: 264.7901738590399 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 563.4398148121178, y: 264.7901738590399 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 563.4398148121178, y: 264.7901738590399 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.726Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 558.935338700258, y: 266.9138722740607 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 558.935338700258, y: 266.9138722740607 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 558.935338700258, y: 266.9138722740607 },
  '마지막활동': '2025-09-08T06:55:54.728Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 558.935338700258, y: 266.9138722740607 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 558.935338700258, y: 266.9138722740607 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 558.935338700258, y: 266.9138722740607 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.743Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 554.403727190235, y: 269.05036405297966 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 554.403727190235, y: 269.05036405297966 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 554.403727190235, y: 269.05036405297966 },
  '마지막활동': '2025-09-08T06:55:54.745Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 554.403727190235, y: 269.05036405297966 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 554.403727190235, y: 269.05036405297966 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 554.403727190235, y: 269.05036405297966 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.759Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 549.8992510783752, y: 271.17406246800044 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 549.8992510783752, y: 271.17406246800044 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 549.8992510783752, y: 271.17406246800044 },
  '마지막활동': '2025-09-08T06:55:54.761Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 549.8992510783752, y: 271.17406246800044 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 549.8992510783752, y: 271.17406246800044 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 549.8992510783752, y: 271.17406246800044 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.777Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 545.367639568226, y: 273.310554246979 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 545.367639568226, y: 273.310554246979 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 545.367639568226, y: 273.310554246979 },
  '마지막활동': '2025-09-08T06:55:54.779Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 545.367639568226, y: 273.310554246979 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 545.367639568226, y: 273.310554246979 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 545.367639568226, y: 273.310554246979 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.794Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 540.836028058203, y: 275.447046025898 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 540.836028058203, y: 275.447046025898 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 540.836028058203, y: 275.447046025898 },
  '마지막활동': '2025-09-08T06:55:54.795Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 540.836028058203, y: 275.447046025898 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 540.836028058203, y: 275.447046025898 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 540.836028058203, y: 275.447046025898 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.810Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 536.3315519463432, y: 277.57074444091876 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 536.3315519463432, y: 277.57074444091876 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 536.3315519463432, y: 277.57074444091876 },
  '마지막활동': '2025-09-08T06:55:54.812Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 536.3315519463432, y: 277.57074444091876 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 536.3315519463432, y: 277.57074444091876 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 536.3315519463432, y: 277.57074444091876 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.827Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 531.7728050379046, y: 279.7200295838551 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 531.7728050379046, y: 279.7200295838551 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 531.7728050379046, y: 279.7200295838551 },
  '마지막활동': '2025-09-08T06:55:54.829Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 531.7728050379046, y: 279.7200295838551 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 531.7728050379046, y: 279.7200295838551 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 531.7728050379046, y: 279.7200295838551 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.842Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 527.2683289261711, y: 281.8437279988163 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 527.2683289261711, y: 281.8437279988163 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 527.2683289261711, y: 281.8437279988163 },
  '마지막활동': '2025-09-08T06:55:54.845Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 527.2683289261711, y: 281.8437279988163 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 527.2683289261711, y: 281.8437279988163 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 527.2683289261711, y: 281.8437279988163 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.860Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 522.7638528143112, y: 283.9674264138371 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 522.7638528143112, y: 283.9674264138371 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 522.7638528143112, y: 283.9674264138371 },
  '마지막활동': '2025-09-08T06:55:54.862Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 522.7638528143112, y: 283.9674264138371 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 522.7638528143112, y: 283.9674264138371 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 522.7638528143112, y: 283.9674264138371 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.877Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 518.2051059058726, y: 286.11671155677334 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 518.2051059058726, y: 286.11671155677334 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 518.2051059058726, y: 286.11671155677334 },
  '마지막활동': '2025-09-08T06:55:54.879Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 518.2051059058726, y: 286.11671155677334 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 518.2051059058726, y: 286.11671155677334 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 518.2051059058726, y: 286.11671155677334 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.893Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 513.7006297941391, y: 288.24040997173455 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 513.7006297941391, y: 288.24040997173455 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 513.7006297941391, y: 288.24040997173455 },
  '마지막활동': '2025-09-08T06:55:54.895Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 513.7006297941391, y: 288.24040997173455 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 513.7006297941391, y: 288.24040997173455 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 513.7006297941391, y: 288.24040997173455 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.910Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 509.1690182839899, y: 290.3769017507131 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 509.1690182839899, y: 290.3769017507131 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 509.1690182839899, y: 290.3769017507131 },
  '마지막활동': '2025-09-08T06:55:54.911Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 509.1690182839899, y: 290.3769017507131 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 509.1690182839899, y: 290.3769017507131 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 509.1690182839899, y: 290.3769017507131 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 504.63740677384067, y: 292.51339352969165 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 504.63740677384067, y: 292.51339352969165 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 504.63740677384067, y: 292.51339352969165 },
  '마지막활동': '2025-09-08T06:55:54.928Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 504.63740677384067, y: 292.51339352969165 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 504.63740677384067, y: 292.51339352969165 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 504.63740677384067, y: 292.51339352969165 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 500.1329306621071, y: 294.63709194465287 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 500.1329306621071, y: 294.63709194465287 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 500.1329306621071, y: 294.63709194465287 },
  '마지막활동': '2025-09-08T06:55:54.944Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 500.1329306621071, y: 294.63709194465287 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 500.1329306621071, y: 294.63709194465287 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 500.1329306621071, y: 294.63709194465287 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.959Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 495.6013191519579, y: 296.7735837236314 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 495.6013191519579, y: 296.7735837236314 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 495.6013191519579, y: 296.7735837236314 },
  '마지막활동': '2025-09-08T06:55:54.961Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 495.6013191519579, y: 296.7735837236314 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 495.6013191519579, y: 296.7735837236314 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 495.6013191519579, y: 296.7735837236314 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.977Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 491.096843040098, y: 298.8972821386522 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 491.096843040098, y: 298.8972821386522 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 491.096843040098, y: 298.8972821386522 },
  '마지막활동': '2025-09-08T06:55:54.979Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 491.096843040098, y: 298.8972821386522 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 491.096843040098, y: 298.8972821386522 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 491.096843040098, y: 298.8972821386522 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:54.994Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 486.56523153007515, y: 301.0337739175712 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 486.56523153007515, y: 301.0337739175712 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 486.56523153007515, y: 301.0337739175712 },
  '마지막활동': '2025-09-08T06:55:54.996Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 486.56523153007515, y: 301.0337739175712 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 486.56523153007515, y: 301.0337739175712 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 486.56523153007515, y: 301.0337739175712 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.011Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 482.03362001992593, y: 303.17026569654973 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 482.03362001992593, y: 303.17026569654973 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 482.03362001992593, y: 303.17026569654973 },
  '마지막활동': '2025-09-08T06:55:55.013Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 482.03362001992593, y: 303.17026569654973 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 482.03362001992593, y: 303.17026569654973 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 482.03362001992593, y: 303.17026569654973 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.027Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 477.5020085097767, y: 305.3067574755283 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 477.5020085097767, y: 305.3067574755283 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 477.5020085097767, y: 305.3067574755283 },
  '마지막활동': '2025-09-08T06:55:55.029Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 477.5020085097767, y: 305.3067574755283 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 477.5020085097767, y: 305.3067574755283 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 477.5020085097767, y: 305.3067574755283 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.043Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 472.9975323980432, y: 307.4304558904895 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 472.9975323980432, y: 307.4304558904895 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 472.9975323980432, y: 307.4304558904895 },
  '마지막활동': '2025-09-08T06:55:55.045Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 472.9975323980432, y: 307.4304558904895 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 472.9975323980432, y: 307.4304558904895 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 472.9975323980432, y: 307.4304558904895 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.060Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 468.46592088789396, y: 309.56694766946805 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 468.46592088789396, y: 309.56694766946805 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 468.46592088789396, y: 309.56694766946805 },
  '마지막활동': '2025-09-08T06:55:55.062Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 468.46592088789396, y: 309.56694766946805 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 468.46592088789396, y: 309.56694766946805 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 468.46592088789396, y: 309.56694766946805 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.077Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 463.93430937774474, y: 311.7034394484466 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 463.93430937774474, y: 311.7034394484466 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 463.93430937774474, y: 311.7034394484466 },
  '마지막활동': '2025-09-08T06:55:55.080Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 463.93430937774474, y: 311.7034394484466 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 463.93430937774474, y: 311.7034394484466 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 463.93430937774474, y: 311.7034394484466 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.094Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 459.4298332660112, y: 313.8271378634078 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 459.4298332660112, y: 313.8271378634078 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 459.4298332660112, y: 313.8271378634078 },
  '마지막활동': '2025-09-08T06:55:55.095Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 459.4298332660112, y: 313.8271378634078 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 459.4298332660112, y: 313.8271378634078 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 459.4298332660112, y: 313.8271378634078 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.110Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 454.898221755862, y: 315.96362964238637 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 454.898221755862, y: 315.96362964238637 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 454.898221755862, y: 315.96362964238637 },
  '마지막활동': '2025-09-08T06:55:55.112Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 454.898221755862, y: 315.96362964238637 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 454.898221755862, y: 315.96362964238637 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 454.898221755862, y: 315.96362964238637 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.126Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 450.3937456440021, y: 318.08732805740715 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 450.3937456440021, y: 318.08732805740715 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 450.3937456440021, y: 318.08732805740715 },
  '마지막활동': '2025-09-08T06:55:55.128Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 450.3937456440021, y: 318.08732805740715 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 450.3937456440021, y: 318.08732805740715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 450.3937456440021, y: 318.08732805740715 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.144Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 445.8621341339792, y: 320.22381983632613 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 445.8621341339792, y: 320.22381983632613 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 445.8621341339792, y: 320.22381983632613 },
  '마지막활동': '2025-09-08T06:55:55.145Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 445.8621341339792, y: 320.22381983632613 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 445.8621341339792, y: 320.22381983632613 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 445.8621341339792, y: 320.22381983632613 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.161Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 441.33052262383, y: 322.3603116153047 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 441.33052262383, y: 322.3603116153047 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 441.33052262383, y: 322.3603116153047 },
  '마지막활동': '2025-09-08T06:55:55.163Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 441.33052262383, y: 322.3603116153047 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 441.33052262383, y: 322.3603116153047 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 441.33052262383, y: 322.3603116153047 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.176Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 436.7989111136808, y: 324.49680339428323 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 436.7989111136808, y: 324.49680339428323 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 436.7989111136808, y: 324.49680339428323 },
  '마지막활동': '2025-09-08T06:55:55.178Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 436.7989111136808, y: 324.49680339428323 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 436.7989111136808, y: 324.49680339428323 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 436.7989111136808, y: 324.49680339428323 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.193Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 432.29443500194725, y: 326.62050180924444 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 432.29443500194725, y: 326.62050180924444 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 432.29443500194725, y: 326.62050180924444 },
  '마지막활동': '2025-09-08T06:55:55.195Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 432.29443500194725, y: 326.62050180924444 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 432.29443500194725, y: 326.62050180924444 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 432.29443500194725, y: 326.62050180924444 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.210Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 427.76282349179803, y: 328.756993588223 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 427.76282349179803, y: 328.756993588223 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 427.76282349179803, y: 328.756993588223 },
  '마지막활동': '2025-09-08T06:55:55.212Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 427.76282349179803, y: 328.756993588223 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 427.76282349179803, y: 328.756993588223 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 427.76282349179803, y: 328.756993588223 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.226Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 423.25834737993813, y: 330.8806920032438 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 423.25834737993813, y: 330.8806920032438 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 423.25834737993813, y: 330.8806920032438 },
  '마지막활동': '2025-09-08T06:55:55.228Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 423.25834737993813, y: 330.8806920032438 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 423.25834737993813, y: 330.8806920032438 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 423.25834737993813, y: 330.8806920032438 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.243Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 418.7267358699153, y: 333.01718378216276 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 418.7267358699153, y: 333.01718378216276 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 418.7267358699153, y: 333.01718378216276 },
  '마지막활동': '2025-09-08T06:55:55.245Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 418.7267358699153, y: 333.01718378216276 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 418.7267358699153, y: 333.01718378216276 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 418.7267358699153, y: 333.01718378216276 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.260Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 414.19512435976606, y: 335.1536755611413 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 414.19512435976606, y: 335.1536755611413 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 414.19512435976606, y: 335.1536755611413 },
  '마지막활동': '2025-09-08T06:55:55.262Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 414.19512435976606, y: 335.1536755611413 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 414.19512435976606, y: 335.1536755611413 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 414.19512435976606, y: 335.1536755611413 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.276Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 409.69064824790615, y: 337.2773739761621 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 409.69064824790615, y: 337.2773739761621 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 409.69064824790615, y: 337.2773739761621 },
  '마지막활동': '2025-09-08T06:55:55.278Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 409.69064824790615, y: 337.2773739761621 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 409.69064824790615, y: 337.2773739761621 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 409.69064824790615, y: 337.2773739761621 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.293Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 405.1590367378833, y: 339.4138657550811 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 405.1590367378833, y: 339.4138657550811 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 405.1590367378833, y: 339.4138657550811 },
  '마지막활동': '2025-09-08T06:55:55.295Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 405.1590367378833, y: 339.4138657550811 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 405.1590367378833, y: 339.4138657550811 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 405.1590367378833, y: 339.4138657550811 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.310Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 400.6274252277341, y: 341.55035753405963 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 400.6274252277341, y: 341.55035753405963 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 400.6274252277341, y: 341.55035753405963 },
  '마지막활동': '2025-09-08T06:55:55.312Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 400.6274252277341, y: 341.55035753405963 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 400.6274252277341, y: 341.55035753405963 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 400.6274252277341, y: 341.55035753405963 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.326Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 396.09581371758486, y: 343.6868493130381 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 396.09581371758486, y: 343.6868493130381 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 396.09581371758486, y: 343.6868493130381 },
  '마지막활동': '2025-09-08T06:55:55.328Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 396.09581371758486, y: 343.6868493130381 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 396.09581371758486, y: 343.6868493130381 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 396.09581371758486, y: 343.6868493130381 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.343Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 391.5913376058513, y: 345.81054772799934 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 391.5913376058513, y: 345.81054772799934 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 391.5913376058513, y: 345.81054772799934 },
  '마지막활동': '2025-09-08T06:55:55.345Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 391.5913376058513, y: 345.81054772799934 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 391.5913376058513, y: 345.81054772799934 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 391.5913376058513, y: 345.81054772799934 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.359Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 387.0597260957021, y: 347.94703950697783 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 387.0597260957021, y: 347.94703950697783 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 387.0597260957021, y: 347.94703950697783 },
  '마지막활동': '2025-09-08T06:55:55.362Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 387.0597260957021, y: 347.94703950697783 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 387.0597260957021, y: 347.94703950697783 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 387.0597260957021, y: 347.94703950697783 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.377Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 382.5281145855529, y: 350.0835312859563 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 382.5281145855529, y: 350.0835312859563 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 382.5281145855529, y: 350.0835312859563 },
  '마지막활동': '2025-09-08T06:55:55.379Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 382.5281145855529, y: 350.0835312859563 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 382.5281145855529, y: 350.0835312859563 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 382.5281145855529, y: 350.0835312859563 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.393Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 378.02363847381935, y: 352.20722970091754 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 378.02363847381935, y: 352.20722970091754 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 378.02363847381935, y: 352.20722970091754 },
  '마지막활동': '2025-09-08T06:55:55.395Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 378.02363847381935, y: 352.20722970091754 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 378.02363847381935, y: 352.20722970091754 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 378.02363847381935, y: 352.20722970091754 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.409Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 373.51916236195945, y: 354.3309281159383 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 373.51916236195945, y: 354.3309281159383 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 373.51916236195945, y: 354.3309281159383 },
  '마지막활동': '2025-09-08T06:55:55.412Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 373.51916236195945, y: 354.3309281159383 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 373.51916236195945, y: 354.3309281159383 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 373.51916236195945, y: 354.3309281159383 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.426Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 368.98755085181017, y: 356.4674198949168 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 368.98755085181017, y: 356.4674198949168 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 368.98755085181017, y: 356.4674198949168 },
  '마지막활동': '2025-09-08T06:55:55.428Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 368.98755085181017, y: 356.4674198949168 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 368.98755085181017, y: 356.4674198949168 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 368.98755085181017, y: 356.4674198949168 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.443Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 364.4559393417873, y: 358.6039116738358 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 364.4559393417873, y: 358.6039116738358 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 364.4559393417873, y: 358.6039116738358 },
  '마지막활동': '2025-09-08T06:55:55.445Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 364.4559393417873, y: 358.6039116738358 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 364.4559393417873, y: 358.6039116738358 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 364.4559393417873, y: 358.6039116738358 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:55.459Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 363.9807274611299, y: 358.8279569773715 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 363.9807274611299, y: 358.8279569773715 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 363.9807274611299, y: 358.8279569773715 },
  '마지막활동': '2025-09-08T06:55:55.461Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 363.9807274611299, y: 358.8279569773715 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 363.9807274611299, y: 358.8279569773715 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🔍 프라이빗 영역 1756736942592 변화 감지: 1명 → 1명 (user_updated)
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:58.851Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 803.2218088731114, y: 191.4570443686589 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 803.2218088731114, y: 191.4570443686589 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 803.2218088731114, y: 191.4570443686589 },
  '마지막활동': '2025-09-08T06:55:58.861Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 803.2218088731114, y: 191.4570443686589 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 803.2218088731114, y: 191.4570443686589 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.2218088731114, y: 191.4570443686589 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:58.865Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 798.0852534117026, y: 191.94836706496758 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 798.0852534117026, y: 191.94836706496758 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 798.0852534117026, y: 191.94836706496758 },
  '마지막활동': '2025-09-08T06:55:58.866Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 798.0852534117026, y: 191.94836706496758 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 798.0852534117026, y: 191.94836706496758 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 798.0852534117026, y: 191.94836706496758 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:58.922Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.0980164230135, y: 192.42540712475525 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 793.0980164230135, y: 192.42540712475525 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.0980164230135, y: 192.42540712475525 },
  '마지막활동': '2025-09-08T06:55:58.925Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.0980164230135, y: 192.42540712475525 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 793.0980164230135, y: 192.42540712475525 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.0980164230135, y: 192.42540712475525 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.014Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 773.2087958573379, y: 194.32785430929815 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 773.2087958573379, y: 194.32785430929815 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 773.2087958573379, y: 194.32785430929815 },
  '마지막활동': '2025-09-08T06:55:59.024Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 773.2087958573379, y: 194.32785430929815 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 773.2087958573379, y: 194.32785430929815 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 773.2087958573379, y: 194.32785430929815 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.027Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 788.1107794343244, y: 192.90244718454292 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 788.1107794343244, y: 192.90244718454292 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 788.1107794343244, y: 192.90244718454292 },
  '마지막활동': '2025-09-08T06:55:59.028Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 788.1107794343244, y: 192.90244718454292 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 788.1107794343244, y: 192.90244718454292 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 788.1107794343244, y: 192.90244718454292 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.128Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 758.2769485858109, y: 195.75611796135726 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 758.2769485858109, y: 195.75611796135726 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 758.2769485858109, y: 195.75611796135726 },
  '마지막활동': '2025-09-08T06:55:59.137Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 758.2769485858109, y: 195.75611796135726 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 758.2769485858109, y: 195.75611796135726 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 758.2769485858109, y: 195.75611796135726 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.152Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.1235424456353, y: 193.3794872443306 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 783.1235424456353, y: 193.3794872443306 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.1235424456353, y: 193.3794872443306 },
  '마지막활동': '2025-09-08T06:55:59.159Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.1235424456353, y: 193.3794872443306 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 783.1235424456353, y: 193.3794872443306 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.1235424456353, y: 193.3794872443306 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.169Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 753.2897115971218, y: 196.23315802114493 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 753.2897115971218, y: 196.23315802114493 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 753.2897115971218, y: 196.23315802114493 },
  '마지막활동': '2025-09-08T06:55:59.178Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 753.2897115971218, y: 196.23315802114493 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 753.2897115971218, y: 196.23315802114493 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 753.2897115971218, y: 196.23315802114493 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.223Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 743.3749650088288, y: 197.1815250861121 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 743.3749650088288, y: 197.1815250861121 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 743.3749650088288, y: 197.1815250861121 },
  '마지막활동': '2025-09-08T06:55:59.232Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 743.3749650088288, y: 197.1815250861121 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 743.3749650088288, y: 197.1815250861121 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 743.3749650088288, y: 197.1815250861121 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.236Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 743.345101314284, y: 197.18438161341638 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 743.345101314284, y: 197.18438161341638 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 743.345101314284, y: 197.18438161341638 },
  '마지막활동': '2025-09-08T06:55:59.237Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 743.345101314284, y: 197.18438161341638 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 743.345101314284, y: 197.18438161341638 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 743.345101314284, y: 197.18438161341638 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.277Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 728.4431177373018, y: 198.60978873817118 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 728.4431177373018, y: 198.60978873817118 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 728.4431177373018, y: 198.60978873817118 },
  '마지막활동': '2025-09-08T06:55:59.286Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 728.4431177373018, y: 198.60978873817118 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 728.4431177373018, y: 198.60978873817118 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 728.4431177373018, y: 198.60978873817118 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.295Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 738.3578643255905, y: 197.66142167320444 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 738.3578643255905, y: 197.66142167320444 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 738.3578643255905, y: 197.66142167320444 },
  '마지막활동': '2025-09-08T06:55:59.303Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 738.3578643255905, y: 197.66142167320444 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 738.3578643255905, y: 197.66142167320444 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 738.3578643255905, y: 197.66142167320444 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.332Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 728.4431177372975, y: 198.6097887381716 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 728.4431177372975, y: 198.6097887381716 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 728.4431177372975, y: 198.6097887381716 },
  '마지막활동': '2025-09-08T06:55:59.342Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 728.4431177372975, y: 198.6097887381716 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 728.4431177372975, y: 198.6097887381716 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 728.4431177372975, y: 198.6097887381716 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.354Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 733.3706273369014, y: 198.1384617329921 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 733.3706273369014, y: 198.1384617329921 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 733.3706273369014, y: 198.1384617329921 },
  '마지막활동': '2025-09-08T06:55:59.364Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 733.3706273369014, y: 198.1384617329921 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 733.3706273369014, y: 198.1384617329921 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 733.3706273369014, y: 198.1384617329921 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.373Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 723.4558807486084, y: 199.08682879795927 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 723.4558807486084, y: 199.08682879795927 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 723.4558807486084, y: 199.08682879795927 },
  '마지막활동': '2025-09-08T06:55:59.383Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 723.4558807486084, y: 199.08682879795927 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 723.4558807486084, y: 199.08682879795927 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 723.4558807486084, y: 199.08682879795927 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.399Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 728.3833903482123, y: 198.61550179277978 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 728.3833903482123, y: 198.61550179277978 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 728.3833903482123, y: 198.61550179277978 },
  '마지막활동': '2025-09-08T06:55:59.409Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 728.3833903482123, y: 198.61550179277978 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 728.3833903482123, y: 198.61550179277978 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 728.3833903482123, y: 198.61550179277978 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.417Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 718.4985074544596, y: 199.56101233044305 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 718.4985074544596, y: 199.56101233044305 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 718.4985074544596, y: 199.56101233044305 },
  '마지막활동': '2025-09-08T06:55:59.427Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 718.4985074544596, y: 199.56101233044305 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 718.4985074544596, y: 199.56101233044305 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 718.4985074544596, y: 199.56101233044305 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.468Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 703.5666601829327, y: 200.98927598250214 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 703.5666601829327, y: 200.98927598250214 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 703.5666601829327, y: 200.98927598250214 },
  '마지막활동': '2025-09-08T06:55:59.481Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 703.5666601829327, y: 200.98927598250214 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 703.5666601829327, y: 200.98927598250214 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 703.5666601829327, y: 200.98927598250214 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.488Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 713.5411341603109, y: 200.03519586292683 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 713.5411341603109, y: 200.03519586292683 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 713.5411341603109, y: 200.03519586292683 },
  '마지막활동': '2025-09-08T06:55:59.497Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 713.5411341603109, y: 200.03519586292683 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 713.5411341603109, y: 200.03519586292683 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 713.5411341603109, y: 200.03519586292683 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.510Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 693.5921862055544, y: 201.94335610207744 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 693.5921862055544, y: 201.94335610207744 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 693.5921862055544, y: 201.94335610207744 },
  '마지막활동': '2025-09-08T06:55:59.521Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 693.5921862055544, y: 201.94335610207744 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 693.5921862055544, y: 201.94335610207744 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 693.5921862055544, y: 201.94335610207744 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.536Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 708.5837608661622, y: 200.5093793954106 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 708.5837608661622, y: 200.5093793954106 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 708.5837608661622, y: 200.5093793954106 },
  '마지막활동': '2025-09-08T06:55:59.547Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 708.5837608661622, y: 200.5093793954106 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 708.5837608661622, y: 200.5093793954106 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 708.5837608661622, y: 200.5093793954106 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.562Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 688.6348129114101, y: 202.41753963456082 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 688.6348129114101, y: 202.41753963456082 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 688.6348129114101, y: 202.41753963456082 },
  '마지막활동': '2025-09-08T06:55:59.573Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 688.6348129114101, y: 202.41753963456082 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 688.6348129114101, y: 202.41753963456082 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 688.6348129114101, y: 202.41753963456082 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.586Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 698.6391505833243, y: 201.46060298768205 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 698.6391505833243, y: 201.46060298768205 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 698.6391505833243, y: 201.46060298768205 },
  '마지막활동': '2025-09-08T06:55:59.597Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 698.6391505833243, y: 201.46060298768205 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 698.6391505833243, y: 201.46060298768205 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 698.6391505833243, y: 201.46060298768205 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.613Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 683.6774396172614, y: 202.8917231670446 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 683.6774396172614, y: 202.8917231670446 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 683.6774396172614, y: 202.8917231670446 },
  '마지막활동': '2025-09-08T06:55:59.630Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 683.6774396172614, y: 202.8917231670446 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 683.6774396172614, y: 202.8917231670446 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 683.6774396172614, y: 202.8917231670446 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.648Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 688.664676605946, y: 202.41468310725736 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 688.664676605946, y: 202.41468310725736 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 688.664676605946, y: 202.41468310725736 },
  '마지막활동': '2025-09-08T06:55:59.660Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 688.664676605946, y: 202.41468310725736 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 688.664676605946, y: 202.41468310725736 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 688.664676605946, y: 202.41468310725736 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.677Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 678.7200663231126, y: 203.36590669952838 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 678.7200663231126, y: 203.36590669952838 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 678.7200663231126, y: 203.36590669952838 },
  '마지막활동': '2025-09-08T06:55:59.687Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 678.7200663231126, y: 203.36590669952838 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 678.7200663231126, y: 203.36590669952838 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 678.7200663231126, y: 203.36590669952838 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.704Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 673.7626930289639, y: 203.8400902320122 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 673.7626930289639, y: 203.8400902320122 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 673.7626930289639, y: 203.8400902320122 },
  '마지막활동': '2025-09-08T06:55:59.715Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 673.7626930289639, y: 203.8400902320122 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 673.7626930289639, y: 203.8400902320122 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 673.7626930289639, y: 203.8400902320122 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.732Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 673.7328293344235, y: 203.84294675931605 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 673.7328293344235, y: 203.84294675931605 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 673.7328293344235, y: 203.84294675931605 },
  '마지막활동': '2025-09-08T06:55:59.746Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 673.7328293344235, y: 203.84294675931605 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 673.7328293344235, y: 203.84294675931605 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 673.7328293344235, y: 203.84294675931605 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.753Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 663.818082746126, y: 204.79131382428363 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 663.818082746126, y: 204.79131382428363 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 663.818082746126, y: 204.79131382428363 },
  '마지막활동': '2025-09-08T06:55:59.765Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 663.818082746126, y: 204.79131382428363 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 663.818082746126, y: 204.79131382428363 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 663.818082746126, y: 204.79131382428363 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🎬 프라이빗 영역 입장 요청: test1 → 영역 1756736942592
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '프라이빗 영역 1756736942592',
  privateAreaId: 1756736942592,
  '캐릭터': undefined,
  '위치': { x: 663.818082746126, y: 204.79131382428363 },
  '마지막활동': '2025-09-08T06:55:59.766Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 test1 → 프라이빗 영역 1756736942592 입장 (참가자: 2명)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
🎬 프라이빗 영역 상태 브로드캐스트 - 맵 3: 1개 영역
사용자 test1 (2)가 프라이빗 영역 1756736942592에서 퇴장
사용자 test1 (2)가 프라이빗 영역 1756736942592에 입장
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.781Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 663.7882190515857, y: 204.7941703515875 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 663.7882190515857, y: 204.7941703515875 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 663.7882190515857, y: 204.7941703515875 },
  '마지막활동': '2025-09-08T06:55:59.790Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 663.7882190515857, y: 204.7941703515875 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 663.7882190515857, y: 204.7941703515875 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 663.7882190515857, y: 204.7941703515875 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.812Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 658.8308457574369, y: 205.2683538840713 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 658.8308457574369, y: 205.2683538840713 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 658.8308457574369, y: 205.2683538840713 },
  '마지막활동': '2025-09-08T06:55:59.820Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 658.8308457574369, y: 205.2683538840713 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 658.8308457574369, y: 205.2683538840713 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 658.8308457574369, y: 205.2683538840713 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.873Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 653.8436087687478, y: 205.74539394385894 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 653.8436087687478, y: 205.74539394385894 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 653.8436087687478, y: 205.74539394385894 },
  '마지막활동': '2025-09-08T06:55:59.874Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 653.8436087687478, y: 205.74539394385894 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 653.8436087687478, y: 205.74539394385894 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 653.8436087687478, y: 205.74539394385894 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.960Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 638.9117614972208, y: 207.17365759591803 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 638.9117614972208, y: 207.17365759591803 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 638.9117614972208, y: 207.17365759591803 },
  '마지막활동': '2025-09-08T06:55:59.977Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 638.9117614972208, y: 207.17365759591803 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 638.9117614972208, y: 207.17365759591803 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 638.9117614972208, y: 207.17365759591803 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:55:59.988Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 643.8989984859099, y: 206.6966175361304 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 643.8989984859099, y: 206.6966175361304 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 643.8989984859099, y: 206.6966175361304 },
  '마지막활동': '2025-09-08T06:55:59.999Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 643.8989984859099, y: 206.6966175361304 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 643.8989984859099, y: 206.6966175361304 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 643.8989984859099, y: 206.6966175361304 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.006Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 619.0225409315452, y: 209.07610478046092 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 619.0225409315452, y: 209.07610478046092 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 619.0225409315452, y: 209.07610478046092 },
  '마지막활동': '2025-09-08T06:56:00.014Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 619.0225409315452, y: 209.07610478046092 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 619.0225409315452, y: 209.07610478046092 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 619.0225409315452, y: 209.07610478046092 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.032Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 633.9543882030721, y: 207.64784112840184 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 633.9543882030721, y: 207.64784112840184 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 633.9543882030721, y: 207.64784112840184 },
  '마지막활동': '2025-09-08T06:56:00.041Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 633.9543882030721, y: 207.64784112840184 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 633.9543882030721, y: 207.64784112840184 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 633.9543882030721, y: 207.64784112840184 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.052Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 614.0353039428561, y: 209.5531448402486 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 614.0353039428561, y: 209.5531448402486 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 614.0353039428561, y: 209.5531448402486 },
  '마지막활동': '2025-09-08T06:56:00.060Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 614.0353039428561, y: 209.5531448402486 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 614.0353039428561, y: 209.5531448402486 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 614.0353039428561, y: 209.5531448402486 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.106Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 594.1759470717252, y: 211.4527354974872 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 594.1759470717252, y: 211.4527354974872 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 594.1759470717252, y: 211.4527354974872 },
  '마지막활동': '2025-09-08T06:56:00.115Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 594.1759470717252, y: 211.4527354974872 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 594.1759470717252, y: 211.4527354974872 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 594.1759470717252, y: 211.4527354974872 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.171Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 569.2994895173605, y: 213.83222274181773 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 569.2994895173605, y: 213.83222274181773 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 569.2994895173605, y: 213.83222274181773 },
  '마지막활동': '2025-09-08T06:56:00.177Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 569.2994895173605, y: 213.83222274181773 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 569.2994895173605, y: 213.83222274181773 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 569.2994895173605, y: 213.83222274181773 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.248Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 559.3548792345271, y: 214.78344633408875 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 559.3548792345271, y: 214.78344633408875 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 559.3548792345271, y: 214.78344633408875 },
  '마지막활동': '2025-09-08T06:56:00.257Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 559.3548792345271, y: 214.78344633408875 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 559.3548792345271, y: 214.78344633408875 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 559.3548792345271, y: 214.78344633408875 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.266Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 564.312252528667, y: 214.3092628016058 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 564.312252528667, y: 214.3092628016058 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 564.312252528667, y: 214.3092628016058 },
  '마지막활동': '2025-09-08T06:56:00.275Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 564.312252528667, y: 214.3092628016058 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 564.312252528667, y: 214.3092628016058 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 564.312252528667, y: 214.3092628016058 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.291Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 549.3804052571488, y: 215.73752645366406 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 549.3804052571488, y: 215.73752645366406 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 549.3804052571488, y: 215.73752645366406 },
  '마지막활동': '2025-09-08T06:56:00.299Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 549.3804052571488, y: 215.73752645366406 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 549.3804052571488, y: 215.73752645366406 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 549.3804052571488, y: 215.73752645366406 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.342Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 554.397505940374, y: 215.25762986657296 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 554.397505940374, y: 215.25762986657296 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 554.397505940374, y: 215.25762986657296 },
  '마지막활동': '2025-09-08T06:56:00.349Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 554.397505940374, y: 215.25762986657296 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 554.397505940374, y: 215.25762986657296 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 554.397505940374, y: 215.25762986657296 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.386Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 544.3931682684597, y: 216.2145665134517 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 544.3931682684597, y: 216.2145665134517 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 544.3931682684597, y: 216.2145665134517 },
  '마지막활동': '2025-09-08T06:56:00.395Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 544.3931682684597, y: 216.2145665134517 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 544.3931682684597, y: 216.2145665134517 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 544.3931682684597, y: 216.2145665134517 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.430Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 549.4401326462253, y: 215.73181339905673 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 549.4401326462253, y: 215.73181339905673 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 549.4401326462253, y: 215.73181339905673 },
  '마지막활동': '2025-09-08T06:56:00.445Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 549.4401326462253, y: 215.73181339905673 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 549.4401326462253, y: 215.73181339905673 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 549.4401326462253, y: 215.73181339905673 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.481Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 529.4613209969327, y: 217.6428301655108 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 529.4613209969327, y: 217.6428301655108 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 529.4613209969327, y: 217.6428301655108 },
  '마지막활동': '2025-09-08T06:56:00.488Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 529.4613209969327, y: 217.6428301655108 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 529.4613209969327, y: 217.6428301655108 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 529.4613209969327, y: 217.6428301655108 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.530Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 534.5381490692431, y: 217.15722052381153 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 534.5381490692431, y: 217.15722052381153 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 534.5381490692431, y: 217.15722052381153 },
  '마지막활동': '2025-09-08T06:56:00.538Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 534.5381490692431, y: 217.15722052381153 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 534.5381490692431, y: 217.15722052381153 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 534.5381490692431, y: 217.15722052381153 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.623Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🔍 프라이빗 영역 1756736942592 변화 감지: 2명 → 2명 (user_updated)
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 514.5294737254058, y: 219.07109381756987 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 514.5294737254058, y: 219.07109381756987 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 514.5294737254058, y: 219.07109381756987 },
  '마지막활동': '2025-09-08T06:56:00.631Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 514.5294737254058, y: 219.07109381756987 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 514.5294737254058, y: 219.07109381756987 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 514.5294737254058, y: 219.07109381756987 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.674Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 519.6361654922566, y: 218.58262764856676 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 519.6361654922566, y: 218.58262764856676 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 519.6361654922566, y: 218.58262764856676 },
  '마지막활동': '2025-09-08T06:56:00.680Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 519.6361654922566, y: 218.58262764856676 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 519.6361654922566, y: 218.58262764856676 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 519.6361654922566, y: 218.58262764856676 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.725Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 499.5976264538788, y: 220.499357469629 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 499.5976264538788, y: 220.499357469629 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 499.5976264538788, y: 220.499357469629 },
  '마지막활동': '2025-09-08T06:56:00.734Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 499.5976264538788, y: 220.499357469629 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 499.5976264538788, y: 220.499357469629 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 499.5976264538788, y: 220.499357469629 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.792Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 494.8194353269814, y: 220.95640183828874 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 494.8194353269814, y: 220.95640183828874 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 494.8194353269814, y: 220.95640183828874 },
  '마지막활동': '2025-09-08T06:56:00.800Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 494.8194353269814, y: 220.95640183828874 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 494.8194353269814, y: 220.95640183828874 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 494.8194353269814, y: 220.95640183828874 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.882Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 484.6657791823518, y: 221.92762112168808 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 484.6657791823518, y: 221.92762112168808 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 484.6657791823518, y: 221.92762112168808 },
  '마지막활동': '2025-09-08T06:56:00.892Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 484.6657791823518, y: 221.92762112168808 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 484.6657791823518, y: 221.92762112168808 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 484.6657791823518, y: 221.92762112168808 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:00.959Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 479.91745174999494, y: 222.38180896304397 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 479.91745174999494, y: 222.38180896304397 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 479.91745174999494, y: 222.38180896304397 },
  '마지막활동': '2025-09-08T06:56:00.967Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 479.91745174999494, y: 222.38180896304397 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 479.91745174999494, y: 222.38180896304397 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 479.91745174999494, y: 222.38180896304397 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:01.020Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 463, y: 224 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 463, y: 224 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 463, y: 224 },
  '마지막활동': '2025-09-08T06:56:01.030Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 463, y: 224 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 463, y: 224 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:01.069Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 463, y: 224 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 463, y: 224 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 463, y: 224 },
  '마지막활동': '2025-09-08T06:56:01.077Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 463, y: 224 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 463, y: 224 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T06:56:01.140Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 463, y: 224 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 463, y: 224 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 463, y: 224 },
  '마지막활동': '2025-09-08T06:56:01.148Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 463, y: 224 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 463, y: 224 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🔍 프라이빗 영역 1756736942592 변화 감지: 2명 → 2명 (user_updated)
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:07:57.991Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 363.9807274611299, y: 358.8279569773715 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 363.9807274611299, y: 358.8279569773715 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 363.9807274611299, y: 358.8279569773715 },
  '마지막활동': '2025-09-08T07:07:57.994Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 363.9807274611299, y: 358.8279569773715 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 363.9807274611299, y: 358.8279569773715 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 363.9807274611299, y: 358.8279569773715 },
  participants: 2
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:07:57.996Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:07:57.998Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:07:58.232Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 463, y: 224 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 463, y: 224 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 463, y: 224 },
  '마지막활동': '2025-09-08T07:07:58.258Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 463, y: 224 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 463, y: 224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 463, y: 224 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:07:58.270Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:07:58.276Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔍 프라이빗 영역 1756736942592 변화 감지: 2명 → 2명 (user_updated)
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:09:25.367Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:25.369Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:09:25.371Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:25.373Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:09:25.532Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:25.541Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T07:09:25.557Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:25.565Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T05:49:54.917Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T06:54:50.791Z,
    characterInfo: null,
    privateAreaId: 1756736942592
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 6zzZqOz0BCkNLeyXAAAL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: 6K0OBRFiV44b5geuAAAF
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 2개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Jyo4m9ygRXNo6m8Esnb6zw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): EziWqvRz8j73waPAAAAB
연결 정보: {
  id: 'EziWqvRz8j73waPAAAAB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: EziWqvRz8j73waPAAAAB IP: 192.168.200.106
새로운 WebSocket 연결: EziWqvRz8j73waPAAAAB
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:55.414Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 데이터베이스 테이블 동기화 완료
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '78uZ+g3Jpfg14WaHoaTQgQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): APfS4GqqfOBlh_tyAAAD
연결 정보: {
  id: 'APfS4GqqfOBlh_tyAAAD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: APfS4GqqfOBlh_tyAAAD IP: 192.168.200.106
새로운 WebSocket 연결: APfS4GqqfOBlh_tyAAAD
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:55.811Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:56.417Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:55.811Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:56.815Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:55.811Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'UClbZf8dTU4OGqKdRsmJhQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): jLAYpcsJwWNw8OiMAAAF
연결 정보: {
  id: 'jLAYpcsJwWNw8OiMAAAF',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: jLAYpcsJwWNw8OiMAAAF IP: 192.168.200.108
새로운 WebSocket 연결: jLAYpcsJwWNw8OiMAAAF
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'jpFLrR0jAx080dy7hDiGWA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): wVAz7OF9SY2wDBvnAAAH
연결 정보: {
  id: 'wVAz7OF9SY2wDBvnAAAH',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: wVAz7OF9SY2wDBvnAAAH IP: 192.168.200.108
새로운 WebSocket 연결: wVAz7OF9SY2wDBvnAAAH
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:57.211Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:57.229Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:58.212Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:55.811Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:57.229Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:09:58.231Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:55.811Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:09:57.229Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:14:00.403Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:14:00.404Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:14:00.406Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:14:00.430Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:14:00.447Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:14:00.447Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:14:00.451Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:14:00.451Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:14:00.454Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T07:14:00.467Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'OLQJfDRoE7eJnSVRtYxrmw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): DAJRwwGLvggp6coaAAAJ
연결 정보: {
  id: 'DAJRwwGLvggp6coaAAAJ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DAJRwwGLvggp6coaAAAJ IP: 192.168.200.106
새로운 WebSocket 연결: DAJRwwGLvggp6coaAAAJ
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'EziWqvRz8j73waPAAAAB',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:14:00 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:00.508Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: EziWqvRz8j73waPAAAAB
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:00.510Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:14:00.512Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:14:00.516Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:14:00.659Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:00.673Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:00.673Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:14:00.694Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:14:00.812Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:00.828Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:00.847Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:00.870Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:14:00.883Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hbyfBR7qnuICTNucV81BmQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:14:00.902Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): fK5xH4P-0I_4WbkhAAAL
연결 정보: {
  id: 'fK5xH4P-0I_4WbkhAAAL',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: fK5xH4P-0I_4WbkhAAAL IP: 192.168.200.108
새로운 WebSocket 연결: fK5xH4P-0I_4WbkhAAAL
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'jLAYpcsJwWNw8OiMAAAF',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:14:00 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:00.938Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: jLAYpcsJwWNw8OiMAAAF
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:00.939Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:14:01.016Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:14:01.025Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:01.511Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:14:00.510Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:14:01.940Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:14:00.510Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:14:00.939Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:16:19.340Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.341Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.343Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:16:19.369Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:16:19.379Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.380Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.383Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.385Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:16:19.387Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'au90EKBFzUPiOs5DbkmlRA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T07:16:19.403Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): RinH__32c3JJXjBIAAAN
연결 정보: {
  id: 'RinH__32c3JJXjBIAAAN',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: RinH__32c3JJXjBIAAAN IP: 192.168.200.106
새로운 WebSocket 연결: RinH__32c3JJXjBIAAAN
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'DAJRwwGLvggp6coaAAAJ',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:16:19 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:19.429Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: DAJRwwGLvggp6coaAAAJ
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:19.430Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:16:19.455Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:16:19.457Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:16:19.596Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.611Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.613Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:16:19.630Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:16:19.724Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.741Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.760Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.786Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:16:19.788Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '/9mwo2lCyZcmvkMeT0EUfg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:16:19.824Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): R9owOS6hOoi5cIl2AAAP
연결 정보: {
  id: 'R9owOS6hOoi5cIl2AAAP',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: R9owOS6hOoi5cIl2AAAP IP: 192.168.200.108
새로운 WebSocket 연결: R9owOS6hOoi5cIl2AAAP
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'fK5xH4P-0I_4WbkhAAAL',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:16:19 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:19.867Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: fK5xH4P-0I_4WbkhAAAL
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:19.868Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:16:19.964Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:16:19.976Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:20.431Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:16:19.430Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:16:20.870Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:16:19.430Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:16:19.868Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:25:11.449Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.449Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.452Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:25:11.473Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:25:11.488Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.489Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.491Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.491Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:25:11.496Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:25:11.502Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0BkRRoN3N5nrbKZOziTRJg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): qBK0ZPqZNffR13zsAAAR
연결 정보: {
  id: 'qBK0ZPqZNffR13zsAAAR',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: qBK0ZPqZNffR13zsAAAR IP: 192.168.200.106
새로운 WebSocket 연결: qBK0ZPqZNffR13zsAAAR
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'RinH__32c3JJXjBIAAAN',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:25:11 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:11.534Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: RinH__32c3JJXjBIAAAN
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:11.535Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:25:11.550Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:11.552Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:25:11.607Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.620Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.621Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:25:11.636Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:25:11.708Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.724Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.742Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.743Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:25:11.765Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:25:11.775Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '5psrGI/mxBjKe/lvg2UnRQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): MTTq7UlgTejYG_xZAAAT
연결 정보: {
  id: 'MTTq7UlgTejYG_xZAAAT',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: MTTq7UlgTejYG_xZAAAT IP: 192.168.200.108
새로운 WebSocket 연결: MTTq7UlgTejYG_xZAAAT
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'R9owOS6hOoi5cIl2AAAP',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:25:11 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:11.865Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: R9owOS6hOoi5cIl2AAAP
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:11.866Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
2025-09-08T07:25:11.882Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:11.896Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:12.536Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:11.535Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:12.867Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:11.535Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:11.866Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:25:50.807Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.807Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.810Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:25:50.835Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.844Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:25:50.858Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.858Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.870Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:25:50.873Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:25:50.875Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'U9632e7MF6x9VHaXOhzRhA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): MZlE6oXv4CdiNUIrAAAV
연결 정보: {
  id: 'MZlE6oXv4CdiNUIrAAAV',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: MZlE6oXv4CdiNUIrAAAV IP: 192.168.200.106
새로운 WebSocket 연결: MZlE6oXv4CdiNUIrAAAV
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'qBK0ZPqZNffR13zsAAAR',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:25:50 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:50.909Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: qBK0ZPqZNffR13zsAAAR
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:50.910Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:25:50.932Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:25:50.934Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:25:51.069Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.084Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.085Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:25:51.098Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:25:51.203Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.223Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.250Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.262Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:25:51.264Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'AaAJ4hlzEeMHsZcafKhYYw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:25:51.291Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): N4CdXdyY6Z3NMyT8AAAX
연결 정보: {
  id: 'N4CdXdyY6Z3NMyT8AAAX',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: N4CdXdyY6Z3NMyT8AAAX IP: 192.168.200.108
새로운 WebSocket 연결: N4CdXdyY6Z3NMyT8AAAX
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'MTTq7UlgTejYG_xZAAAT',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:25:51 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:51.348Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: MTTq7UlgTejYG_xZAAAT
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:51.349Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:25:51.446Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:25:51.458Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:51.910Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:50.910Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:25:52.350Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:50.910Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:25:51.349Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:26:15.915Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:15.916Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:15.917Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:26:15.936Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:26:15.951Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:15.951Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:15.954Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:15.956Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:26:15.958Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'sHashYYDrR+apMe7/JHb3g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:26:15.998Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:15.999Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): 9NEwPJ58N26yPq69AAAZ
연결 정보: {
  id: '9NEwPJ58N26yPq69AAAZ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 9NEwPJ58N26yPq69AAAZ IP: 192.168.200.106
새로운 WebSocket 연결: 9NEwPJ58N26yPq69AAAZ
2025-09-08T07:26:16.013Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:16.016Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:16.018Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:26:16.037Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'MZlE6oXv4CdiNUIrAAAV',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:26:16 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:16.039Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: MZlE6oXv4CdiNUIrAAAV
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:16.040Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:26:16.054Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:26:16.100Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:16.103Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:16.119Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:26:16.122Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:26:16.145Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:26:16.150Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'x4sUVGwFtzc/xe05AS4niw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): UhlT8WOUz7Id4-AeAAAb
연결 정보: {
  id: 'UhlT8WOUz7Id4-AeAAAb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: UhlT8WOUz7Id4-AeAAAb IP: 192.168.200.108
새로운 WebSocket 연결: UhlT8WOUz7Id4-AeAAAb
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'N4CdXdyY6Z3NMyT8AAAX',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:26:16 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:16.323Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: N4CdXdyY6Z3NMyT8AAAX
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:16.324Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:26:16.524Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:16.537Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:17.042Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:16.040Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:17.325Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:16.040Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:16.324Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:26:45.409Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.409Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.412Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:26:45.434Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:26:45.444Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.445Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.449Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:26:45.451Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.458Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T07:26:45.460Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'f7I/WJdNetbcTRummwfsgw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): uTxA_vqsKjpcJ7EpAAAd
연결 정보: {
  id: 'uTxA_vqsKjpcJ7EpAAAd',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: uTxA_vqsKjpcJ7EpAAAd IP: 192.168.200.106
새로운 WebSocket 연결: uTxA_vqsKjpcJ7EpAAAd
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '9NEwPJ58N26yPq69AAAZ',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:26:45 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:45.493Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 9NEwPJ58N26yPq69AAAZ
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:45.494Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:26:45.518Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:26:45.520Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:26:45.585Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.616Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.635Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:26:45.650Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:26:45.732Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.753Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.777Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.780Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:26:45.806Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:26:45.808Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '5ol/Mjr86WDAL0XL1cnoNA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): p-W4zK47_uBAbt81AAAf
연결 정보: {
  id: 'p-W4zK47_uBAbt81AAAf',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: p-W4zK47_uBAbt81AAAf IP: 192.168.200.108
새로운 WebSocket 연결: p-W4zK47_uBAbt81AAAf
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'UhlT8WOUz7Id4-AeAAAb',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:26:45 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:45.880Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: UhlT8WOUz7Id4-AeAAAb
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:45.881Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:26:45.913Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:26:45.931Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:46.493Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:45.494Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:26:46.881Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:45.494Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:26:45.881Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:27:06.876Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.876Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.878Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:06.899Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.908Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:06.914Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.914Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.918Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.922Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:06.923Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:06.924Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:06.929Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '7ogtZrJUmIbc/qX+Ldm+Vg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): AR6wMfqewu0U-pyQAAAh
연결 정보: {
  id: 'AR6wMfqewu0U-pyQAAAh',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: AR6wMfqewu0U-pyQAAAh IP: 192.168.200.106
새로운 WebSocket 연결: AR6wMfqewu0U-pyQAAAh
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'E3HQK053BiRi6w3BhQGbpw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): P4qj6WnKr7iScVowAAAj
연결 정보: {
  id: 'P4qj6WnKr7iScVowAAAj',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: P4qj6WnKr7iScVowAAAj IP: 192.168.200.106
새로운 WebSocket 연결: P4qj6WnKr7iScVowAAAj
2025-09-08T07:27:06.979Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:27:06.991Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:06.993Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:06.997Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'uTxA_vqsKjpcJ7EpAAAd',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:07 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.000Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: uTxA_vqsKjpcJ7EpAAAd
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.002Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.003Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
2025-09-08T07:27:07.023Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:07.051Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.054Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.058Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:07.073Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:07.124Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.125Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.161Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.161Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.186Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:27:07.188Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:07.188Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
2025-09-08T07:27:07.194Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:07.202Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'lG8vKxQ/1lZzKboQ+DIOQA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:27:07.253Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
새로운 WebSocket 연결 (화상통신 준비): _XMv63syi-hA0au6AAAl
연결 정보: {
  id: '_XMv63syi-hA0au6AAAl',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: _XMv63syi-hA0au6AAAl IP: 192.168.200.108
새로운 WebSocket 연결: _XMv63syi-hA0au6AAAl
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'AtB5IDJxKOXGvgkGSAqrig==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): hCwTV3vX4yo5LUeXAAAn
연결 정보: {
  id: 'hCwTV3vX4yo5LUeXAAAn',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: hCwTV3vX4yo5LUeXAAAn IP: 192.168.200.108
새로운 WebSocket 연결: hCwTV3vX4yo5LUeXAAAn
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'p-W4zK47_uBAbt81AAAf',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:07 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.366Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: p-W4zK47_uBAbt81AAAf
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.366Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:07.370Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
2025-09-08T07:27:07.384Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:27:07.393Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:07.410Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:08.002Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.002Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:08.005Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.002Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:08.368Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.002Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.370Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:08.373Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.002Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:07.370Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:27:29.722Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.723Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.725Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:29.749Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:29.759Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.760Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.765Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.765Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.769Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:29.770Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:29.774Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:29.783Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '1X+wWdLzCV5n2QplwxPskg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): IaEK2UaC8GMzkD05AAAp
연결 정보: {
  id: 'IaEK2UaC8GMzkD05AAAp',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: IaEK2UaC8GMzkD05AAAp IP: 192.168.200.106
새로운 WebSocket 연결: IaEK2UaC8GMzkD05AAAp
2025-09-08T07:27:29.826Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:29.828Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:29.832Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'xlLPwB5qjzQGqFXsSL0Tkg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:27:29.834Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): qgCRhnihdJBiLfYxAAAr
연결 정보: {
  id: 'qgCRhnihdJBiLfYxAAAr',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: qgCRhnihdJBiLfYxAAAr IP: 192.168.200.106
새로운 WebSocket 연결: qgCRhnihdJBiLfYxAAAr
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 인증 성공: 1 whl19810312
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'P4qj6WnKr7iScVowAAAj',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:29 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:29.851Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: P4qj6WnKr7iScVowAAAj
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:29.852Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:29.858Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:29.879Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:29.936Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:29.987Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:29.988Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:30.008Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:30.077Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.101Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.137Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.139Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.153Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.157Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:27:30.166Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:30.172Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:30.192Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'kYf2vq5oZro8d+t/lNilTg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:30.219Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): QKV6UlrMpGR00YLoAAAt
연결 정보: {
  id: 'QKV6UlrMpGR00YLoAAAt',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QKV6UlrMpGR00YLoAAAt IP: 192.168.200.108
새로운 WebSocket 연결: QKV6UlrMpGR00YLoAAAt
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'reHaaspbKeZgD38V4YhXjg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ETdxqm3l60EZNxVXAAAv
연결 정보: {
  id: 'ETdxqm3l60EZNxVXAAAv',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ETdxqm3l60EZNxVXAAAv IP: 192.168.200.108
새로운 WebSocket 연결: ETdxqm3l60EZNxVXAAAv
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'hCwTV3vX4yo5LUeXAAAn',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:30 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:30.315Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: hCwTV3vX4yo5LUeXAAAn
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:30.317Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:30.318Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:27:30.339Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:30.370Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:30.386Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:30.853Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:29.858Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:30.859Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:29.858Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:31.318Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:29.858Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:30.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:31.321Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:29.858Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:30.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
2025-09-08T07:27:47.132Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.136Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.148Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:47.171Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.179Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:27:47.184Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.184Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:47.190Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.190Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:27:47.195Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.210Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'WtHv6Y0KTXNdiQP6bjWQGg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 7b4oczX5sESSvwnEAAAx
연결 정보: {
  id: '7b4oczX5sESSvwnEAAAx',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 7b4oczX5sESSvwnEAAAx IP: 192.168.200.106
새로운 WebSocket 연결: 7b4oczX5sESSvwnEAAAx
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'HuP8LIH2p7S2C7wscOsG8g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Vf3kxpr5dpIvfIGuAAAz
연결 정보: {
  id: 'Vf3kxpr5dpIvfIGuAAAz',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Vf3kxpr5dpIvfIGuAAAz IP: 192.168.200.106
새로운 WebSocket 연결: Vf3kxpr5dpIvfIGuAAAz
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.247Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'qgCRhnihdJBiLfYxAAAr',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:47 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.251Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: qgCRhnihdJBiLfYxAAAr
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.253Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.267Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.271Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.274Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:27:47.276Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.300Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:27:47.332Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.346Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.348Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:47.365Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:27:47.436Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.456Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.489Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.492Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.506Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:27:47.512Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:47.525Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:27:47.527Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:47.533Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'AoZjS0NCVX+vn3sPdKupcQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:27:47.565Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
새로운 WebSocket 연결 (화상통신 준비): DcTh_wZa3v8oIsgkAAA1
연결 정보: {
  id: 'DcTh_wZa3v8oIsgkAAA1',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DcTh_wZa3v8oIsgkAAA1 IP: 192.168.200.108
새로운 WebSocket 연결: DcTh_wZa3v8oIsgkAAA1
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'QxTxDIUAc6Y0i1QpeWYXXw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): hztkO-MNY6v2NMH-AAA3
연결 정보: {
  id: 'hztkO-MNY6v2NMH-AAA3',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: hztkO-MNY6v2NMH-AAA3 IP: 192.168.200.108
새로운 WebSocket 연결: hztkO-MNY6v2NMH-AAA3
2025-09-08T07:27:47.650Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ETdxqm3l60EZNxVXAAAv',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:27:47 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.651Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: ETdxqm3l60EZNxVXAAAv
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.652Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:47.656Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
2025-09-08T07:27:47.676Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:27:47.695Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:48.253Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.271Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:48.272Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.271Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:48.653Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.271Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.656Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:27:48.657Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.271Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:27:47.656Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:28:15.377Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.380Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.384Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:15.405Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.418Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:15.430Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.430Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.434Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.435Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.438Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:28:15.440Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:28:15.441Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'cI5kEpJZyow5gSpFHA4jfQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 35zw2_f7iOg8LtmkAAA5
연결 정보: {
  id: '35zw2_f7iOg8LtmkAAA5',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 35zw2_f7iOg8LtmkAAA5 IP: 192.168.200.106
새로운 WebSocket 연결: 35zw2_f7iOg8LtmkAAA5
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'rpWdFydUtt6pEyBvzjmedw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ecTAEaxkkfAUiPWsAAA7
연결 정보: {
  id: 'ecTAEaxkkfAUiPWsAAA7',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ecTAEaxkkfAUiPWsAAA7 IP: 192.168.200.106
새로운 WebSocket 연결: ecTAEaxkkfAUiPWsAAA7
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 인증 성공: 1 whl19810312
2025-09-08T07:28:15.500Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Vf3kxpr5dpIvfIGuAAAz',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:15 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:15.503Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: Vf3kxpr5dpIvfIGuAAAz
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:15.504Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:15.505Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:28:15.505Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
2025-09-08T07:28:15.507Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:15.509Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:15.540Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:15.694Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.708Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.709Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:15.723Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:15.782Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.806Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.836Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.840Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.860Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:28:15.862Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:15.866Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:28:15.871Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
2025-09-08T07:28:15.889Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:28:15.905Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'PJJnCwMJKX3H0JgGciOw2Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): lcruCWmM_ILhfKwTAAA9
연결 정보: {
  id: 'lcruCWmM_ILhfKwTAAA9',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: lcruCWmM_ILhfKwTAAA9 IP: 192.168.200.108
새로운 WebSocket 연결: lcruCWmM_ILhfKwTAAA9
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '9Q0whaqCfxjBv/s7VAbWNw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:28:16.004Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:16.016Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): QA6TQcTlg0RbFu6iAAA_
연결 정보: {
  id: 'QA6TQcTlg0RbFu6iAAA_',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QA6TQcTlg0RbFu6iAAA_ IP: 192.168.200.108
새로운 WebSocket 연결: QA6TQcTlg0RbFu6iAAA_
2025-09-08T07:28:16.054Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'hztkO-MNY6v2NMH-AAA3',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:16 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:16.064Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: hztkO-MNY6v2NMH-AAA3
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:16.065Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:16.067Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:16.505Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:15.505Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:16.510Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:15.505Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:17.066Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:15.505Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:16.067Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:17.071Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:15.505Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:16.067Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:28:29.933Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.934Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.935Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:29.958Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.967Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:29.982Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.983Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.995Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:29.996Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:30.006Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:28:30.007Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:28:30.008Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'HPUI7gpHg/Nj0D5SEzu9Tw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): -_qNZldH3AKDDydxAABB
연결 정보: {
  id: '-_qNZldH3AKDDydxAABB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: -_qNZldH3AKDDydxAABB IP: 192.168.200.106
새로운 WebSocket 연결: -_qNZldH3AKDDydxAABB
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T07:28:30.044Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:30.046Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'h+ZK5ERAWU6+Y3GSjeLh/A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): NtKPcMdZgfTLKPFIAABD
연결 정보: {
  id: 'NtKPcMdZgfTLKPFIAABD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: NtKPcMdZgfTLKPFIAABD IP: 192.168.200.106
새로운 WebSocket 연결: NtKPcMdZgfTLKPFIAABD
2025-09-08T07:28:30.062Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ecTAEaxkkfAUiPWsAAA7',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:30 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:30.065Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: ecTAEaxkkfAUiPWsAAA7
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:30.067Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:28:30.067Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:30.069Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:30.071Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
2025-09-08T07:28:30.074Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 인증 성공: 1 whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:30.081Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:30.108Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:30.218Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:30.283Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:30.301Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:30.317Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:30.317Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:28:30.339Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:28:30.356Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'leHGPTV+DyKdlVaCnILJSA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Zs9HvWk0EWPgSZM8AABF
연결 정보: {
  id: 'Zs9HvWk0EWPgSZM8AABF',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Zs9HvWk0EWPgSZM8AABF IP: 192.168.200.108
새로운 WebSocket 연결: Zs9HvWk0EWPgSZM8AABF
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'QA6TQcTlg0RbFu6iAAA_',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:30 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:30.416Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: QA6TQcTlg0RbFu6iAAA_
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:30.416Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
2025-09-08T07:28:30.446Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:28:30.458Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:31.067Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:30.071Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:31.071Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:30.071Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:31.418Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:30.071Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:30.416Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:28:56.190Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.190Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.192Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:56.218Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:28:56.234Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.235Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.240Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.241Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.244Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:28:56.245Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:28:56.249Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:56.256Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:28:56.275Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'CMkHEMJNmqLq4V9TxRNASg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): JqMDjT-SmIz_r8UJAABH
연결 정보: {
  id: 'JqMDjT-SmIz_r8UJAABH',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: JqMDjT-SmIz_r8UJAABH IP: 192.168.200.106
새로운 WebSocket 연결: JqMDjT-SmIz_r8UJAABH
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '4HpRJp82TJ3j/fsXHDOAwQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 7olKHVxsV9-OBkWmAABJ
연결 정보: {
  id: '7olKHVxsV9-OBkWmAABJ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 7olKHVxsV9-OBkWmAABJ IP: 192.168.200.106
새로운 WebSocket 연결: 7olKHVxsV9-OBkWmAABJ
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'NtKPcMdZgfTLKPFIAABD',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:56 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.315Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: NtKPcMdZgfTLKPFIAABD
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.316Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:28:56.318Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
2025-09-08T07:28:56.321Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
2025-09-08T07:28:56.323Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.334Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:28:56.351Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:28:56.439Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.452Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.452Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:56.468Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:28:56.534Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.544Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.566Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.603Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:28:56.607Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:28:56.640Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.647Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:28:56.664Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'mQtfF70gCByJvno7+Mm8fw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:28:56.679Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:28:56.691Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): cdc4yH1atZFRf7PKAABL
연결 정보: {
  id: 'cdc4yH1atZFRf7PKAABL',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: cdc4yH1atZFRf7PKAABL IP: 192.168.200.108
새로운 WebSocket 연결: cdc4yH1atZFRf7PKAABL
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'm1QsKx6FC2EiXvgAk4/1pA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): P0ZKocmC8_HWUY7tAABN
연결 정보: {
  id: 'P0ZKocmC8_HWUY7tAABN',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: P0ZKocmC8_HWUY7tAABN IP: 192.168.200.108
새로운 WebSocket 연결: P0ZKocmC8_HWUY7tAABN
2025-09-08T07:28:56.775Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:28:56.783Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Zs9HvWk0EWPgSZM8AABF',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:28:56 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.791Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: Zs9HvWk0EWPgSZM8AABF
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.792Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:56.794Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
2025-09-08T07:28:56.822Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:57.317Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.334Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:57.335Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.334Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:57.792Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.334Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.794Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:28:57.796Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.334Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:28:56.794Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
2025-09-08T07:29:00.791Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:00.802Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:00.810Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:00.812Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:00.813Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'WeuI6OSSX+TWBffUDuqtBg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): sVkfqbduvS8563VhAABP
연결 정보: {
  id: 'sVkfqbduvS8563VhAABP',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: sVkfqbduvS8563VhAABP IP: 192.168.200.106
새로운 WebSocket 연결: sVkfqbduvS8563VhAABP
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:29:00.840Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:00.842Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:00.845Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'qTB65hNYvc/MaVo2KPO3Wg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): eXuQBV1CqjKwLwvmAABR
연결 정보: {
  id: 'eXuQBV1CqjKwLwvmAABR',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: eXuQBV1CqjKwLwvmAABR IP: 192.168.200.106
새로운 WebSocket 연결: eXuQBV1CqjKwLwvmAABR
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '7olKHVxsV9-OBkWmAABJ',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:00 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:00.870Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 7olKHVxsV9-OBkWmAABJ
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:00.870Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:00.871Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
2025-09-08T07:29:00.880Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:00.923Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:00.940Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:00.969Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:00.977Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
2025-09-08T07:29:00.980Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:29:01.013Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:01.015Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'gQ6z2HvTPXpNnBr21UdLTw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): vE8k2wR-lofQHo3lAABT
연결 정보: {
  id: 'vE8k2wR-lofQHo3lAABT',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: vE8k2wR-lofQHo3lAABT IP: 192.168.200.108
새로운 WebSocket 연결: vE8k2wR-lofQHo3lAABT
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'W7AtOQ8nbGyy5yFkegr1bw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:29:01.138Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): HZaefG8vZB-HPF3GAABV
연결 정보: {
  id: 'HZaefG8vZB-HPF3GAABV',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: HZaefG8vZB-HPF3GAABV IP: 192.168.200.108
새로운 WebSocket 연결: HZaefG8vZB-HPF3GAABV
2025-09-08T07:29:01.153Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'P0ZKocmC8_HWUY7tAABN',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:01 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:01.164Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: P0ZKocmC8_HWUY7tAABN
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:01.165Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:01.166Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:01.871Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:00.871Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:01.875Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:00.871Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:02.165Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:00.871Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:01.166Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:02.169Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:00.871Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:01.166Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
2025-09-08T07:29:07.018Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.019Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.020Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:07.031Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.044Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:07.056Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.057Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.061Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.061Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:07.065Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:07.067Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:07.068Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'w9dNNsmEO5UtV2QDTF9pgg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 0R2vx1nuwcGM9RTsAABX
연결 정보: {
  id: '0R2vx1nuwcGM9RTsAABX',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 0R2vx1nuwcGM9RTsAABX IP: 192.168.200.106
새로운 WebSocket 연결: 0R2vx1nuwcGM9RTsAABX
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:29:07.094Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:07.095Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:07.097Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:07.101Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'xQl1eFNwnAZOzyVXDofmoA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): _giNNsrQ7X4aSXX4AABZ
연결 정보: {
  id: '_giNNsrQ7X4aSXX4AABZ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: _giNNsrQ7X4aSXX4AABZ IP: 192.168.200.106
새로운 WebSocket 연결: _giNNsrQ7X4aSXX4AABZ
2025-09-08T07:29:07.123Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'eXuQBV1CqjKwLwvmAABR',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:07 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.128Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: eXuQBV1CqjKwLwvmAABR
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.129Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.130Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:07.258Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.296Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.317Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:07.331Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:07.393Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.412Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.450Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.458Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.487Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.488Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:29:07.502Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:29:07.517Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Tr9yCufNai1ZX+6YSepqDw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:29:07.540Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): Fhr_HX918Q-DqguqAABb
연결 정보: {
  id: 'Fhr_HX918Q-DqguqAABb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Fhr_HX918Q-DqguqAABb IP: 192.168.200.108
새로운 WebSocket 연결: Fhr_HX918Q-DqguqAABb
2025-09-08T07:29:07.569Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'pqWVF+fX159GnOwgPeTSzA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): l-FM17BH3fbHhbAFAABd
연결 정보: {
  id: 'l-FM17BH3fbHhbAFAABd',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: l-FM17BH3fbHhbAFAABd IP: 192.168.200.108
새로운 WebSocket 연결: l-FM17BH3fbHhbAFAABd
2025-09-08T07:29:07.630Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:07.638Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'HZaefG8vZB-HPF3GAABV',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:07 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.649Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: HZaefG8vZB-HPF3GAABV
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.650Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T07:29:07.652Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:07.654Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:08.130Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.130Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:08.135Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.130Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:08.651Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.130Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.654Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:08.656Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.130Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:07.654Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:29:38.136Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.137Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.139Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:38.163Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.173Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:38.181Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.181Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.185Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.185Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.189Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:38.190Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:38.191Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'MRprq2L2yR2uP2NEYHWxpw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): hHkUp6om6lP9cAk9AABf
연결 정보: {
  id: 'hHkUp6om6lP9cAk9AABf',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: hHkUp6om6lP9cAk9AABf IP: 192.168.200.106
새로운 WebSocket 연결: hHkUp6om6lP9cAk9AABf
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'bF2VsaadjTH95GTfWA631w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Rpsn5AmNYRXmXwRNAABh
연결 정보: {
  id: 'Rpsn5AmNYRXmXwRNAABh',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Rpsn5AmNYRXmXwRNAABh IP: 192.168.200.106
새로운 WebSocket 연결: Rpsn5AmNYRXmXwRNAABh
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:29:38.243Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '_giNNsrQ7X4aSXX4AABZ',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:38 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.251Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: _giNNsrQ7X4aSXX4AABZ
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.252Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
2025-09-08T07:29:38.253Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:38.257Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:38.259Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.261Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:38.271Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.285Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:38.340Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.349Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:38.381Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:38.427Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.449Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.482Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.491Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:38.493Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:38.496Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:38.498Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.498Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'HWQaTpneytzWBA9jKtlJLA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:29:38.521Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): pdO2AOmeJ3iSDS-rAABj
연결 정보: {
  id: 'pdO2AOmeJ3iSDS-rAABj',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: pdO2AOmeJ3iSDS-rAABj IP: 192.168.200.108
새로운 WebSocket 연결: pdO2AOmeJ3iSDS-rAABj
2025-09-08T07:29:38.539Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'OhOCloY1kTtJL7nY8pMaFw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): FZO8PpEDsVwFiBOrAABl
연결 정보: {
  id: 'FZO8PpEDsVwFiBOrAABl',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: FZO8PpEDsVwFiBOrAABl IP: 192.168.200.108
새로운 WebSocket 연결: FZO8PpEDsVwFiBOrAABl
WebSocket 인증 성공: 2 test1
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'l-FM17BH3fbHhbAFAABd',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:38 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.628Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: l-FM17BH3fbHhbAFAABd
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.629Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:38.631Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:29:38.652Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:38.674Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:29:38.692Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:39.252Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.261Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:39.263Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.261Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:39.630Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.261Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.631Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:39.638Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.261Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:38.631Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T07:29:59.684Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:59.685Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:59.688Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:59.708Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:59.725Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T07:29:59.728Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:59.740Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T07:29:59.740Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:59.745Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T07:29:59.750Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T07:29:59.752Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '/KIjIYEV8mZQHuUD+Rxagw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): OpcN9Qbd2YXsauX7AABn
연결 정보: {
  id: 'OpcN9Qbd2YXsauX7AABn',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: OpcN9Qbd2YXsauX7AABn IP: 192.168.200.106
새로운 WebSocket 연결: OpcN9Qbd2YXsauX7AABn
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '+VaS4lNOvwISg2jqRSWkyQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): L7kVaiJo919FnxISAABp
연결 정보: {
  id: 'L7kVaiJo919FnxISAABp',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: L7kVaiJo919FnxISAABp IP: 192.168.200.106
새로운 WebSocket 연결: L7kVaiJo919FnxISAABp
2025-09-08T07:29:59.799Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:59.801Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Rpsn5AmNYRXmXwRNAABh',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:29:59 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:59.805Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: Rpsn5AmNYRXmXwRNAABh
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:59.807Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:29:59.810Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:59.819Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
2025-09-08T07:29:59.824Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:59.827Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:59.849Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T07:29:59.875Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:59.881Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:59.898Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T07:29:59.919Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:59.959Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:59.982Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T07:29:59.995Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:29:59.996Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T07:30:00.000Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:30:00.006Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T07:30:00.014Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T07:30:00.032Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '3UwD277PH2PNX5kxNf3SAg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T07:30:00.042Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): parX4LnT6B9HCpwwAABr
연결 정보: {
  id: 'parX4LnT6B9HCpwwAABr',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: parX4LnT6B9HCpwwAABr IP: 192.168.200.108
새로운 WebSocket 연결: parX4LnT6B9HCpwwAABr
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'AxsLEYMtZTp7eShmk5rrCg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T07:30:00.098Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
새로운 WebSocket 연결 (화상통신 준비): 2K_lAeTwuTniFM0gAABt
연결 정보: {
  id: '2K_lAeTwuTniFM0gAABt',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 2K_lAeTwuTniFM0gAABt IP: 192.168.200.108
새로운 WebSocket 연결: 2K_lAeTwuTniFM0gAABt
2025-09-08T07:30:00.112Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'FZO8PpEDsVwFiBOrAABl',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 4:30:00 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:00.119Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: FZO8PpEDsVwFiBOrAABl
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:00.120Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
Auth 미들웨어 - 인증 성공, 사용자: test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:00.122Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
2025-09-08T07:30:00.185Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:00.808Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:59.810Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:00.813Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:59.810Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:01.121Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:59.810Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:30:00.122Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T07:30:01.125Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:29:59.810Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T07:30:00.122Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
✅ 데이터베이스 테이블 동기화 완료
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'nLru/bIvTdH6u2dWI1RF9g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 3tPx5rClL_N4meFnAAAB
연결 정보: {
  id: '3tPx5rClL_N4meFnAAAB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 3tPx5rClL_N4meFnAAAB IP: 192.168.200.106
새로운 WebSocket 연결: 3tPx5rClL_N4meFnAAAB
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Oju+LdUC2HvfPn6CIlANOw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): pmzYuInsuMUcJX4jAAAD
연결 정보: {
  id: 'pmzYuInsuMUcJX4jAAAD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: pmzYuInsuMUcJX4jAAAD IP: 192.168.200.106
새로운 WebSocket 연결: pmzYuInsuMUcJX4jAAAD
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '2NocLyhv44tmygB2WAuQ6w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:21.665Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
새로운 WebSocket 연결 (화상통신 준비): vj3bhQBiemwCOMaDAAAF
연결 정보: {
  id: 'vj3bhQBiemwCOMaDAAAF',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: vj3bhQBiemwCOMaDAAAF IP: 192.168.200.106
새로운 WebSocket 연결: vj3bhQBiemwCOMaDAAAF
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Y+6yHF7qJmH/+C6uLSV/sw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): u5gx7IdkxMmFEmEVAAAH
연결 정보: {
  id: 'u5gx7IdkxMmFEmEVAAAH',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: u5gx7IdkxMmFEmEVAAAH IP: 192.168.200.106
새로운 WebSocket 연결: u5gx7IdkxMmFEmEVAAAH
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'EUd4g/aK2jA9kbZs5A3b1w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): xw82fZTuQzbMI0JZAAAJ
연결 정보: {
  id: 'xw82fZTuQzbMI0JZAAAJ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: xw82fZTuQzbMI0JZAAAJ IP: 192.168.200.106
새로운 WebSocket 연결: xw82fZTuQzbMI0JZAAAJ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'zx4i0lEDbHedHqhlvujDAA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): EI2RH-SounEUBWhTAAAL
연결 정보: {
  id: 'EI2RH-SounEUBWhTAAAL',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: EI2RH-SounEUBWhTAAAL IP: 192.168.200.106
새로운 WebSocket 연결: EI2RH-SounEUBWhTAAAL
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'v4UZQQvh6C5Q9l2/3SoJUw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): elG9ri_lkqCrNqXSAAAN
연결 정보: {
  id: 'elG9ri_lkqCrNqXSAAAN',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: elG9ri_lkqCrNqXSAAAN IP: 192.168.200.106
새로운 WebSocket 연결: elG9ri_lkqCrNqXSAAAN
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '4vAB4erdE5SXGVWzcF433g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): f3COX8WIGb6W9UfsAAAP
연결 정보: {
  id: 'f3COX8WIGb6W9UfsAAAP',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: f3COX8WIGb6W9UfsAAAP IP: 192.168.200.106
새로운 WebSocket 연결: f3COX8WIGb6W9UfsAAAP
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '2I1NYa9dzOTotY0duYFk6A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'QfRATC9a/tC0LW3G+RoqPw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 9e4a-pEa6qt-2SgVAAAB
연결 정보: {
  id: '9e4a-pEa6qt-2SgVAAAB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 9e4a-pEa6qt-2SgVAAAB IP: 192.168.200.106
새로운 WebSocket 연결: 9e4a-pEa6qt-2SgVAAAB
✅ 데이터베이스 테이블 동기화 완료
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'xGEvEvEVyg//HM1RWp2YkQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): DzpKNO6GHvaAov5zAAAD
연결 정보: {
  id: 'DzpKNO6GHvaAov5zAAAD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DzpKNO6GHvaAov5zAAAD IP: 192.168.200.106
새로운 WebSocket 연결: DzpKNO6GHvaAov5zAAAD
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'h6Gl9TIScN/5cPpAIyNoiA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 13T2-nVonhA-frJVAAAF
연결 정보: {
  id: '13T2-nVonhA-frJVAAAF',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 13T2-nVonhA-frJVAAAF IP: 192.168.200.106
새로운 WebSocket 연결: 13T2-nVonhA-frJVAAAF
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ivQwC1cSkFVDpSH87/b07g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ALPtL-ck6FvBEkcNAAAH
연결 정보: {
  id: 'ALPtL-ck6FvBEkcNAAAH',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ALPtL-ck6FvBEkcNAAAH IP: 192.168.200.108
새로운 WebSocket 연결: ALPtL-ck6FvBEkcNAAAH
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'IrYeSTEumCSw/VkYpiBanw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): V0mbnXzgZqQ4ekvDAAAJ
연결 정보: {
  id: 'V0mbnXzgZqQ4ekvDAAAJ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: V0mbnXzgZqQ4ekvDAAAJ IP: 192.168.200.106
새로운 WebSocket 연결: V0mbnXzgZqQ4ekvDAAAJ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ccBMRtNdyElQdKxCBKdfwQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): UhtvYQ85ftO-9REtAAAL
연결 정보: {
  id: 'UhtvYQ85ftO-9REtAAAL',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: UhtvYQ85ftO-9REtAAAL IP: 192.168.200.106
새로운 WebSocket 연결: UhtvYQ85ftO-9REtAAAL
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'FYeZH5jdqzSjT+a/KhELmA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): zmWwTFgGXn88dayHAAAN
연결 정보: {
  id: 'zmWwTFgGXn88dayHAAAN',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: zmWwTFgGXn88dayHAAAN IP: 192.168.200.106
새로운 WebSocket 연결: zmWwTFgGXn88dayHAAAN
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'PG1IFRF3wluW1daMNeTEfw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): -20i1_ub3VDAIYehAAAP
연결 정보: {
  id: '-20i1_ub3VDAIYehAAAP',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: -20i1_ub3VDAIYehAAAP IP: 192.168.200.106
새로운 WebSocket 연결: -20i1_ub3VDAIYehAAAP
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'PH0PjEl5h+Ng1dJ2bTQ4+Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): nOaS9oiJGk4LucaUAAAR
연결 정보: {
  id: 'nOaS9oiJGk4LucaUAAAR',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: nOaS9oiJGk4LucaUAAAR IP: 192.168.200.106
새로운 WebSocket 연결: nOaS9oiJGk4LucaUAAAR
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'UtOcPOOsWg8+VEVEb/YZfQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 7nnZib0T39vGimDuAAAT
연결 정보: {
  id: '7nnZib0T39vGimDuAAAT',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 7nnZib0T39vGimDuAAAT IP: 192.168.200.106
새로운 WebSocket 연결: 7nnZib0T39vGimDuAAAT
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:23.453Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'GRfUWcjC2htiwxpxxuKS2g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): b3p11x1m5xh6HjriAAAV
연결 정보: {
  id: 'b3p11x1m5xh6HjriAAAV',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: b3p11x1m5xh6HjriAAAV IP: 192.168.200.108
새로운 WebSocket 연결: b3p11x1m5xh6HjriAAAV
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'q0b6E4giqTbSRJkWs139LA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'XOHXBDsP2T8Mw2kp/fe67w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): E7iUsID7ezoQwW-BAAAY
연결 정보: {
  id: 'E7iUsID7ezoQwW-BAAAY',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: E7iUsID7ezoQwW-BAAAY IP: 192.168.200.106
새로운 WebSocket 연결: E7iUsID7ezoQwW-BAAAY
새로운 WebSocket 연결 (화상통신 준비): uzMg5sOH-gCnbu_oAAAZ
연결 정보: {
  id: 'uzMg5sOH-gCnbu_oAAAZ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: uzMg5sOH-gCnbu_oAAAZ IP: 192.168.200.108
새로운 WebSocket 연결: uzMg5sOH-gCnbu_oAAAZ
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:23.635Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ciXMlknQFDfaut3rG7A1rA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): P2lcchK8YkTY5P2IAAAb
연결 정보: {
  id: 'P2lcchK8YkTY5P2IAAAb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: P2lcchK8YkTY5P2IAAAb IP: 192.168.200.108
새로운 WebSocket 연결: P2lcchK8YkTY5P2IAAAb
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'EPiNzIqxjafzCgB+T2izdA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'VSVimj2W9pOs4KQQT/DHvg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Gy-2NGZQLAbD1OlHAAAe
연결 정보: {
  id: 'Gy-2NGZQLAbD1OlHAAAe',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Gy-2NGZQLAbD1OlHAAAe IP: 192.168.200.106
새로운 WebSocket 연결: Gy-2NGZQLAbD1OlHAAAe
새로운 WebSocket 연결 (화상통신 준비): L-Zsxp3MPqvBBYqaAAAf
연결 정보: {
  id: 'L-Zsxp3MPqvBBYqaAAAf',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: L-Zsxp3MPqvBBYqaAAAf IP: 192.168.200.108
새로운 WebSocket 연결: L-Zsxp3MPqvBBYqaAAAf
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:23.785Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'VpQ03YqnVBXc1q8aTLoU/w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 3vGD4lZwlFZMj1tOAAAh
연결 정보: {
  id: '3vGD4lZwlFZMj1tOAAAh',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 3vGD4lZwlFZMj1tOAAAh IP: 192.168.200.108
새로운 WebSocket 연결: 3vGD4lZwlFZMj1tOAAAh
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'jShlzaBV0Dq5e3u9cwCGyA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): vDXmu6lVPZMFV250AAAj
연결 정보: {
  id: 'vDXmu6lVPZMFV250AAAj',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: vDXmu6lVPZMFV250AAAj IP: 192.168.200.108
새로운 WebSocket 연결: vDXmu6lVPZMFV250AAAj
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'xAI0+Q4luWab8y5pKycw3g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): DC8dPXs5C88WBLeTAAAl
연결 정보: {
  id: 'DC8dPXs5C88WBLeTAAAl',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DC8dPXs5C88WBLeTAAAl IP: 192.168.200.108
새로운 WebSocket 연결: DC8dPXs5C88WBLeTAAAl
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'BRskuOchcVr1qDvY9/8Aeg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'HGBrOUDjd7rkiTYzlJ6q9w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): jS1Dt8DdLsrfBY0mAAAo
연결 정보: {
  id: 'jS1Dt8DdLsrfBY0mAAAo',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: jS1Dt8DdLsrfBY0mAAAo IP: 192.168.200.106
새로운 WebSocket 연결: jS1Dt8DdLsrfBY0mAAAo
새로운 WebSocket 연결 (화상통신 준비): rdi0YL5GOZI_B0QFAAAp
연결 정보: {
  id: 'rdi0YL5GOZI_B0QFAAAp',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: rdi0YL5GOZI_B0QFAAAp IP: 192.168.200.108
새로운 WebSocket 연결: rdi0YL5GOZI_B0QFAAAp
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:24.273Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hMeiKrwGShDxbD7H8Ah6DQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
새로운 WebSocket 연결 (화상통신 준비): 9SQjyvMcMTTK1l8hAAAr
연결 정보: {
  id: '9SQjyvMcMTTK1l8hAAAr',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 9SQjyvMcMTTK1l8hAAAr IP: 192.168.200.108
새로운 WebSocket 연결: 9SQjyvMcMTTK1l8hAAAr
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:24.455Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:23.785Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:24.637Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:23.785Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:24.789Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:23.785Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '135MA1KeJOjAmPdrYlCNlQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): xA2WaDxi6C_Wz4h-AAAt
연결 정보: {
  id: 'xA2WaDxi6C_Wz4h-AAAt',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: xA2WaDxi6C_Wz4h-AAAt IP: 192.168.200.108
새로운 WebSocket 연결: xA2WaDxi6C_Wz4h-AAAt
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:18:25.278Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:23.785Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '9e4a-pEa6qt-2SgVAAAB',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: 9e4a-pEa6qt-2SgVAAAB
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'nOaS9oiJGk4LucaUAAAR',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: nOaS9oiJGk4LucaUAAAR
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '-20i1_ub3VDAIYehAAAP',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: -20i1_ub3VDAIYehAAAP
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'zmWwTFgGXn88dayHAAAN',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: zmWwTFgGXn88dayHAAAN
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'UhtvYQ85ftO-9REtAAAL',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: UhtvYQ85ftO-9REtAAAL
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'V0mbnXzgZqQ4ekvDAAAJ',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: V0mbnXzgZqQ4ekvDAAAJ
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '13T2-nVonhA-frJVAAAF',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: 13T2-nVonhA-frJVAAAF
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'DzpKNO6GHvaAov5zAAAD',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: DzpKNO6GHvaAov5zAAAD
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'jS1Dt8DdLsrfBY0mAAAo',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: jS1Dt8DdLsrfBY0mAAAo
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Gy-2NGZQLAbD1OlHAAAe',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: Gy-2NGZQLAbD1OlHAAAe
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'E7iUsID7ezoQwW-BAAAY',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
WebSocket 연결 해제: E7iUsID7ezoQwW-BAAAY
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '7nnZib0T39vGimDuAAAT',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:27 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:27.415Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 7nnZib0T39vGimDuAAAT
2025-09-08T09:29:27.692Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.695Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.696Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.699Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:29:27.739Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.740Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.744Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.747Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.754Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:27.756Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:27.760Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
2025-09-08T09:29:27.774Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'sAu2KOcQgJZ1fDS6rgs0bQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:29:27.794Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:27.825Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): yavBdSCec-YP5CkLAAAv
연결 정보: {
  id: 'yavBdSCec-YP5CkLAAAv',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: yavBdSCec-YP5CkLAAAv IP: 192.168.200.106
새로운 WebSocket 연결: yavBdSCec-YP5CkLAAAv
2025-09-08T09:29:27.828Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:27.843Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:27.868Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'HQ7cIaLvDW6qlOojL2HF3Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:29:27.871Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): 4I78-CqR0fDaVTG3AAAx
연결 정보: {
  id: '4I78-CqR0fDaVTG3AAAx',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 4I78-CqR0fDaVTG3AAAx IP: 192.168.200.106
새로운 WebSocket 연결: 4I78-CqR0fDaVTG3AAAx
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:27.886Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:27.889Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:28.888Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:27.889Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:28.893Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:27.889Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'yavBdSCec-YP5CkLAAAv',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:31 PM'
}
WebSocket 연결 해제: yavBdSCec-YP5CkLAAAv
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '4I78-CqR0fDaVTG3AAAx',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:31 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:31.369Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 4I78-CqR0fDaVTG3AAAx
2025-09-08T09:29:44.333Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:44.336Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:44.347Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:29:44.371Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:29:44.382Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:44.382Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:44.384Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:44.386Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0A196Jz8Th7olDgh4ik4NQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): PPdC__p2ciOVFgcFAAAz
연결 정보: {
  id: 'PPdC__p2ciOVFgcFAAAz',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: PPdC__p2ciOVFgcFAAAz IP: 192.168.200.106
새로운 WebSocket 연결: PPdC__p2ciOVFgcFAAAz
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:44.422Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:44.431Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:44.437Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'kvsr7gyjOZQqhxQPvJrodw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:29:44.439Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): vTeVur1cm671YaW4AAA1
연결 정보: {
  id: 'vTeVur1cm671YaW4AAA1',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: vTeVur1cm671YaW4AAA1 IP: 192.168.200.106
새로운 WebSocket 연결: vTeVur1cm671YaW4AAA1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:44.461Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:44.464Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:29:44.467Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:45.462Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:44.464Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:45.467Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:44.464Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'PPdC__p2ciOVFgcFAAAz',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:45 PM'
}
WebSocket 연결 해제: PPdC__p2ciOVFgcFAAAz
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'vTeVur1cm671YaW4AAA1',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:29:45 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:45.506Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: vTeVur1cm671YaW4AAA1
2025-09-08T09:29:45.583Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:29:45.592Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:29:45.603Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:29:45.604Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:45.606Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:45.607Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'mpKdSaWBxs6iWv3MYunFoA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): nrMTFw4YlcWrhkNbAAA3
연결 정보: {
  id: 'nrMTFw4YlcWrhkNbAAA3',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: nrMTFw4YlcWrhkNbAAA3 IP: 192.168.200.106
새로운 WebSocket 연결: nrMTFw4YlcWrhkNbAAA3
2025-09-08T09:29:45.636Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:29:45.639Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:29:45.655Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'LRgisTAkXxeJh7ibLu4DFQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 7bGQJ4NrQGofRat0AAA5
연결 정보: {
  id: '7bGQJ4NrQGofRat0AAA5',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 7bGQJ4NrQGofRat0AAA5 IP: 192.168.200.106
새로운 WebSocket 연결: 7bGQJ4NrQGofRat0AAA5
2025-09-08T09:29:45.677Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:45.683Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:45.684Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:46.684Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:45.684Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:29:46.690Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:45.684Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T09:30:33.714Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.717Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.731Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.745Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:30:33.783Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.784Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.784Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.787Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:30:33.789Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:30:33.791Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hB+DWJ0Pi9jk1rg72YXNBw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:30:33.809Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.816Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
새로운 WebSocket 연결 (화상통신 준비): ZLxBgnsZ8ZyZIgEhAAA7
연결 정보: {
  id: 'ZLxBgnsZ8ZyZIgEhAAA7',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ZLxBgnsZ8ZyZIgEhAAA7 IP: 192.168.200.106
새로운 WebSocket 연결: ZLxBgnsZ8ZyZIgEhAAA7
2025-09-08T09:30:33.818Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:30:33.822Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Io/49re9KkO13TmFo1TqzA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:30:33.867Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:30:33.875Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): Tcc8YzPh4kmYSAD9AAA9
연결 정보: {
  id: 'Tcc8YzPh4kmYSAD9AAA9',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Tcc8YzPh4kmYSAD9AAA9 IP: 192.168.200.106
새로운 WebSocket 연결: Tcc8YzPh4kmYSAD9AAA9
2025-09-08T09:30:33.889Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:30:33.892Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:33.897Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Tcc8YzPh4kmYSAD9AAA9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:45.684Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:33.900Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:33.902Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Tcc8YzPh4kmYSAD9AAA9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:45.684Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:33.905Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:33.907Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Tcc8YzPh4kmYSAD9AAA9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:29:45.684Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔄 같은 IP에서 재연결: whl19810312 (1) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '7bGQJ4NrQGofRat0AAA5',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:30:33 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:33.918Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 7bGQJ4NrQGofRat0AAA5
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:33.919Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:33.936Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
WebSocket 인증 성공: 1 whl19810312
2025-09-08T09:30:34.064Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.071Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.076Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:30:34.091Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:30:34.116Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.124Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.148Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.158Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:30:34.163Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T09:30:34.194Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:30:34.197Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.197Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T09:30:34.230Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'AH8uJLEnolOaVj86b5SJgQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:30:34.243Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '/IQhdFh/0HgBisWjDKghSg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): u2jCPHbYd0_S_x6-AABA
연결 정보: {
  id: 'u2jCPHbYd0_S_x6-AABA',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: u2jCPHbYd0_S_x6-AABA IP: 192.168.200.108
새로운 WebSocket 연결: u2jCPHbYd0_S_x6-AABA
2025-09-08T09:30:34.385Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.398Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T09:30:34.400Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T09:30:34.415Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): 9isr41HOygKbausEAABB
연결 정보: {
  id: '9isr41HOygKbausEAABB',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 9isr41HOygKbausEAABB IP: 192.168.200.108
새로운 WebSocket 연결: 9isr41HOygKbausEAABB
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:34.921Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:34.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:34.931Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:34.938Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:34.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:34.946Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: uzMg5sOH-gCnbu_oAAAZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.403Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=9isr41HOygKbausEAABB
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:18:24.273Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 같은 IP에서 재연결: test1 (2) - 기존 연결 대체
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'uzMg5sOH-gCnbu_oAAAZ',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:30:50 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.442Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: uzMg5sOH-gCnbu_oAAAZ
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.445Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.454Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.651Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:50.657Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.661Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:50.662Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.667Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.670Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.882Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:50.902Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.905Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:30:50.912Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:50.944Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:50.954Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:51.447Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:51.456Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:30:51.559Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:30:51.563Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:33.936Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:30:50.454Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 2개 소켓
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: Tcc8YzPh4kmYSAD9AAA9
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 9isr41HOygKbausEAABB
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 9isr41HOygKbausEAABB
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 9isr41HOygKbausEAABB
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: Tcc8YzPh4kmYSAD9AAA9
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: Tcc8YzPh4kmYSAD9AAA9
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: Tcc8YzPh4kmYSAD9AAA9
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'njjBNxDlg1/tY1cVfNTz4g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '4YdGI1zy/5EKcGuD5w7OPg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 8QDGkEHXUd_Sohe8AAAC
연결 정보: {
  id: '8QDGkEHXUd_Sohe8AAAC',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 8QDGkEHXUd_Sohe8AAAC IP: 192.168.200.106
새로운 WebSocket 연결: 8QDGkEHXUd_Sohe8AAAC
새로운 WebSocket 연결 (화상통신 준비): GM8bhUH3S3z26SHnAAAD
연결 정보: {
  id: 'GM8bhUH3S3z26SHnAAAD',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: GM8bhUH3S3z26SHnAAAD IP: 192.168.200.108
새로운 WebSocket 연결: GM8bhUH3S3z26SHnAAAD
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Suu3F63lULOmkeu2r6HjuQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): DLTTHA9zAjxSWzLQAAAF
연결 정보: {
  id: 'DLTTHA9zAjxSWzLQAAAF',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DLTTHA9zAjxSWzLQAAAF IP: 192.168.200.108
새로운 WebSocket 연결: DLTTHA9zAjxSWzLQAAAF
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Ixgyi9/KIF/Dz90yzcm7Aw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'EApiBhLWesMOxPwDGJL1BA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ZRpS3RwN2CtKaACfAAAI
연결 정보: {
  id: 'ZRpS3RwN2CtKaACfAAAI',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ZRpS3RwN2CtKaACfAAAI IP: 192.168.200.106
새로운 WebSocket 연결: ZRpS3RwN2CtKaACfAAAI
새로운 WebSocket 연결 (화상통신 준비): uEY_1BbTEzhowo6yAAAJ
연결 정보: {
  id: 'uEY_1BbTEzhowo6yAAAJ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: uEY_1BbTEzhowo6yAAAJ IP: 192.168.200.108
새로운 WebSocket 연결: uEY_1BbTEzhowo6yAAAJ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ZiCODXdJqJQqhdVAVL5JPQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:08.241Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
새로운 WebSocket 연결 (화상통신 준비): XW9e_PlK7CGTXUhbAAAL
연결 정보: {
  id: 'XW9e_PlK7CGTXUhbAAAL',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: XW9e_PlK7CGTXUhbAAAL IP: 192.168.200.108
새로운 WebSocket 연결: XW9e_PlK7CGTXUhbAAAL
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'xZOn0M3fcjxaIO49HAgChw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): jSu6Q5i4Fik72QRaAAAN
연결 정보: {
  id: 'jSu6Q5i4Fik72QRaAAAN',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: jSu6Q5i4Fik72QRaAAAN IP: 192.168.200.108
새로운 WebSocket 연결: jSu6Q5i4Fik72QRaAAAN
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 't0vx85GvfWDfeHqACh47xg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '+UjZ+lQczgFBcMcdEQ0KlA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): DfQp0isB2Sr9wPpuAAAQ
연결 정보: {
  id: 'DfQp0isB2Sr9wPpuAAAQ',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: DfQp0isB2Sr9wPpuAAAQ IP: 192.168.200.106
새로운 WebSocket 연결: DfQp0isB2Sr9wPpuAAAQ
새로운 WebSocket 연결 (화상통신 준비): lC0edPtGVeMryzG-AAAR
연결 정보: {
  id: 'lC0edPtGVeMryzG-AAAR',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: lC0edPtGVeMryzG-AAAR IP: 192.168.200.108
새로운 WebSocket 연결: lC0edPtGVeMryzG-AAAR
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:08.406Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:08.410Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 인증 성공: 1 whl19810312
✅ 데이터베이스 테이블 동기화 완료
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'jXzMIT6KioKb0n6r8qqxiA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): sbooYf3H6iGqTkuPAAAT
연결 정보: {
  id: 'sbooYf3H6iGqTkuPAAAT',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: sbooYf3H6iGqTkuPAAAT IP: 192.168.200.108
새로운 WebSocket 연결: sbooYf3H6iGqTkuPAAAT
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'qthMK6O4tOOwjpQyXTyUbA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): mGGbRwmmYQj_A-uhAAAV
연결 정보: {
  id: 'mGGbRwmmYQj_A-uhAAAV',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: mGGbRwmmYQj_A-uhAAAV IP: 192.168.200.108
새로운 WebSocket 연결: mGGbRwmmYQj_A-uhAAAV
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '+uvJMrIBXtSjUEGQG+sTIQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): S28GxVqudWNeJkoVAAAX
연결 정보: {
  id: 'S28GxVqudWNeJkoVAAAX',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: S28GxVqudWNeJkoVAAAX IP: 192.168.200.108
새로운 WebSocket 연결: S28GxVqudWNeJkoVAAAX
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'A4Dj3dD28V6Sst3or475Dg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): CCJjRtPc_X6yz0upAAAZ
연결 정보: {
  id: 'CCJjRtPc_X6yz0upAAAZ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: CCJjRtPc_X6yz0upAAAZ IP: 192.168.200.108
새로운 WebSocket 연결: CCJjRtPc_X6yz0upAAAZ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'q6ZWePJyHFMSqOGpT9taaw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): QQjDy89iscpCQQl4AAAb
연결 정보: {
  id: 'QQjDy89iscpCQQl4AAAb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QQjDy89iscpCQQl4AAAb IP: 192.168.200.108
새로운 WebSocket 연결: QQjDy89iscpCQQl4AAAb
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:08.770Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ZSgil+D0bWqlxAaqRX5E0w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): zpMwNMfMVfchWWOXAAAd
연결 정보: {
  id: 'zpMwNMfMVfchWWOXAAAd',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: zpMwNMfMVfchWWOXAAAd IP: 192.168.200.108
새로운 WebSocket 연결: zpMwNMfMVfchWWOXAAAd
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server/index.js`[39m
이메일 환경변수가 설정되지 않았습니다. EMAIL_USER와 EMAIL_PASS를 설정해주세요.
🎥 화상통신 최적화 서버 시작!
🔒 HTTPS 서버가 포트 7000에서 실행 중입니다.
LAN 접속: https://192.168.200.106:7000
WebSocket 접속: wss://192.168.200.106:7000
WebRTC 화상통신: 지원됨
카메라/마이크: HTTPS 환경에서 활성화
✅ PostgreSQL 데이터베이스 연결 성공
📊 데이터베이스에서 입실 중인 사용자 3명 로드
📊 사용자 입실 상태 복원: test2 → 맵 3
📊 사용자 입실 상태 복원: whl19810312 → 맵 3
📊 사용자 입실 상태 복원: test1 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'aHzpJjINyhegojWrbVM67A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): mbGH1rgrUE4F5RmsAAAB
연결 정보: {
  id: 'mbGH1rgrUE4F5RmsAAAB',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: mbGH1rgrUE4F5RmsAAAB IP: 192.168.200.108
새로운 WebSocket 연결: mbGH1rgrUE4F5RmsAAAB
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0UMQLToJAEIGj4JH7P61uw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): JXeuNV5_GNrXKIA6AAAD
연결 정보: {
  id: 'JXeuNV5_GNrXKIA6AAAD',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: JXeuNV5_GNrXKIA6AAAD IP: 192.168.200.108
새로운 WebSocket 연결: JXeuNV5_GNrXKIA6AAAD
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Tfv+O9TaKnB9egoExh7rtA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'OBK2oGUShOCjDDHQCshXpw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): RuCoE4l4Zb8ncsrqAAAG
연결 정보: {
  id: 'RuCoE4l4Zb8ncsrqAAAG',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: RuCoE4l4Zb8ncsrqAAAG IP: 192.168.200.106
새로운 WebSocket 연결: RuCoE4l4Zb8ncsrqAAAG
새로운 WebSocket 연결 (화상통신 준비): NSsDkNUuE1GTT9jkAAAH
연결 정보: {
  id: 'NSsDkNUuE1GTT9jkAAAH',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: NSsDkNUuE1GTT9jkAAAH IP: 192.168.200.108
새로운 WebSocket 연결: NSsDkNUuE1GTT9jkAAAH
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:09.891Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0RCGp3d6fX2KgNvAOHnfIw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Ew86QNixIyqL1jJ6AAAJ
연결 정보: {
  id: 'Ew86QNixIyqL1jJ6AAAJ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Ew86QNixIyqL1jJ6AAAJ IP: 192.168.200.108
새로운 WebSocket 연결: Ew86QNixIyqL1jJ6AAAJ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'QWN5TVlys2lO/dqGP5ef1g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 23psVJfJJqwqtkNXAAAL
연결 정보: {
  id: '23psVJfJJqwqtkNXAAAL',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 23psVJfJJqwqtkNXAAAL IP: 192.168.200.106
새로운 WebSocket 연결: 23psVJfJJqwqtkNXAAAL
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:09.991Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:10.007Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'DBT0pjWCBpptfOeJXUQPxQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): dDiDaitlqLVEgLsSAAAN
연결 정보: {
  id: 'dDiDaitlqLVEgLsSAAAN',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: dDiDaitlqLVEgLsSAAAN IP: 192.168.200.108
새로운 WebSocket 연결: dDiDaitlqLVEgLsSAAAN
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'p6z6MZ5JLPthLt4QmNCXKg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): fF9yWcWx5qwKIvnrAAAP
연결 정보: {
  id: 'fF9yWcWx5qwKIvnrAAAP',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: fF9yWcWx5qwKIvnrAAAP IP: 192.168.200.108
새로운 WebSocket 연결: fF9yWcWx5qwKIvnrAAAP
✅ 데이터베이스 테이블 동기화 완료
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'WUk+aK3js10arSMTnJW8Rw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): XOoOXUn5j67AHB8mAAAR
연결 정보: {
  id: 'XOoOXUn5j67AHB8mAAAR',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: XOoOXUn5j67AHB8mAAAR IP: 192.168.200.108
새로운 WebSocket 연결: XOoOXUn5j67AHB8mAAAR
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'q38NdHubTnXqvrrjcSGexA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'yEYfivlNFX20kboahNB/VA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 1aEx82Uj0lBq93O9AAAU
연결 정보: {
  id: '1aEx82Uj0lBq93O9AAAU',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 1aEx82Uj0lBq93O9AAAU IP: 192.168.200.106
새로운 WebSocket 연결: 1aEx82Uj0lBq93O9AAAU
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:10.245Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
새로운 WebSocket 연결 (화상통신 준비): cK0hta9a3CVFC2h1AAAV
연결 정보: {
  id: 'cK0hta9a3CVFC2h1AAAV',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: cK0hta9a3CVFC2h1AAAV IP: 192.168.200.108
새로운 WebSocket 연결: cK0hta9a3CVFC2h1AAAV
WebSocket 인증 성공: 1 whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '5aoKyI4NSQ/9Qh2UKsMd0A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): QXOleUT5qa6d35Y5AAAX
연결 정보: {
  id: 'QXOleUT5qa6d35Y5AAAX',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QXOleUT5qa6d35Y5AAAX IP: 192.168.200.108
새로운 WebSocket 연결: QXOleUT5qa6d35Y5AAAX
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0zDa5qL3xefA06w9IBG5Kg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 3gaSHHFXAZTdRsd4AAAZ
연결 정보: {
  id: '3gaSHHFXAZTdRsd4AAAZ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 3gaSHHFXAZTdRsd4AAAZ IP: 192.168.200.108
새로운 WebSocket 연결: 3gaSHHFXAZTdRsd4AAAZ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Di2yeiDwg1TScyW0CpkSQg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): HuNvI9DeByIrr77wAAAb
연결 정보: {
  id: 'HuNvI9DeByIrr77wAAAb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: HuNvI9DeByIrr77wAAAb IP: 192.168.200.108
새로운 WebSocket 연결: HuNvI9DeByIrr77wAAAb
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'c/G8l8Qp8KUiMmJ3c+37+w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 6byM8kzSLIssdXbNAAAd
연결 정보: {
  id: '6byM8kzSLIssdXbNAAAd',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 6byM8kzSLIssdXbNAAAd IP: 192.168.200.108
새로운 WebSocket 연결: 6byM8kzSLIssdXbNAAAd
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:10.894Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:10.907Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3에 소켓이 없음
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:10.913Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:10.992Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:11.011Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:11.084Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:11.093Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:11.106Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:11.112Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:11.249Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:11.255Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:11.260Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.245Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: RuCoE4l4Zb8ncsrqAAAG
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: RuCoE4l4Zb8ncsrqAAAG
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: RuCoE4l4Zb8ncsrqAAAG
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'RuCoE4l4Zb8ncsrqAAAG',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:31:13 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:13.941Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: RuCoE4l4Zb8ncsrqAAAG
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '23psVJfJJqwqtkNXAAAL',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:31:13 PM'
}
WebSocket 연결 해제: 23psVJfJJqwqtkNXAAAL
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '1aEx82Uj0lBq93O9AAAU',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:31:13 PM'
}
WebSocket 연결 해제: 1aEx82Uj0lBq93O9AAAU
2025-09-08T09:31:14.255Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.256Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.258Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.260Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:31:14.280Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.281Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.296Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.297Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.301Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:31:14.303Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.307Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:31:14.316Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hyG+ADDpDr4ONIfeNPDTbQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:31:14.335Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:31:14.351Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): ocUOdmzU3k_mVmuEAAAf
연결 정보: {
  id: 'ocUOdmzU3k_mVmuEAAAf',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ocUOdmzU3k_mVmuEAAAf IP: 192.168.200.106
새로운 WebSocket 연결: ocUOdmzU3k_mVmuEAAAf
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T09:31:14.380Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.381Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:31:14.397Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:31:14.399Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'wcJHJYQEH5qc5poqAxPOGQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
새로운 WebSocket 연결 (화상통신 준비): mocwzpE5a6nsx8o_AAAh
연결 정보: {
  id: 'mocwzpE5a6nsx8o_AAAh',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: mocwzpE5a6nsx8o_AAAh IP: 192.168.200.106
새로운 WebSocket 연결: mocwzpE5a6nsx8o_AAAh
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:31:14.419Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=mocwzpE5a6nsx8o_AAAh
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:14.422Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:31:14.424Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=mocwzpE5a6nsx8o_AAAh
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:14.426Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:14.428Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=mocwzpE5a6nsx8o_AAAh
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:14.435Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:14.442Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
WebSocket 인증 성공: 1 whl19810312
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:15.437Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:15.443Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:15.447Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:15.450Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:31:15.460Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:31:15.463Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T09:32:02.575Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.583Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:02.587Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.593Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:02.656Z - OPTIONS /api/maps/3 from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.657Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.676Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.677Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.706Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:02.708Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:02.726Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:02.727Z - GET /api/maps/3 from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:02.729Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:02.740Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': '8BpIwNkFu1h7gphPYL8b1Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Y9NzZ6fVs1ghVJ-0AAAj
연결 정보: {
  id: 'Y9NzZ6fVs1ghVJ-0AAAj',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Y9NzZ6fVs1ghVJ-0AAAj IP: 192.168.200.102
새로운 WebSocket 연결: Y9NzZ6fVs1ghVJ-0AAAj
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': '0yvKcZ0eCwtZawlA7ryBvw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): VZEBBf4QUOyidFx5AAAl
연결 정보: {
  id: 'VZEBBf4QUOyidFx5AAAl',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: VZEBBf4QUOyidFx5AAAl IP: 192.168.200.102
새로운 WebSocket 연결: VZEBBf4QUOyidFx5AAAl
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'VZEBBf4QUOyidFx5AAAl',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:02 PM'
}
WebSocket 연결 해제: VZEBBf4QUOyidFx5AAAl
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Y9NzZ6fVs1ghVJ-0AAAj',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:04 PM'
}
WebSocket 연결 해제: Y9NzZ6fVs1ghVJ-0AAAj
2025-09-08T09:32:04.604Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:04.610Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:04.679Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:04.682Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:04.687Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:04.694Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:04.695Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:04.706Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'pv09CgMKwrc/SkjzUik+QQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): _conH_jfl_zIZxIuAAAn
연결 정보: {
  id: '_conH_jfl_zIZxIuAAAn',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: _conH_jfl_zIZxIuAAAn IP: 192.168.200.102
새로운 WebSocket 연결: _conH_jfl_zIZxIuAAAn
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'IzvKIrwdWq5Vhx5lqmzHwA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): KINPdheJfXimSoKMAAAp
연결 정보: {
  id: 'KINPdheJfXimSoKMAAAp',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: KINPdheJfXimSoKMAAAp IP: 192.168.200.102
새로운 WebSocket 연결: KINPdheJfXimSoKMAAAp
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'KINPdheJfXimSoKMAAAp',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:04 PM'
}
WebSocket 연결 해제: KINPdheJfXimSoKMAAAp
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🏓 Ping 전송 완료: 2개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '_conH_jfl_zIZxIuAAAn',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:23 PM'
}
WebSocket 연결 해제: _conH_jfl_zIZxIuAAAn
2025-09-08T09:32:23.897Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.905Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.911Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:23.922Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:23.931Z - OPTIONS /api/maps/waiting-r from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.941Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.943Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.954Z - GET /api/maps/waiting-r from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:23.956Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.967Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:23.968Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:23.979Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:23.984Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:23.991Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'SxFXW7rfUep/PIL+uVScTw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): CkuwJ4ULQY4m7ujyAAAr
연결 정보: {
  id: 'CkuwJ4ULQY4m7ujyAAAr',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: CkuwJ4ULQY4m7ujyAAAr IP: 192.168.200.102
새로운 WebSocket 연결: CkuwJ4ULQY4m7ujyAAAr
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'JoR9AgRFsCfNstxXOu1+QQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 6kVh9SeBolTj05kCAAAt
연결 정보: {
  id: '6kVh9SeBolTj05kCAAAt',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 6kVh9SeBolTj05kCAAAt IP: 192.168.200.102
새로운 WebSocket 연결: 6kVh9SeBolTj05kCAAAt
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '6kVh9SeBolTj05kCAAAt',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:24 PM'
}
WebSocket 연결 해제: 6kVh9SeBolTj05kCAAAt
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'CkuwJ4ULQY4m7ujyAAAr',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:25 PM'
}
WebSocket 연결 해제: CkuwJ4ULQY4m7ujyAAAr
2025-09-08T09:32:25.825Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:25.830Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:25.847Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:25.851Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:25.854Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:25.856Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:25.862Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:25.867Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'F7yTvT/MGxPYvekMEEEwVw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ut6R9CUTY-Y3MU2yAAAv
연결 정보: {
  id: 'ut6R9CUTY-Y3MU2yAAAv',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ut6R9CUTY-Y3MU2yAAAv IP: 192.168.200.102
새로운 WebSocket 연결: ut6R9CUTY-Y3MU2yAAAv
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'Y4doI78BOEGJMWDK9J24ww==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): nXANCyYLBcMJwbfZAAAx
연결 정보: {
  id: 'nXANCyYLBcMJwbfZAAAx',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: nXANCyYLBcMJwbfZAAAx IP: 192.168.200.102
새로운 WebSocket 연결: nXANCyYLBcMJwbfZAAAx
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'nXANCyYLBcMJwbfZAAAx',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:25 PM'
}
WebSocket 연결 해제: nXANCyYLBcMJwbfZAAAx
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ut6R9CUTY-Y3MU2yAAAv',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:29 PM'
}
WebSocket 연결 해제: ut6R9CUTY-Y3MU2yAAAv
2025-09-08T09:32:29.435Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.436Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.442Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:29.447Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:29.463Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.466Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.467Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.473Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.476Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.477Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:29.478Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:29.485Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:29.491Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:29.492Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:29.498Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:29.504Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'B6naZevfRvvTpb0OC5RrOA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): KntZF-YfOCPC-bQfAAAz
연결 정보: {
  id: 'KntZF-YfOCPC-bQfAAAz',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: KntZF-YfOCPC-bQfAAAz IP: 192.168.200.102
새로운 WebSocket 연결: KntZF-YfOCPC-bQfAAAz
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'exAVYmv+Zj9bmQdxpY6hTg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 3JE44TOc_kopitpgAAA1
연결 정보: {
  id: '3JE44TOc_kopitpgAAA1',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 3JE44TOc_kopitpgAAA1 IP: 192.168.200.102
새로운 WebSocket 연결: 3JE44TOc_kopitpgAAA1
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '3JE44TOc_kopitpgAAA1',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:29 PM'
}
WebSocket 연결 해제: 3JE44TOc_kopitpgAAA1
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🏓 Ping 전송 완료: 2개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'KntZF-YfOCPC-bQfAAAz',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:44 PM'
}
WebSocket 연결 해제: KntZF-YfOCPC-bQfAAAz
2025-09-08T09:32:45.028Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:45.040Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:45.046Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:45.057Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:45.064Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:45.073Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:45.074Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:45.083Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:45.089Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:45.092Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:32:45.108Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'kFV8LQrw0Z24Iw+r7juFog==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ik4--mQMW9hZKb4XAAA3
연결 정보: {
  id: 'ik4--mQMW9hZKb4XAAA3',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ik4--mQMW9hZKb4XAAA3 IP: 192.168.200.102
새로운 WebSocket 연결: ik4--mQMW9hZKb4XAAA3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'MczEsPg1CZvROhATvRO6Tw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 5PZ2YX6tuXgg3IzBAAA5
연결 정보: {
  id: '5PZ2YX6tuXgg3IzBAAA5',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 5PZ2YX6tuXgg3IzBAAA5 IP: 192.168.200.102
새로운 WebSocket 연결: 5PZ2YX6tuXgg3IzBAAA5
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '5PZ2YX6tuXgg3IzBAAA5',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:45 PM'
}
WebSocket 연결 해제: 5PZ2YX6tuXgg3IzBAAA5
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ik4--mQMW9hZKb4XAAA3',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:46 PM'
}
WebSocket 연결 해제: ik4--mQMW9hZKb4XAAA3
2025-09-08T09:32:46.631Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:46.636Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:32:46.654Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:46.656Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:46.660Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:46.663Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:46.666Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:32:46.671Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'vucEv5hEtFs3PqHRj1mLMA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): FMa-6Zbcm-GjlPp4AAA7
연결 정보: {
  id: 'FMa-6Zbcm-GjlPp4AAA7',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: FMa-6Zbcm-GjlPp4AAA7 IP: 192.168.200.102
새로운 WebSocket 연결: FMa-6Zbcm-GjlPp4AAA7
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': '3fyRcOx5EtiOKfjsceNf2Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 7uRgmgDpovXIhDdjAAA9
연결 정보: {
  id: '7uRgmgDpovXIhDdjAAA9',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 7uRgmgDpovXIhDdjAAA9 IP: 192.168.200.102
새로운 WebSocket 연결: 7uRgmgDpovXIhDdjAAA9
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '7uRgmgDpovXIhDdjAAA9',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:32:46 PM'
}
WebSocket 연결 해제: 7uRgmgDpovXIhDdjAAA9
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-09-08T09:33:06.001Z - GET / from 192.168.200.102 (HTTPS: true)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'FMa-6Zbcm-GjlPp4AAA7',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:06 PM'
}
WebSocket 연결 해제: FMa-6Zbcm-GjlPp4AAA7
🏓 Ping 전송 완료: 2개 소켓
2025-09-08T09:33:15.121Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.127Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.129Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:33:15.138Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
현재 사용자 조회 오류: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at /home/wh/working/working/mini-area/server/routes/auth.js:311:25
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/wh/working/working/mini-area/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/wh/working/working/mini-area/node_modules/express/lib/router/layer.js:95:5)
    at /home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/wh/working/working/mini-area/node_modules/express/lib/router/index.js:346:12)
2025-09-08T09:33:15.154Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.154Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.170Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.171Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:15.191Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:33:15.192Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:33:15.205Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
2025-09-08T09:33:15.214Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 오류: invalid signature
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': '25iwnOoylpfd6+Up5ZW8ZA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Fttjjt8DZkWRe4hzAAA_
연결 정보: {
  id: 'Fttjjt8DZkWRe4hzAAA_',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Fttjjt8DZkWRe4hzAAA_ IP: 192.168.200.102
새로운 WebSocket 연결: Fttjjt8DZkWRe4hzAAA_
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'dniWDFWZhrfiviad8+woJg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): y4L14uWa2XhqjCX3AABB
연결 정보: {
  id: 'y4L14uWa2XhqjCX3AABB',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: y4L14uWa2XhqjCX3AABB IP: 192.168.200.102
새로운 WebSocket 연결: y4L14uWa2XhqjCX3AABB
❌ 인증 실패: invalid signature
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'y4L14uWa2XhqjCX3AABB',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:15 PM'
}
WebSocket 연결 해제: y4L14uWa2XhqjCX3AABB
WebSocket 인증 실패: JsonWebTokenError: invalid signature
    at /home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:171:19
    at getSecret (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:97:14)
    at module.exports [as verify] (/home/wh/working/working/mini-area/node_modules/jsonwebtoken/verify.js:101:10)
    at Socket.<anonymous> (/home/wh/working/working/mini-area/server/websocket/privateAreaHandler.js:19:29)
    at Socket.emit (node:events:530:35)
    at Socket.emitUntyped (/home/wh/working/working/mini-area/node_modules/socket.io/dist/typed-events.js:69:22)
    at /home/wh/working/working/mini-area/node_modules/socket.io/dist/socket.js:697:39
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-09-08T09:33:17.254Z - OPTIONS /api/auth/logout from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:17.261Z - POST /api/auth/logout from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:23.443Z - OPTIONS /api/auth/login from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:23.453Z - POST /api/auth/login from 192.168.200.102 (HTTPS: true)
🔐 로그인 요청: { email: 'test2@test.com', password: '제공됨' }
👤 사용자 조회 결과: ID: 3, Username: test2, EmailVerified: true, IsActive: true
🔑 비밀번호 검증 결과: true
📧 이메일 인증 확인: { emailVerified: true, NODE_ENV: undefined }
✅ 계정 활성화 확인: { isActive: true }
✅ 로그인 성공: { userId: 3, username: 'test2' }
2025-09-08T09:33:23.591Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:23.611Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:23.622Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:33:23.635Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'KqHpk98VQKUKVdVzNB4C0w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): HYU4T4W6LLzAALutAABD
연결 정보: {
  id: 'HYU4T4W6LLzAALutAABD',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: HYU4T4W6LLzAALutAABD IP: 192.168.200.102
새로운 WebSocket 연결: HYU4T4W6LLzAALutAABD
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:23.671Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test2 (3)
WebSocket 인증 성공: 3 test2
2025-09-08T09:33:23.752Z - OPTIONS /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:23.760Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:24.673Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:23.671Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Fttjjt8DZkWRe4hzAAA_',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:24 PM'
}
WebSocket 연결 해제: Fttjjt8DZkWRe4hzAAA_
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'HYU4T4W6LLzAALutAABD',
  userId: 3,
  username: 'test2',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:24 PM'
}
📊 [오프라인] 사용자 상태 변경: test2 (ID: 3)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:24.904Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test2 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🧹 [시스템] 소켓 정리 완료: test2 (3)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: HYU4T4W6LLzAALutAABD
2025-09-08T09:33:25.346Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:25.348Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:25.352Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:33:25.369Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:33:25.385Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:33:25.388Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:33:25.420Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:33:25.436Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'TnZe7+hqUhj1OUlVssggqw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): i878ZUdeDBg68gYYAABF
연결 정보: {
  id: 'i878ZUdeDBg68gYYAABF',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: i878ZUdeDBg68gYYAABF IP: 192.168.200.102
새로운 WebSocket 연결: i878ZUdeDBg68gYYAABF
2025-09-08T09:33:25.487Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'iMPwpRWaLBcGBOArjAqCNw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:33:25.503Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
새로운 WebSocket 연결 (화상통신 준비): cdLAch8uIND6wdUBAABH
연결 정보: {
  id: 'cdLAch8uIND6wdUBAABH',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: cdLAch8uIND6wdUBAABH IP: 192.168.200.102
새로운 WebSocket 연결: cdLAch8uIND6wdUBAABH
2025-09-08T09:33:25.530Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:33:25.539Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:25.561Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 3 test2
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:25.565Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 3 test2
2025-09-08T09:33:25.575Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test2 (3)
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:33:25.611Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:26.563Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:25.565Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:26.570Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:25.565Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'i878ZUdeDBg68gYYAABF',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:26 PM'
}
WebSocket 연결 해제: i878ZUdeDBg68gYYAABF
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'cdLAch8uIND6wdUBAABH',
  userId: 3,
  username: 'test2',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:33:26 PM'
}
📊 [오프라인] 사용자 상태 변경: test2 (ID: 3)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:26.732Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test2 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🧹 [시스템] 소켓 정리 완료: test2 (3)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: cdLAch8uIND6wdUBAABH
2025-09-08T09:33:26.970Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:33:26.985Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:33:27.002Z - OPTIONS /api/maps/3 from 192.168.200.102 (HTTPS: true)
2025-09-08T09:33:27.004Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:33:27.007Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:33:27.009Z - GET /api/maps/3 from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 3 }
Auth 미들웨어 - 인증 성공, 사용자: test2
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'wBz7XmkW02EAJ5v7nGoTzg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 8XjJ47LtQrZterO5AABJ
연결 정보: {
  id: '8XjJ47LtQrZterO5AABJ',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 8XjJ47LtQrZterO5AABJ IP: 192.168.200.102
새로운 WebSocket 연결: 8XjJ47LtQrZterO5AABJ
2025-09-08T09:33:27.094Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:33:27.098Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'F7fiWmlom7Nqk+Tjy3rBUg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:33:27.142Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
새로운 WebSocket 연결 (화상통신 준비): FK0oUCgC1ojNAl2tAABL
연결 정보: {
  id: 'FK0oUCgC1ojNAl2tAABL',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: FK0oUCgC1ojNAl2tAABL IP: 192.168.200.102
새로운 WebSocket 연결: FK0oUCgC1ojNAl2tAABL
2025-09-08T09:33:27.231Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: undefined,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:33:27.239Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=FK0oUCgC1ojNAl2tAABL
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:33:27.244Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:33:27.247Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=FK0oUCgC1ojNAl2tAABL
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:33:27.249Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:27.251Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=FK0oUCgC1ojNAl2tAABL
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: test2
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:27.261Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 3 test2
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
WebSocket 인증 성공: 3 test2
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:27.275Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test2 (3)
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:28.264Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:28.278Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:33:28.293Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:28.296Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:33:28.304Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:33:28.307Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:10.007Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
📡 WebRTC 시그널 수신: offer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: offer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: offer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: answer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Ew86QNixIyqL1jJ6AAAJ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: answer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
⚠️ Ping 타임아웃 감지: test1 (Ew86QNixIyqL1jJ6AAAJ) - 89980ms
🧟 좀비 소켓 정리 시작: test1 (Ew86QNixIyqL1jJ6AAAJ)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Ew86QNixIyqL1jJ6AAAJ',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:39 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:39.443Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: Ew86QNixIyqL1jJ6AAAJ
📊 좀비 정리 - 사용자 오프라인 처리: test1 (방 정보 유지: 3)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:39.446Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
✅ 좀비 소켓 정리 완료: test1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🏓 Ping 전송 완료: 2개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'mbGH1rgrUE4F5RmsAAAB',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:39 PM'
}
WebSocket 연결 해제: mbGH1rgrUE4F5RmsAAAB
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'JXeuNV5_GNrXKIA6AAAD',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:39 PM'
}
WebSocket 연결 해제: JXeuNV5_GNrXKIA6AAAD
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'NSsDkNUuE1GTT9jkAAAH',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:39 PM'
}
WebSocket 연결 해제: NSsDkNUuE1GTT9jkAAAH
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'dDiDaitlqLVEgLsSAAAN',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: dDiDaitlqLVEgLsSAAAN
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'fF9yWcWx5qwKIvnrAAAP',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: fF9yWcWx5qwKIvnrAAAP
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'XOoOXUn5j67AHB8mAAAR',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: XOoOXUn5j67AHB8mAAAR
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'cK0hta9a3CVFC2h1AAAV',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: cK0hta9a3CVFC2h1AAAV
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'QXOleUT5qa6d35Y5AAAX',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: QXOleUT5qa6d35Y5AAAX
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '3gaSHHFXAZTdRsd4AAAZ',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: 3gaSHHFXAZTdRsd4AAAZ
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'HuNvI9DeByIrr77wAAAb',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: HuNvI9DeByIrr77wAAAb
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '6byM8kzSLIssdXbNAAAd',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:34:40 PM'
}
WebSocket 연결 해제: 6byM8kzSLIssdXbNAAAd
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'tpvTTEIGdv5w8ioSyNr23Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): uF5m6CQ7f1Ixy17gAABN
연결 정보: {
  id: 'uF5m6CQ7f1Ixy17gAABN',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: uF5m6CQ7f1Ixy17gAABN IP: 192.168.200.108
새로운 WebSocket 연결: uF5m6CQ7f1Ixy17gAABN
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '+UxnCzUZISzaGYSWDxOJew==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 5VQrO5J6GgFiOIkCAABP
연결 정보: {
  id: '5VQrO5J6GgFiOIkCAABP',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 5VQrO5J6GgFiOIkCAABP IP: 192.168.200.108
새로운 WebSocket 연결: 5VQrO5J6GgFiOIkCAABP
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'etmqk2exapdfzBk50Oq9yg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'NsRz+VuBNzFrFlnhfwNMOA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 5EZI8vVpNpi3T654AABS
연결 정보: {
  id: '5EZI8vVpNpi3T654AABS',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 5EZI8vVpNpi3T654AABS IP: 192.168.200.108
새로운 WebSocket 연결: 5EZI8vVpNpi3T654AABS
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:52.311Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:52.318Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
새로운 WebSocket 연결 (화상통신 준비): lY8eFBN2DDqHZMcNAABT
연결 정보: {
  id: 'lY8eFBN2DDqHZMcNAABT',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: lY8eFBN2DDqHZMcNAABT IP: 192.168.200.108
새로운 WebSocket 연결: lY8eFBN2DDqHZMcNAABT
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'QcuED3VRNISMCMAa2+fMAA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'OJFCHmnrbGlhXqYa4WUB5A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): KhatW_KuOVs8MzsWAABW
연결 정보: {
  id: 'KhatW_KuOVs8MzsWAABW',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: KhatW_KuOVs8MzsWAABW IP: 192.168.200.108
새로운 WebSocket 연결: KhatW_KuOVs8MzsWAABW
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'mrx/NfsBZbUigcRNJU/i6A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): PtbIBF6KTI7cZrhEAABY
연결 정보: {
  id: 'PtbIBF6KTI7cZrhEAABY',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: PtbIBF6KTI7cZrhEAABY IP: 192.168.200.108
새로운 WebSocket 연결: PtbIBF6KTI7cZrhEAABY
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'eX51ro8aueQJWNHVJx1wPA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ynFVKRZa_3sbvnIUAABa
연결 정보: {
  id: 'ynFVKRZa_3sbvnIUAABa',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ynFVKRZa_3sbvnIUAABa IP: 192.168.200.108
새로운 WebSocket 연결: ynFVKRZa_3sbvnIUAABa
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'LyooLHPjMLi8gN7bc75C8g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): QmfjixMSx8pEo8XAAABc
연결 정보: {
  id: 'QmfjixMSx8pEo8XAAABc',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QmfjixMSx8pEo8XAAABc IP: 192.168.200.108
새로운 WebSocket 연결: QmfjixMSx8pEo8XAAABc
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'aQYxIUv9HyzFhyKMgdWQ5Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): HwU-u9ahuhLApLANAABe
연결 정보: {
  id: 'HwU-u9ahuhLApLANAABe',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: HwU-u9ahuhLApLANAABe IP: 192.168.200.108
새로운 WebSocket 연결: HwU-u9ahuhLApLANAABe
새로운 WebSocket 연결 (화상통신 준비): WYwmaI2_GZipQRrxAABf
연결 정보: {
  id: 'WYwmaI2_GZipQRrxAABf',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: WYwmaI2_GZipQRrxAABf IP: 192.168.200.108
새로운 WebSocket 연결: WYwmaI2_GZipQRrxAABf
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'S83EL85fWeOKiim4C5jfMQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): kWwCw72S9Dc3xYclAABh
연결 정보: {
  id: 'kWwCw72S9Dc3xYclAABh',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: kWwCw72S9Dc3xYclAABh IP: 192.168.200.108
새로운 WebSocket 연결: kWwCw72S9Dc3xYclAABh
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'vTbWW1qmaN4k3XwC8PU8DQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): AzCLaJPpZE3x_335AABj
연결 정보: {
  id: 'AzCLaJPpZE3x_335AABj',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: AzCLaJPpZE3x_335AABj IP: 192.168.200.108
새로운 WebSocket 연결: AzCLaJPpZE3x_335AABj
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:53.312Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:34:52.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:53.320Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:34:52.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:34:53.434Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:53.447Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:34:52.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:34:53.466Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:34:53.468Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:34:52.318Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 5VQrO5J6GgFiOIkCAABP
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 5VQrO5J6GgFiOIkCAABP
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 5VQrO5J6GgFiOIkCAABP
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 5VQrO5J6GgFiOIkCAABP
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 5VQrO5J6GgFiOIkCAABP
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '5VQrO5J6GgFiOIkCAABP',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:36:17.175Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 5VQrO5J6GgFiOIkCAABP
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '5EZI8vVpNpi3T654AABS',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: 5EZI8vVpNpi3T654AABS
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'lY8eFBN2DDqHZMcNAABT',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: lY8eFBN2DDqHZMcNAABT
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'KhatW_KuOVs8MzsWAABW',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: KhatW_KuOVs8MzsWAABW
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'PtbIBF6KTI7cZrhEAABY',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: PtbIBF6KTI7cZrhEAABY
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ynFVKRZa_3sbvnIUAABa',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: ynFVKRZa_3sbvnIUAABa
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'QmfjixMSx8pEo8XAAABc',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: QmfjixMSx8pEo8XAAABc
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'HwU-u9ahuhLApLANAABe',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: HwU-u9ahuhLApLANAABe
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'WYwmaI2_GZipQRrxAABf',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: WYwmaI2_GZipQRrxAABf
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'kWwCw72S9Dc3xYclAABh',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: kWwCw72S9Dc3xYclAABh
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'AzCLaJPpZE3x_335AABj',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:36:17 PM'
}
WebSocket 연결 해제: AzCLaJPpZE3x_335AABj
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'gtOBiME85GoiGW7soAzghQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): fOgh8DWrPKSKwH-PAABl
연결 정보: {
  id: 'fOgh8DWrPKSKwH-PAABl',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: fOgh8DWrPKSKwH-PAABl IP: 192.168.200.108
새로운 WebSocket 연결: fOgh8DWrPKSKwH-PAABl
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:36:18.056Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'tJl4owWvxZJR9To301jLaw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): Cg7MOBE2Tx5bHqgtAABn
연결 정보: {
  id: 'Cg7MOBE2Tx5bHqgtAABn',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Cg7MOBE2Tx5bHqgtAABn IP: 192.168.200.108
새로운 WebSocket 연결: Cg7MOBE2Tx5bHqgtAABn
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'YD/wFOY5JSa9nL+7j9rcdw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): SVzSkpPdjviMqcfjAABp
연결 정보: {
  id: 'SVzSkpPdjviMqcfjAABp',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: SVzSkpPdjviMqcfjAABp IP: 192.168.200.108
새로운 WebSocket 연결: SVzSkpPdjviMqcfjAABp
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'u9UgobJ4h/lOBT0dvyR+Rg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): AIOCis-SH3PvQhLsAABr
연결 정보: {
  id: 'AIOCis-SH3PvQhLsAABr',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: AIOCis-SH3PvQhLsAABr IP: 192.168.200.108
새로운 WebSocket 연결: AIOCis-SH3PvQhLsAABr
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'MNqx8UAhPU3HrXZEs5oZMQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): H7lj9in3R2sRBjxLAABt
연결 정보: {
  id: 'H7lj9in3R2sRBjxLAABt',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: H7lj9in3R2sRBjxLAABt IP: 192.168.200.108
새로운 WebSocket 연결: H7lj9in3R2sRBjxLAABt
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'LTzAzWDC+m0GwbYTrpBctg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): IyNq06_BY-MeOpNqAABv
연결 정보: {
  id: 'IyNq06_BY-MeOpNqAABv',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: IyNq06_BY-MeOpNqAABv IP: 192.168.200.108
새로운 WebSocket 연결: IyNq06_BY-MeOpNqAABv
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '/P7yRUje0UifTEEklvxa5g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): XU4ERd3fQz9WKAr1AABx
연결 정보: {
  id: 'XU4ERd3fQz9WKAr1AABx',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: XU4ERd3fQz9WKAr1AABx IP: 192.168.200.108
새로운 WebSocket 연결: XU4ERd3fQz9WKAr1AABx
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'cqefSGhMKypVFcr/b78uZg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): IUBLisLdmBPm7VSRAABz
연결 정보: {
  id: 'IUBLisLdmBPm7VSRAABz',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: IUBLisLdmBPm7VSRAABz IP: 192.168.200.108
새로운 WebSocket 연결: IUBLisLdmBPm7VSRAABz
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hwdiyEvwNNKuvRMHIpTgmQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): zThLDHKZro_VfYVWAAB1
연결 정보: {
  id: 'zThLDHKZro_VfYVWAAB1',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: zThLDHKZro_VfYVWAAB1 IP: 192.168.200.108
새로운 WebSocket 연결: zThLDHKZro_VfYVWAAB1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'traNrp+Bar98buu/zCxkyg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): FMpWH8WuRRVYX0uXAAB3
연결 정보: {
  id: 'FMpWH8WuRRVYX0uXAAB3',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: FMpWH8WuRRVYX0uXAAB3 IP: 192.168.200.108
새로운 WebSocket 연결: FMpWH8WuRRVYX0uXAAB3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:36:19.057Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'rsdgUhb3IqSMO3Jc6N6bqQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:36:19.135Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:36:19.146Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:31:14.442Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
새로운 WebSocket 연결 (화상통신 준비): Su8nPMTlUC9nxmlLAAB5
연결 정보: {
  id: 'Su8nPMTlUC9nxmlLAAB5',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Su8nPMTlUC9nxmlLAAB5 IP: 192.168.200.108
새로운 WebSocket 연결: Su8nPMTlUC9nxmlLAAB5
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mocwzpE5a6nsx8o_AAAh
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ocUOdmzU3k_mVmuEAAAf',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:41:34 PM'
}
WebSocket 연결 해제: ocUOdmzU3k_mVmuEAAAf
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'mocwzpE5a6nsx8o_AAAh',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:41:34 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:34.403Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: mocwzpE5a6nsx8o_AAAh
2025-09-08T09:41:34.694Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.695Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.697Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.699Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:41:34.740Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.741Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.743Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.745Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:41:34.751Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:41:34.766Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'z7z6rh8VYYXzZHzrwkeC0w==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:41:34.770Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:41:34.772Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.773Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): QSSrkdHmNMXfD9AjAAB7
연결 정보: {
  id: 'QSSrkdHmNMXfD9AjAAB7',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: QSSrkdHmNMXfD9AjAAB7 IP: 192.168.200.106
새로운 WebSocket 연결: QSSrkdHmNMXfD9AjAAB7
2025-09-08T09:41:34.776Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'ZpsplTA5qlK/rFWuhIIbHw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:41:34.817Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:34.819Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): iBKCbc6CT9vWiCBpAAB9
연결 정보: {
  id: 'iBKCbc6CT9vWiCBpAAB9',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: iBKCbc6CT9vWiCBpAAB9 IP: 192.168.200.106
새로운 WebSocket 연결: iBKCbc6CT9vWiCBpAAB9
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:41:34.839Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=iBKCbc6CT9vWiCBpAAB9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:34.842Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:41:34.844Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=iBKCbc6CT9vWiCBpAAB9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:34.846Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (1) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:34.849Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=iBKCbc6CT9vWiCBpAAB9
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:41:34.853Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 인증 성공: 1 whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:34.855Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:41:34.860Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:34.890Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:35.858Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:34.890Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:35.865Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:35.867Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:34.890Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:35.891Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:34.890Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:35.901Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:35.905Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:34.890Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: offer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: iBKCbc6CT9vWiCBpAAB9
📡 WebRTC 시그널 전달: answer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: iBKCbc6CT9vWiCBpAAB9
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: iBKCbc6CT9vWiCBpAAB9
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: iBKCbc6CT9vWiCBpAAB9
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'QSSrkdHmNMXfD9AjAAB7',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:41:58 PM'
}
WebSocket 연결 해제: QSSrkdHmNMXfD9AjAAB7
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'iBKCbc6CT9vWiCBpAAB9',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:41:58 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:58.565Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: iBKCbc6CT9vWiCBpAAB9
2025-09-08T09:41:58.946Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:58.946Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:58.948Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:58.950Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:41:58.994Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:58.995Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:58.999Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:59.000Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:41:59.003Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '244VUhLsYnuwXbWq/GAE8A==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:41:59.030Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): mR0xml3wFGbRg1RGAAB_
연결 정보: {
  id: 'mR0xml3wFGbRg1RGAAB_',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: mR0xml3wFGbRg1RGAAB_ IP: 192.168.200.106
새로운 WebSocket 연결: mR0xml3wFGbRg1RGAAB_
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:41:59.055Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:41:59.057Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:59.060Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:41:59.093Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:59.060Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:59.097Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:41:59.101Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:59.060Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:41:59.105Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:41:59.108Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:59.060Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:00.062Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:59.060Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:00.068Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:00.071Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:41:59.060Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: offer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mR0xml3wFGbRg1RGAAB_
📡 WebRTC 시그널 전달: answer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mR0xml3wFGbRg1RGAAB_
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mR0xml3wFGbRg1RGAAB_
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: mR0xml3wFGbRg1RGAAB_
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'mR0xml3wFGbRg1RGAAB_',
  userId: 1,
  username: 'whl19810312',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:04 PM'
}
📊 [오프라인] 사용자 상태 변경: whl19810312 (ID: 1)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:04.214Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: whl19810312 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🧹 [시스템] 소켓 정리 완료: whl19810312 (1)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: mR0xml3wFGbRg1RGAAB_
2025-09-08T09:42:04.479Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.480Z - OPTIONS /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.483Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.485Z - GET /api/auth/user/me from 192.168.200.106 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
👤 현재 사용자 정보 조회: { userId: 1, username: 'whl19810312' }
2025-09-08T09:42:04.512Z - OPTIONS /api/maps/3 from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.512Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.512Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.518Z - OPTIONS /api/maps from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.518Z - OPTIONS /api/characters from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.519Z - GET /api/maps/3 from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:42:04.520Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:42:04.524Z - GET /api/maps from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:42:04.526Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'iqAVjKYM4or9SlZVBefdWg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:42:04.556Z - GET /api/characters from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): hGQHOtORm7yJCNS1AACB
연결 정보: {
  id: 'hGQHOtORm7yJCNS1AACB',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: hGQHOtORm7yJCNS1AACB IP: 192.168.200.106
새로운 WebSocket 연결: hGQHOtORm7yJCNS1AACB
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
2025-09-08T09:42:04.589Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
2025-09-08T09:42:04.593Z - OPTIONS /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'V3Pp+ajnK+aYskzdjN1c8Q==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:42:04.596Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
2025-09-08T09:42:04.599Z - GET /api/user/logged-in-users from 192.168.200.106 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 1
새로운 WebSocket 연결 (화상통신 준비): jHdGak-KqcavWC9ZAACD
연결 정보: {
  id: 'jHdGak-KqcavWC9ZAACD',
  ip: '192.168.200.106',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: jHdGak-KqcavWC9ZAACD IP: 192.168.200.106
새로운 WebSocket 연결: jHdGak-KqcavWC9ZAACD
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:04.609Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=jHdGak-KqcavWC9ZAACD
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
Auth 미들웨어 - 인증 성공, 사용자: whl19810312
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:04.619Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
✅ 인증 성공: whl19810312 (1)
🔄 [온라인] 사용자 이전 입실 상태 복원: whl19810312 (ID: 1) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:04.623Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 1 whl19810312
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to whl19810312 (1)
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:05.621Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: whl19810312 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🚪 whl19810312 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:05.625Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:05.628Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:05.631Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:05.637Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:05.641Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:33:27.275Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:36:18.056Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: offer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: FK0oUCgC1ojNAl2tAABL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: fOgh8DWrPKSKwH-PAABl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: answer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'uF5m6CQ7f1Ixy17gAABN',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: uF5m6CQ7f1Ixy17gAABN
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'fOgh8DWrPKSKwH-PAABl',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:42.888Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: fOgh8DWrPKSKwH-PAABl
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Cg7MOBE2Tx5bHqgtAABn',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: Cg7MOBE2Tx5bHqgtAABn
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'SVzSkpPdjviMqcfjAABp',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: SVzSkpPdjviMqcfjAABp
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'AIOCis-SH3PvQhLsAABr',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: AIOCis-SH3PvQhLsAABr
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'H7lj9in3R2sRBjxLAABt',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: H7lj9in3R2sRBjxLAABt
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'IyNq06_BY-MeOpNqAABv',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: IyNq06_BY-MeOpNqAABv
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'XU4ERd3fQz9WKAr1AABx',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: XU4ERd3fQz9WKAr1AABx
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'IUBLisLdmBPm7VSRAABz',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: IUBLisLdmBPm7VSRAABz
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'zThLDHKZro_VfYVWAAB1',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: zThLDHKZro_VfYVWAAB1
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'FMpWH8WuRRVYX0uXAAB3',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: FMpWH8WuRRVYX0uXAAB3
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Su8nPMTlUC9nxmlLAAB5',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:42 PM'
}
WebSocket 연결 해제: Su8nPMTlUC9nxmlLAAB5
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '8XjJ47LtQrZterO5AABJ',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:43 PM'
}
WebSocket 연결 해제: 8XjJ47LtQrZterO5AABJ
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'FK0oUCgC1ojNAl2tAABL',
  userId: 3,
  username: 'test2',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:42:43 PM'
}
📊 [오프라인] 사용자 상태 변경: test2 (ID: 3)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:43.605Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test2 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🧹 [시스템] 소켓 정리 완료: test2 (3)
📊 [시스템] 현재 사용자 상태:
   온라인: 1명, 오프라인: 2명
   활성 소켓: 1개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: FK0oUCgC1ojNAl2tAABL
2025-09-08T09:42:44.346Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:42:44.352Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:42:44.357Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:42:44.376Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.379Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.389Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:42:44.397Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:42:44.407Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:42:44.420Z - OPTIONS /api/maps/3 from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:42:44.437Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:42:44.446Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:42:44.452Z - GET /api/maps/3 from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:42:44.454Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 3 }
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:42:44.477Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T09:42:44.488Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.489Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'nYBL15TrNqgVn9MGtKmJoQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:42:44.504Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
새로운 WebSocket 연결 (화상통신 준비): p1GDzwLrCAu-tZmLAACF
연결 정보: {
  id: 'p1GDzwLrCAu-tZmLAACF',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: p1GDzwLrCAu-tZmLAACF IP: 192.168.200.102
새로운 WebSocket 연결: p1GDzwLrCAu-tZmLAACF
2025-09-08T09:42:44.525Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:42:44.538Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.538Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test2
2025-09-08T09:42:44.570Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:42:44.573Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.584Z - OPTIONS /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'li4RRPrnYVS9yw2oDfIzOA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:42:44.585Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
2025-09-08T09:42:44.594Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:42:44.597Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test2
새로운 WebSocket 연결 (화상통신 준비): llv1cQKi78olbA6LAACH
연결 정보: {
  id: 'llv1cQKi78olbA6LAACH',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: llv1cQKi78olbA6LAACH IP: 192.168.200.102
새로운 WebSocket 연결: llv1cQKi78olbA6LAACH
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.652Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=llv1cQKi78olbA6LAACH
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:44.655Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.656Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=llv1cQKi78olbA6LAACH
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:44.657Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:44.658Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 1명, 오프라인: 2명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=llv1cQKi78olbA6LAACH
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 1, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:42:44.662Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:42:44.663Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:42:44.665Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:44.666Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 3 test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'lXk4ZPV/aZypOY/MGNJItA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:44.678Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
Auth 미들웨어 - 인증 성공, 사용자: test1
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
새로운 WebSocket 연결 (화상통신 준비): N2o6Cvts2iTaS-7hAACJ
연결 정보: {
  id: 'N2o6Cvts2iTaS-7hAACJ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: N2o6Cvts2iTaS-7hAACJ IP: 192.168.200.108
새로운 WebSocket 연결: N2o6Cvts2iTaS-7hAACJ
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 인증 성공: 3 test2
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '0j2yqgQNbuUjdIEWgTzvDg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test2 (3)
새로운 WebSocket 연결 (화상통신 준비): c_S9kFjJC-r9Hn9BAACL
연결 정보: {
  id: 'c_S9kFjJC-r9Hn9BAACL',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: c_S9kFjJC-r9Hn9BAACL IP: 192.168.200.108
새로운 WebSocket 연결: c_S9kFjJC-r9Hn9BAACL
2025-09-08T09:42:44.816Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
2025-09-08T09:42:44.825Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.902Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=c_S9kFjJC-r9Hn9BAACL
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:44.904Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (2) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.907Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=c_S9kFjJC-r9Hn9BAACL
📋 맵 3의 최종 참가자 수: 1
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 1 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.914Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:42:44.916Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
WebSocket 인증 성공: 2 test1
Auth 미들웨어 - 인증 성공, 사용자: test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:44.927Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:45.030Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 1
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 1
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 2, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:45.041Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:45.668Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:45.680Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:45.687Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:45.690Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:45.705Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:42:45.707Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test1 (2)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:45.916Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:45.928Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:45.989Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:45.999Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:42:46.012Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:42:46.025Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: answer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: offer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: answer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.610Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 809.7579321960721, y: 195.4665058372304 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 809.7579321960721, y: 195.4665058372304 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 809.7579321960721, y: 195.4665058372304 },
  '마지막활동': '2025-09-08T09:44:04.613Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 809.7579321960721, y: 195.4665058372304 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 809.7579321960721, y: 195.4665058372304 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 809.7579321960721, y: 195.4665058372304 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.627Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 811.5817868494976, y: 200.10050564335853 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 811.5817868494976, y: 200.10050564335853 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 811.5817868494976, y: 200.10050564335853 },
  '마지막활동': '2025-09-08T09:44:04.631Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 811.5817868494976, y: 200.10050564335853 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 811.5817868494976, y: 200.10050564335853 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 811.5817868494976, y: 200.10050564335853 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.645Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 813.4166285791475, y: 204.76242111096693 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 813.4166285791475, y: 204.76242111096693 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 813.4166285791475, y: 204.76242111096693 },
  '마지막활동': '2025-09-08T09:44:04.647Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 813.4166285791475, y: 204.76242111096693 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 813.4166285791475, y: 204.76242111096693 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 813.4166285791475, y: 204.76242111096693 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.661Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 815.2404832325714, y: 209.396420917091 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 815.2404832325714, y: 209.396420917091 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 815.2404832325714, y: 209.396420917091 },
  '마지막활동': '2025-09-08T09:44:04.663Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 815.2404832325714, y: 209.396420917091 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 815.2404832325714, y: 209.396420917091 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 815.2404832325714, y: 209.396420917091 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.677Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 817.0753249622229, y: 214.05833638470347 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 817.0753249622229, y: 214.05833638470347 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 817.0753249622229, y: 214.05833638470347 },
  '마지막활동': '2025-09-08T09:44:04.680Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 817.0753249622229, y: 214.05833638470347 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 817.0753249622229, y: 214.05833638470347 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 817.0753249622229, y: 214.05833638470347 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.694Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 818.9101666918729, y: 218.72025185231186 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 818.9101666918729, y: 218.72025185231186 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 818.9101666918729, y: 218.72025185231186 },
  '마지막활동': '2025-09-08T09:44:04.697Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 818.9101666918729, y: 218.72025185231186 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 818.9101666918729, y: 218.72025185231186 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 818.9101666918729, y: 218.72025185231186 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.721Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 820.7450084215228, y: 223.38216731992026 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 820.7450084215228, y: 223.38216731992026 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 820.7450084215228, y: 223.38216731992026 },
  '마지막활동': '2025-09-08T09:44:04.724Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 820.7450084215228, y: 223.38216731992026 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 820.7450084215228, y: 223.38216731992026 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 820.7450084215228, y: 223.38216731992026 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.727Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 822.5688630749482, y: 228.0161671260484 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 822.5688630749482, y: 228.0161671260484 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 822.5688630749482, y: 228.0161671260484 },
  '마지막활동': '2025-09-08T09:44:04.730Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 822.5688630749482, y: 228.0161671260484 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 822.5688630749482, y: 228.0161671260484 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 822.5688630749482, y: 228.0161671260484 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.741Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 824.4037048045982, y: 232.6780825936568 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 824.4037048045982, y: 232.6780825936568 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 824.4037048045982, y: 232.6780825936568 },
  '마지막활동': '2025-09-08T09:44:04.745Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 824.4037048045982, y: 232.6780825936568 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 824.4037048045982, y: 232.6780825936568 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 824.4037048045982, y: 232.6780825936568 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.759Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 826.2385465342481, y: 237.3399980612652 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 826.2385465342481, y: 237.3399980612652 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 826.2385465342481, y: 237.3399980612652 },
  '마지막활동': '2025-09-08T09:44:04.761Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 826.2385465342481, y: 237.3399980612652 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 826.2385465342481, y: 237.3399980612652 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 826.2385465342481, y: 237.3399980612652 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.774Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 828.0624011876736, y: 241.97399786739334 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 828.0624011876736, y: 241.97399786739334 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 828.0624011876736, y: 241.97399786739334 },
  '마지막활동': '2025-09-08T09:44:04.777Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 828.0624011876736, y: 241.97399786739334 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 828.0624011876736, y: 241.97399786739334 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 828.0624011876736, y: 241.97399786739334 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.793Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 829.8972429173235, y: 246.63591333500173 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 829.8972429173235, y: 246.63591333500173 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 829.8972429173235, y: 246.63591333500173 },
  '마지막활동': '2025-09-08T09:44:04.797Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 829.8972429173235, y: 246.63591333500173 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 829.8972429173235, y: 246.63591333500173 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 829.8972429173235, y: 246.63591333500173 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.809Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 831.7320846469735, y: 251.29782880261013 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 831.7320846469735, y: 251.29782880261013 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 831.7320846469735, y: 251.29782880261013 },
  '마지막활동': '2025-09-08T09:44:04.812Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 831.7320846469735, y: 251.29782880261013 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 831.7320846469735, y: 251.29782880261013 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 831.7320846469735, y: 251.29782880261013 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.826Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 833.5559393003989, y: 255.93182860873827 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 833.5559393003989, y: 255.93182860873827 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 833.5559393003989, y: 255.93182860873827 },
  '마지막활동': '2025-09-08T09:44:04.829Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 833.5559393003989, y: 255.93182860873827 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 833.5559393003989, y: 255.93182860873827 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 833.5559393003989, y: 255.93182860873827 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.846Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 835.3907810300489, y: 260.5937440763467 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 835.3907810300489, y: 260.5937440763467 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 835.3907810300489, y: 260.5937440763467 },
  '마지막활동': '2025-09-08T09:44:04.850Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 835.3907810300489, y: 260.5937440763467 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 835.3907810300489, y: 260.5937440763467 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 835.3907810300489, y: 260.5937440763467 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.858Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 837.2256227596988, y: 265.2556595439551 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 837.2256227596988, y: 265.2556595439551 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 837.2256227596988, y: 265.2556595439551 },
  '마지막활동': '2025-09-08T09:44:04.861Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 837.2256227596988, y: 265.2556595439551 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 837.2256227596988, y: 265.2556595439551 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 837.2256227596988, y: 265.2556595439551 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.874Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 839.0494774131242, y: 269.88965935008326 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 839.0494774131242, y: 269.88965935008326 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 839.0494774131242, y: 269.88965935008326 },
  '마지막활동': '2025-09-08T09:44:04.877Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 839.0494774131242, y: 269.88965935008326 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 839.0494774131242, y: 269.88965935008326 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 839.0494774131242, y: 269.88965935008326 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.897Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 840.8843191427742, y: 274.5515748176917 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 840.8843191427742, y: 274.5515748176917 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 840.8843191427742, y: 274.5515748176917 },
  '마지막활동': '2025-09-08T09:44:04.900Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 840.8843191427742, y: 274.5515748176917 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 840.8843191427742, y: 274.5515748176917 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 840.8843191427742, y: 274.5515748176917 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.908Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 842.7191608724241, y: 279.2134902853001 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 842.7191608724241, y: 279.2134902853001 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 842.7191608724241, y: 279.2134902853001 },
  '마지막활동': '2025-09-08T09:44:04.911Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 842.7191608724241, y: 279.2134902853001 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 842.7191608724241, y: 279.2134902853001 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 842.7191608724241, y: 279.2134902853001 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.926Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 844.5430155258496, y: 283.84749009142826 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 844.5430155258496, y: 283.84749009142826 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 844.5430155258496, y: 283.84749009142826 },
  '마지막활동': '2025-09-08T09:44:04.929Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 844.5430155258496, y: 283.84749009142826 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 844.5430155258496, y: 283.84749009142826 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 844.5430155258496, y: 283.84749009142826 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 846.3778572554995, y: 288.5094055590367 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 846.3778572554995, y: 288.5094055590367 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 846.3778572554995, y: 288.5094055590367 },
  '마지막활동': '2025-09-08T09:44:04.946Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 846.3778572554995, y: 288.5094055590367 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 846.3778572554995, y: 288.5094055590367 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 846.3778572554995, y: 288.5094055590367 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.961Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 848.2017119089234, y: 293.1434053651608 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 848.2017119089234, y: 293.1434053651608 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 848.2017119089234, y: 293.1434053651608 },
  '마지막활동': '2025-09-08T09:44:04.964Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 848.2017119089234, y: 293.1434053651608 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 848.2017119089234, y: 293.1434053651608 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 848.2017119089234, y: 293.1434053651608 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.977Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 850.0475407147994, y: 297.8332364942535 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 850.0475407147994, y: 297.8332364942535 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 850.0475407147994, y: 297.8332364942535 },
  '마지막활동': '2025-09-08T09:44:04.980Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 850.0475407147994, y: 297.8332364942535 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 850.0475407147994, y: 297.8332364942535 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 850.0475407147994, y: 297.8332364942535 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:04.995Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 851.8713953682249, y: 302.46723630038167 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 851.8713953682249, y: 302.46723630038167 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 851.8713953682249, y: 302.46723630038167 },
  '마지막활동': '2025-09-08T09:44:04.998Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 851.8713953682249, y: 302.46723630038167 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 851.8713953682249, y: 302.46723630038167 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 851.8713953682249, y: 302.46723630038167 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.008Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 853.6952500216487, y: 307.1012361065058 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 853.6952500216487, y: 307.1012361065058 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 853.6952500216487, y: 307.1012361065058 },
  '마지막활동': '2025-09-08T09:44:05.011Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 853.6952500216487, y: 307.1012361065058 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 853.6952500216487, y: 307.1012361065058 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 853.6952500216487, y: 307.1012361065058 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.043Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 857.4528300907541, y: 316.648392333589 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 857.4528300907541, y: 316.648392333589 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 857.4528300907541, y: 316.648392333589 },
  '마지막활동': '2025-09-08T09:44:05.047Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 857.4528300907541, y: 316.648392333589 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 857.4528300907541, y: 316.648392333589 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 857.4528300907541, y: 316.648392333589 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.058Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 859.2876718204041, y: 321.31030780119744 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 859.2876718204041, y: 321.31030780119744 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 859.2876718204041, y: 321.31030780119744 },
  '마지막활동': '2025-09-08T09:44:05.061Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 859.2876718204041, y: 321.31030780119744 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 859.2876718204041, y: 321.31030780119744 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 859.2876718204041, y: 321.31030780119744 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.076Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 861.122513550054, y: 325.97222326880586 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 861.122513550054, y: 325.97222326880586 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 861.122513550054, y: 325.97222326880586 },
  '마지막활동': '2025-09-08T09:44:05.080Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 861.122513550054, y: 325.97222326880586 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 861.122513550054, y: 325.97222326880586 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 861.122513550054, y: 325.97222326880586 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.093Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 862.9463682034794, y: 330.606223074934 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 862.9463682034794, y: 330.606223074934 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 862.9463682034794, y: 330.606223074934 },
  '마지막활동': '2025-09-08T09:44:05.096Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 862.9463682034794, y: 330.606223074934 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 862.9463682034794, y: 330.606223074934 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 862.9463682034794, y: 330.606223074934 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.109Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 864.7812099331294, y: 335.26813854254243 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 864.7812099331294, y: 335.26813854254243 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 864.7812099331294, y: 335.26813854254243 },
  '마지막활동': '2025-09-08T09:44:05.112Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 864.7812099331294, y: 335.26813854254243 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 864.7812099331294, y: 335.26813854254243 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 864.7812099331294, y: 335.26813854254243 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.126Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 866.6160516627793, y: 339.93005401015085 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 866.6160516627793, y: 339.93005401015085 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 866.6160516627793, y: 339.93005401015085 },
  '마지막활동': '2025-09-08T09:44:05.129Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 866.6160516627793, y: 339.93005401015085 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 866.6160516627793, y: 339.93005401015085 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 866.6160516627793, y: 339.93005401015085 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.142Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 868.4399063162048, y: 344.564053816279 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 868.4399063162048, y: 344.564053816279 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 868.4399063162048, y: 344.564053816279 },
  '마지막활동': '2025-09-08T09:44:05.145Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 868.4399063162048, y: 344.564053816279 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 868.4399063162048, y: 344.564053816279 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 868.4399063162048, y: 344.564053816279 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.159Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 870.2747480458547, y: 349.2259692838874 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 870.2747480458547, y: 349.2259692838874 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 870.2747480458547, y: 349.2259692838874 },
  '마지막활동': '2025-09-08T09:44:05.162Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 870.2747480458547, y: 349.2259692838874 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 870.2747480458547, y: 349.2259692838874 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 870.2747480458547, y: 349.2259692838874 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.175Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 872.0986026992786, y: 353.85996909001153 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 872.0986026992786, y: 353.85996909001153 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 872.0986026992786, y: 353.85996909001153 },
  '마지막활동': '2025-09-08T09:44:05.178Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 872.0986026992786, y: 353.85996909001153 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 872.0986026992786, y: 353.85996909001153 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 872.0986026992786, y: 353.85996909001153 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.193Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 873.9334444289301, y: 358.521884557624 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 873.9334444289301, y: 358.521884557624 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 873.9334444289301, y: 358.521884557624 },
  '마지막활동': '2025-09-08T09:44:05.196Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 873.9334444289301, y: 358.521884557624 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 873.9334444289301, y: 358.521884557624 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 873.9334444289301, y: 358.521884557624 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.210Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 875.76828615858, y: 363.1838000252324 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 875.76828615858, y: 363.1838000252324 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 875.76828615858, y: 363.1838000252324 },
  '마지막활동': '2025-09-08T09:44:05.213Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 875.76828615858, y: 363.1838000252324 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 875.76828615858, y: 363.1838000252324 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 875.76828615858, y: 363.1838000252324 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.228Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 877.60312788823, y: 367.84571549284084 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 877.60312788823, y: 367.84571549284084 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 877.60312788823, y: 367.84571549284084 },
  '마지막활동': '2025-09-08T09:44:05.232Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 877.60312788823, y: 367.84571549284084 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 877.60312788823, y: 367.84571549284084 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 877.60312788823, y: 367.84571549284084 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.242Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 879.4269825416554, y: 372.479715298969 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 879.4269825416554, y: 372.479715298969 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 879.4269825416554, y: 372.479715298969 },
  '마지막활동': '2025-09-08T09:44:05.246Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 879.4269825416554, y: 372.479715298969 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 879.4269825416554, y: 372.479715298969 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 879.4269825416554, y: 372.479715298969 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.261Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 881.2618242713054, y: 377.1416307665774 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 881.2618242713054, y: 377.1416307665774 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 881.2618242713054, y: 377.1416307665774 },
  '마지막활동': '2025-09-08T09:44:05.264Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 881.2618242713054, y: 377.1416307665774 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 881.2618242713054, y: 377.1416307665774 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 881.2618242713054, y: 377.1416307665774 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.276Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 883.0966660009553, y: 381.80354623418583 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 883.0966660009553, y: 381.80354623418583 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 883.0966660009553, y: 381.80354623418583 },
  '마지막활동': '2025-09-08T09:44:05.279Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 883.0966660009553, y: 381.80354623418583 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 883.0966660009553, y: 381.80354623418583 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 883.0966660009553, y: 381.80354623418583 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.294Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 884.9315077306053, y: 386.46546170179425 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 884.9315077306053, y: 386.46546170179425 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 884.9315077306053, y: 386.46546170179425 },
  '마지막활동': '2025-09-08T09:44:05.296Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 884.9315077306053, y: 386.46546170179425 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 884.9315077306053, y: 386.46546170179425 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 884.9315077306053, y: 386.46546170179425 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.310Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 886.7553623840307, y: 391.0994615079224 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 886.7553623840307, y: 391.0994615079224 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 886.7553623840307, y: 391.0994615079224 },
  '마지막활동': '2025-09-08T09:44:05.313Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 886.7553623840307, y: 391.0994615079224 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 886.7553623840307, y: 391.0994615079224 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 886.7553623840307, y: 391.0994615079224 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.328Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 888.5792170374546, y: 395.7334613140465 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 888.5792170374546, y: 395.7334613140465 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 888.5792170374546, y: 395.7334613140465 },
  '마지막활동': '2025-09-08T09:44:05.331Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 888.5792170374546, y: 395.7334613140465 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 888.5792170374546, y: 395.7334613140465 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 888.5792170374546, y: 395.7334613140465 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.346Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 890.4140587671061, y: 400.39537678165897 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 890.4140587671061, y: 400.39537678165897 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 890.4140587671061, y: 400.39537678165897 },
  '마지막활동': '2025-09-08T09:44:05.348Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 890.4140587671061, y: 400.39537678165897 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 890.4140587671061, y: 400.39537678165897 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 890.4140587671061, y: 400.39537678165897 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.362Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 892.2379134205299, y: 405.0293765877831 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 892.2379134205299, y: 405.0293765877831 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 892.2379134205299, y: 405.0293765877831 },
  '마지막활동': '2025-09-08T09:44:05.364Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 892.2379134205299, y: 405.0293765877831 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 892.2379134205299, y: 405.0293765877831 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 892.2379134205299, y: 405.0293765877831 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.380Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 894.083742226406, y: 409.7192077168758 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 894.083742226406, y: 409.7192077168758 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 894.083742226406, y: 409.7192077168758 },
  '마지막활동': '2025-09-08T09:44:05.386Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 894.083742226406, y: 409.7192077168758 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 894.083742226406, y: 409.7192077168758 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 894.083742226406, y: 409.7192077168758 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.401Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 895.9075968798314, y: 414.35320752300396 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 895.9075968798314, y: 414.35320752300396 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 895.9075968798314, y: 414.35320752300396 },
  '마지막활동': '2025-09-08T09:44:05.404Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 895.9075968798314, y: 414.35320752300396 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 895.9075968798314, y: 414.35320752300396 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 895.9075968798314, y: 414.35320752300396 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.416Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 897.7424386094814, y: 419.0151229906124 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 897.7424386094814, y: 419.0151229906124 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 897.7424386094814, y: 419.0151229906124 },
  '마지막활동': '2025-09-08T09:44:05.419Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 897.7424386094814, y: 419.0151229906124 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 897.7424386094814, y: 419.0151229906124 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 897.7424386094814, y: 419.0151229906124 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.430Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 899.5772803391313, y: 423.6770384582208 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 899.5772803391313, y: 423.6770384582208 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 899.5772803391313, y: 423.6770384582208 },
  '마지막활동': '2025-09-08T09:44:05.434Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 899.5772803391313, y: 423.6770384582208 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 899.5772803391313, y: 423.6770384582208 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 899.5772803391313, y: 423.6770384582208 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.445Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 901.4011349925568, y: 428.31103826434895 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 901.4011349925568, y: 428.31103826434895 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 901.4011349925568, y: 428.31103826434895 },
  '마지막활동': '2025-09-08T09:44:05.448Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 901.4011349925568, y: 428.31103826434895 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 901.4011349925568, y: 428.31103826434895 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 901.4011349925568, y: 428.31103826434895 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.460Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 903.2249896459806, y: 432.94503807047306 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 903.2249896459806, y: 432.94503807047306 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 903.2249896459806, y: 432.94503807047306 },
  '마지막활동': '2025-09-08T09:44:05.463Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 903.2249896459806, y: 432.94503807047306 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 903.2249896459806, y: 432.94503807047306 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 903.2249896459806, y: 432.94503807047306 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.477Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 905.0598313756306, y: 437.6069535380815 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 905.0598313756306, y: 437.6069535380815 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 905.0598313756306, y: 437.6069535380815 },
  '마지막활동': '2025-09-08T09:44:05.481Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 905.0598313756306, y: 437.6069535380815 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 905.0598313756306, y: 437.6069535380815 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 905.0598313756306, y: 437.6069535380815 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.497Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 906.8946731052821, y: 442.26886900569394 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 906.8946731052821, y: 442.26886900569394 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 906.8946731052821, y: 442.26886900569394 },
  '마지막활동': '2025-09-08T09:44:05.501Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 906.8946731052821, y: 442.26886900569394 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 906.8946731052821, y: 442.26886900569394 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 906.8946731052821, y: 442.26886900569394 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.512Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 908.729514834932, y: 446.93078447330237 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 908.729514834932, y: 446.93078447330237 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 908.729514834932, y: 446.93078447330237 },
  '마지막활동': '2025-09-08T09:44:05.516Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 908.729514834932, y: 446.93078447330237 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 908.729514834932, y: 446.93078447330237 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 908.729514834932, y: 446.93078447330237 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:05.528Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 910.5533694883559, y: 451.5647842794265 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 910.5533694883559, y: 451.5647842794265 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 910.5533694883559, y: 451.5647842794265 },
  '마지막활동': '2025-09-08T09:44:05.532Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 910.5533694883559, y: 451.5647842794265 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 910.5533694883559, y: 451.5647842794265 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 910.5533694883559, y: 451.5647842794265 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.374Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 906.3903330379108, y: 449.17540621970784 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 906.3903330379108, y: 449.17540621970784 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 906.3903330379108, y: 449.17540621970784 },
  '마지막활동': '2025-09-08T09:44:08.377Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 906.3903330379108, y: 449.17540621970784 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 906.3903330379108, y: 449.17540621970784 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 906.3903330379108, y: 449.17540621970784 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.393Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 902.0711827205723, y: 446.6964264827489 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 902.0711827205723, y: 446.6964264827489 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 902.0711827205723, y: 446.6964264827489 },
  '마지막활동': '2025-09-08T09:44:08.394Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 902.0711827205723, y: 446.6964264827489 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 902.0711827205723, y: 446.6964264827489 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 902.0711827205723, y: 446.6964264827489 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.408Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 897.7260134254209, y: 444.202513132918 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 897.7260134254209, y: 444.202513132918 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 897.7260134254209, y: 444.202513132918 },
  '마지막활동': '2025-09-08T09:44:08.411Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 897.7260134254209, y: 444.202513132918 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 897.7260134254209, y: 444.202513132918 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 897.7260134254209, y: 444.202513132918 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.426Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 893.3808441302695, y: 441.7085997830871 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 893.3808441302695, y: 441.7085997830871 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 893.3808441302695, y: 441.7085997830871 },
  '마지막활동': '2025-09-08T09:44:08.429Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 893.3808441302695, y: 441.7085997830871 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 893.3808441302695, y: 441.7085997830871 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 893.3808441302695, y: 441.7085997830871 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.443Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 889.061693812931, y: 439.22962004612816 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 889.061693812931, y: 439.22962004612816 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 889.061693812931, y: 439.22962004612816 },
  '마지막활동': '2025-09-08T09:44:08.446Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 889.061693812931, y: 439.22962004612816 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 889.061693812931, y: 439.22962004612816 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 889.061693812931, y: 439.22962004612816 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.459Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 884.7165245177796, y: 436.73570669629726 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 884.7165245177796, y: 436.73570669629726 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 884.7165245177796, y: 436.73570669629726 },
  '마지막활동': '2025-09-08T09:44:08.462Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 884.7165245177796, y: 436.73570669629726 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 884.7165245177796, y: 436.73570669629726 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 884.7165245177796, y: 436.73570669629726 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.476Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 880.3713552226282, y: 434.24179334646635 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 880.3713552226282, y: 434.24179334646635 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 880.3713552226282, y: 434.24179334646635 },
  '마지막활동': '2025-09-08T09:44:08.479Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 880.3713552226282, y: 434.24179334646635 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 880.3713552226282, y: 434.24179334646635 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 880.3713552226282, y: 434.24179334646635 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.496Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 876.0522049052897, y: 431.7628136095074 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 876.0522049052897, y: 431.7628136095074 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 876.0522049052897, y: 431.7628136095074 },
  '마지막활동': '2025-09-08T09:44:08.499Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 876.0522049052897, y: 431.7628136095074 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 876.0522049052897, y: 431.7628136095074 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 876.0522049052897, y: 431.7628136095074 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.510Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 871.7330545879552, y: 429.28383387255064 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 871.7330545879552, y: 429.28383387255064 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 871.7330545879552, y: 429.28383387255064 },
  '마지막활동': '2025-09-08T09:44:08.513Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 871.7330545879552, y: 429.28383387255064 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 871.7330545879552, y: 429.28383387255064 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 871.7330545879552, y: 429.28383387255064 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.526Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 867.3878852928037, y: 426.78992052271974 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 867.3878852928037, y: 426.78992052271974 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 867.3878852928037, y: 426.78992052271974 },
  '마지막활동': '2025-09-08T09:44:08.529Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 867.3878852928037, y: 426.78992052271974 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 867.3878852928037, y: 426.78992052271974 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 867.3878852928037, y: 426.78992052271974 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.542Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 863.0427159976485, y: 424.2960071728867 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 863.0427159976485, y: 424.2960071728867 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 863.0427159976485, y: 424.2960071728867 },
  '마지막활동': '2025-09-08T09:44:08.545Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 863.0427159976485, y: 424.2960071728867 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 863.0427159976485, y: 424.2960071728867 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 863.0427159976485, y: 424.2960071728867 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.559Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 858.6975467024971, y: 421.80209382305577 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 858.6975467024971, y: 421.80209382305577 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 858.6975467024971, y: 421.80209382305577 },
  '마지막활동': '2025-09-08T09:44:08.561Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 858.6975467024971, y: 421.80209382305577 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 858.6975467024971, y: 421.80209382305577 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 858.6975467024971, y: 421.80209382305577 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.574Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 854.3783963851625, y: 419.323114086099 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 854.3783963851625, y: 419.323114086099 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 854.3783963851625, y: 419.323114086099 },
  '마지막활동': '2025-09-08T09:44:08.577Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 854.3783963851625, y: 419.323114086099 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 854.3783963851625, y: 419.323114086099 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 854.3783963851625, y: 419.323114086099 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.592Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 850.0332270900074, y: 416.82920073626593 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 850.0332270900074, y: 416.82920073626593 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 850.0332270900074, y: 416.82920073626593 },
  '마지막활동': '2025-09-08T09:44:08.594Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 850.0332270900074, y: 416.82920073626593 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 850.0332270900074, y: 416.82920073626593 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 850.0332270900074, y: 416.82920073626593 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.612Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 845.7140767726728, y: 414.35022099930916 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 845.7140767726728, y: 414.35022099930916 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 845.7140767726728, y: 414.35022099930916 },
  '마지막활동': '2025-09-08T09:44:08.614Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 845.7140767726728, y: 414.35022099930916 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 845.7140767726728, y: 414.35022099930916 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 845.7140767726728, y: 414.35022099930916 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.625Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 841.3689074775214, y: 411.85630764947825 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 841.3689074775214, y: 411.85630764947825 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 841.3689074775214, y: 411.85630764947825 },
  '마지막활동': '2025-09-08T09:44:08.628Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 841.3689074775214, y: 411.85630764947825 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 841.3689074775214, y: 411.85630764947825 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 841.3689074775214, y: 411.85630764947825 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.641Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 837.0237381823662, y: 409.3623942996452 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 837.0237381823662, y: 409.3623942996452 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 837.0237381823662, y: 409.3623942996452 },
  '마지막활동': '2025-09-08T09:44:08.644Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 837.0237381823662, y: 409.3623942996452 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 837.0237381823662, y: 409.3623942996452 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 837.0237381823662, y: 409.3623942996452 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.660Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 832.6785688872147, y: 406.8684809498143 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 832.6785688872147, y: 406.8684809498143 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 832.6785688872147, y: 406.8684809498143 },
  '마지막활동': '2025-09-08T09:44:08.663Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 832.6785688872147, y: 406.8684809498143 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 832.6785688872147, y: 406.8684809498143 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 832.6785688872147, y: 406.8684809498143 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.675Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 828.3333995920633, y: 404.3745675999834 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 828.3333995920633, y: 404.3745675999834 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 828.3333995920633, y: 404.3745675999834 },
  '마지막활동': '2025-09-08T09:44:08.678Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 828.3333995920633, y: 404.3745675999834 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 828.3333995920633, y: 404.3745675999834 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 828.3333995920633, y: 404.3745675999834 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.692Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 824.0142492747249, y: 401.89558786302445 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 824.0142492747249, y: 401.89558786302445 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 824.0142492747249, y: 401.89558786302445 },
  '마지막활동': '2025-09-08T09:44:08.695Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 824.0142492747249, y: 401.89558786302445 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 824.0142492747249, y: 401.89558786302445 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 824.0142492747249, y: 401.89558786302445 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.708Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 819.6690799795734, y: 399.40167451319354 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 819.6690799795734, y: 399.40167451319354 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 819.6690799795734, y: 399.40167451319354 },
  '마지막활동': '2025-09-08T09:44:08.711Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 819.6690799795734, y: 399.40167451319354 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 819.6690799795734, y: 399.40167451319354 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 819.6690799795734, y: 399.40167451319354 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.736Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 815.323910684422, y: 396.90776116336264 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 815.323910684422, y: 396.90776116336264 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 815.323910684422, y: 396.90776116336264 },
  '마지막활동': '2025-09-08T09:44:08.738Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 815.323910684422, y: 396.90776116336264 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 815.323910684422, y: 396.90776116336264 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 815.323910684422, y: 396.90776116336264 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:08.743Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 812, y: 395 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 812, y: 395 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 812, y: 395 },
  '마지막활동': '2025-09-08T09:44:08.747Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 812, y: 395 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 812, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 812, y: 395 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏓 Ping 전송 완료: 3개 소켓
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.825Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 810.6258765791912, y: 399.59910695944166 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 810.6258765791912, y: 399.59910695944166 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 810.6258765791912, y: 399.59910695944166 },
  '마지막활동': '2025-09-08T09:44:18.828Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 810.6258765791912, y: 399.59910695944166 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 810.6258765791912, y: 399.59910695944166 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 810.6258765791912, y: 399.59910695944166 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.842Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 809.2002235301015, y: 404.3706804298641 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 809.2002235301015, y: 404.3706804298641 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 809.2002235301015, y: 404.3706804298641 },
  '마지막활동': '2025-09-08T09:44:18.845Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 809.2002235301015, y: 404.3706804298641 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 809.2002235301015, y: 404.3706804298641 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 809.2002235301015, y: 404.3706804298641 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.859Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 807.7659822096339, y: 409.1709983187763 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 807.7659822096339, y: 409.1709983187763 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 807.7659822096339, y: 409.1709983187763 },
  '마지막활동': '2025-09-08T09:44:18.861Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 807.7659822096339, y: 409.1709983187763 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 807.7659822096339, y: 409.1709983187763 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 807.7659822096339, y: 409.1709983187763 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.876Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 806.3317408891637, y: 413.9713162076969 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 806.3317408891637, y: 413.9713162076969 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 806.3317408891637, y: 413.9713162076969 },
  '마지막활동': '2025-09-08T09:44:18.878Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 806.3317408891637, y: 413.9713162076969 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 806.3317408891637, y: 413.9713162076969 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 806.3317408891637, y: 413.9713162076969 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.893Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 804.9060878400741, y: 418.7428896781193 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 804.9060878400741, y: 418.7428896781193 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 804.9060878400741, y: 418.7428896781193 },
  '마지막활동': '2025-09-08T09:44:18.896Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 804.9060878400741, y: 418.7428896781193 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 804.9060878400741, y: 418.7428896781193 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 804.9060878400741, y: 418.7428896781193 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.910Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 803.4718465196064, y: 423.5432075670315 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 803.4718465196064, y: 423.5432075670315 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 803.4718465196064, y: 423.5432075670315 },
  '마지막활동': '2025-09-08T09:44:18.912Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 803.4718465196064, y: 423.5432075670315 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 803.4718465196064, y: 423.5432075670315 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 803.4718465196064, y: 423.5432075670315 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.925Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 802.0376051991362, y: 428.3435254559521 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 802.0376051991362, y: 428.3435254559521 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 802.0376051991362, y: 428.3435254559521 },
  '마지막활동': '2025-09-08T09:44:18.927Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 802.0376051991362, y: 428.3435254559521 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 802.0376051991362, y: 428.3435254559521 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 802.0376051991362, y: 428.3435254559521 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.943Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 800.6033638786661, y: 433.14384334487266 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 800.6033638786661, y: 433.14384334487266 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 800.6033638786661, y: 433.14384334487266 },
  '마지막활동': '2025-09-08T09:44:18.945Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 800.6033638786661, y: 433.14384334487266 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 800.6033638786661, y: 433.14384334487266 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 800.6033638786661, y: 433.14384334487266 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.959Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 799.1777108295789, y: 437.9154168152867 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 799.1777108295789, y: 437.9154168152867 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 799.1777108295789, y: 437.9154168152867 },
  '마지막활동': '2025-09-08T09:44:18.961Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 799.1777108295789, y: 437.9154168152867 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 799.1777108295789, y: 437.9154168152867 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 799.1777108295789, y: 437.9154168152867 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.976Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 797.7434695091088, y: 442.71573470420725 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 797.7434695091088, y: 442.71573470420725 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 797.7434695091088, y: 442.71573470420725 },
  '마지막활동': '2025-09-08T09:44:18.978Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 797.7434695091088, y: 442.71573470420725 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 797.7434695091088, y: 442.71573470420725 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 797.7434695091088, y: 442.71573470420725 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:18.993Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 796.3178164600191, y: 447.4873081746297 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 796.3178164600191, y: 447.4873081746297 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 796.3178164600191, y: 447.4873081746297 },
  '마지막활동': '2025-09-08T09:44:18.995Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 796.3178164600191, y: 447.4873081746297 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 796.3178164600191, y: 447.4873081746297 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 796.3178164600191, y: 447.4873081746297 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.010Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 794.8835751395515, y: 452.2876260635419 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 794.8835751395515, y: 452.2876260635419 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 794.8835751395515, y: 452.2876260635419 },
  '마지막활동': '2025-09-08T09:44:19.013Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 794.8835751395515, y: 452.2876260635419 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 794.8835751395515, y: 452.2876260635419 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 794.8835751395515, y: 452.2876260635419 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.024Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 793.4579220904618, y: 457.0591995339643 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 793.4579220904618, y: 457.0591995339643 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 793.4579220904618, y: 457.0591995339643 },
  '마지막활동': '2025-09-08T09:44:19.027Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 793.4579220904618, y: 457.0591995339643 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 793.4579220904618, y: 457.0591995339643 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 793.4579220904618, y: 457.0591995339643 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.053Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 792.0236807699916, y: 461.8595174228849 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 792.0236807699916, y: 461.8595174228849 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 792.0236807699916, y: 461.8595174228849 },
  '마지막활동': '2025-09-08T09:44:19.054Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 792.0236807699916, y: 461.8595174228849 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 792.0236807699916, y: 461.8595174228849 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 792.0236807699916, y: 461.8595174228849 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.064Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 790.589439449524, y: 466.6598353117971 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 790.589439449524, y: 466.6598353117971 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 790.589439449524, y: 466.6598353117971 },
  '마지막활동': '2025-09-08T09:44:19.066Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 790.589439449524, y: 466.6598353117971 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 790.589439449524, y: 466.6598353117971 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 790.589439449524, y: 466.6598353117971 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.078Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 789.1637864004343, y: 471.43140878221953 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 789.1637864004343, y: 471.43140878221953 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 789.1637864004343, y: 471.43140878221953 },
  '마지막활동': '2025-09-08T09:44:19.080Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 789.1637864004343, y: 471.43140878221953 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 789.1637864004343, y: 471.43140878221953 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 789.1637864004343, y: 471.43140878221953 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.093Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 787.7295450799642, y: 476.2317266711401 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 787.7295450799642, y: 476.2317266711401 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 787.7295450799642, y: 476.2317266711401 },
  '마지막활동': '2025-09-08T09:44:19.095Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 787.7295450799642, y: 476.2317266711401 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 787.7295450799642, y: 476.2317266711401 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 787.7295450799642, y: 476.2317266711401 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.112Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 786.2953037594965, y: 481.0320445600523 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 786.2953037594965, y: 481.0320445600523 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 786.2953037594965, y: 481.0320445600523 },
  '마지막활동': '2025-09-08T09:44:19.115Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 786.2953037594965, y: 481.0320445600523 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 786.2953037594965, y: 481.0320445600523 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 786.2953037594965, y: 481.0320445600523 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.126Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 784.8610624390263, y: 485.8323624489729 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 784.8610624390263, y: 485.8323624489729 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 784.8610624390263, y: 485.8323624489729 },
  '마지막활동': '2025-09-08T09:44:19.129Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 784.8610624390263, y: 485.8323624489729 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 784.8610624390263, y: 485.8323624489729 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 784.8610624390263, y: 485.8323624489729 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.141Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.4354093899367, y: 490.6039359193953 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 783.4354093899367, y: 490.6039359193953 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.4354093899367, y: 490.6039359193953 },
  '마지막활동': '2025-09-08T09:44:19.144Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.4354093899367, y: 490.6039359193953 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 783.4354093899367, y: 490.6039359193953 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.4354093899367, y: 490.6039359193953 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.159Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 781.9925797980885, y: 495.43299822680575 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 781.9925797980885, y: 495.43299822680575 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 781.9925797980885, y: 495.43299822680575 },
  '마지막활동': '2025-09-08T09:44:19.161Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 781.9925797980885, y: 495.43299822680575 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 781.9925797980885, y: 495.43299822680575 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 781.9925797980885, y: 495.43299822680575 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.175Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 780.5669267489989, y: 500.2045716972282 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 780.5669267489989, y: 500.2045716972282 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 780.5669267489989, y: 500.2045716972282 },
  '마지막활동': '2025-09-08T09:44:19.178Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 780.5669267489989, y: 500.2045716972282 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 780.5669267489989, y: 500.2045716972282 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 780.5669267489989, y: 500.2045716972282 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.191Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.1412736999092, y: 504.9761451676506 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 779.1412736999092, y: 504.9761451676506 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.1412736999092, y: 504.9761451676506 },
  '마지막활동': '2025-09-08T09:44:19.194Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.1412736999092, y: 504.9761451676506 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 779.1412736999092, y: 504.9761451676506 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.1412736999092, y: 504.9761451676506 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.210Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 777.7070323794416, y: 509.7764630565628 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 777.7070323794416, y: 509.7764630565628 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 777.7070323794416, y: 509.7764630565628 },
  '마지막활동': '2025-09-08T09:44:19.213Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 777.7070323794416, y: 509.7764630565628 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 777.7070323794416, y: 509.7764630565628 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 777.7070323794416, y: 509.7764630565628 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.228Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 776.2727910589714, y: 514.5767809454834 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 776.2727910589714, y: 514.5767809454834 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 776.2727910589714, y: 514.5767809454834 },
  '마지막활동': '2025-09-08T09:44:19.232Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 776.2727910589714, y: 514.5767809454834 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 776.2727910589714, y: 514.5767809454834 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 776.2727910589714, y: 514.5767809454834 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.248Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 774.8385497385012, y: 519.377098834404 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 774.8385497385012, y: 519.377098834404 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 774.8385497385012, y: 519.377098834404 },
  '마지막활동': '2025-09-08T09:44:19.251Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 774.8385497385012, y: 519.377098834404 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 774.8385497385012, y: 519.377098834404 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 774.8385497385012, y: 519.377098834404 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.262Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 773.4043084180336, y: 524.1774167233162 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 773.4043084180336, y: 524.1774167233162 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 773.4043084180336, y: 524.1774167233162 },
  '마지막활동': '2025-09-08T09:44:19.265Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 773.4043084180336, y: 524.1774167233162 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 773.4043084180336, y: 524.1774167233162 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 773.4043084180336, y: 524.1774167233162 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.278Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 771.9786553689439, y: 528.9489901937386 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 771.9786553689439, y: 528.9489901937386 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 771.9786553689439, y: 528.9489901937386 },
  '마지막활동': '2025-09-08T09:44:19.281Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 771.9786553689439, y: 528.9489901937386 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 771.9786553689439, y: 528.9489901937386 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 771.9786553689439, y: 528.9489901937386 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.291Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 770.5444140484738, y: 533.7493080826592 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 770.5444140484738, y: 533.7493080826592 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 770.5444140484738, y: 533.7493080826592 },
  '마지막활동': '2025-09-08T09:44:19.294Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 770.5444140484738, y: 533.7493080826592 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 770.5444140484738, y: 533.7493080826592 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 770.5444140484738, y: 533.7493080826592 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.308Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 769.1187609993866, y: 538.5208815530733 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 769.1187609993866, y: 538.5208815530733 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 769.1187609993866, y: 538.5208815530733 },
  '마지막활동': '2025-09-08T09:44:19.311Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 769.1187609993866, y: 538.5208815530733 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 769.1187609993866, y: 538.5208815530733 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 769.1187609993866, y: 538.5208815530733 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.329Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.6845196789164, y: 543.3211994419939 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 767.6845196789164, y: 543.3211994419939 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.6845196789164, y: 543.3211994419939 },
  '마지막활동': '2025-09-08T09:44:19.332Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.6845196789164, y: 543.3211994419939 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 767.6845196789164, y: 543.3211994419939 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.6845196789164, y: 543.3211994419939 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.344Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 766.2502783584463, y: 548.1215173309146 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 766.2502783584463, y: 548.1215173309146 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 766.2502783584463, y: 548.1215173309146 },
  '마지막활동': '2025-09-08T09:44:19.346Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 766.2502783584463, y: 548.1215173309146 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 766.2502783584463, y: 548.1215173309146 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 766.2502783584463, y: 548.1215173309146 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.359Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 764.8160370379786, y: 552.9218352198268 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 764.8160370379786, y: 552.9218352198268 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 764.8160370379786, y: 552.9218352198268 },
  '마지막활동': '2025-09-08T09:44:19.361Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 764.8160370379786, y: 552.9218352198268 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 764.8160370379786, y: 552.9218352198268 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 764.8160370379786, y: 552.9218352198268 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.378Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 763.390383988889, y: 557.6934086902492 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 763.390383988889, y: 557.6934086902492 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 763.390383988889, y: 557.6934086902492 },
  '마지막활동': '2025-09-08T09:44:19.381Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 763.390383988889, y: 557.6934086902492 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 763.390383988889, y: 557.6934086902492 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 763.390383988889, y: 557.6934086902492 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:19.399Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 763, y: 559 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 763, y: 559 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 763, y: 559 },
  '마지막활동': '2025-09-08T09:44:19.402Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 763, y: 559 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 763, y: 559 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 763, y: 559 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: offer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: offer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: llv1cQKi78olbA6LAACH
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: answer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: answer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.342Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 762.5983600335439, y: 554.2168331267511 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 762.5983600335439, y: 554.2168331267511 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 762.5983600335439, y: 554.2168331267511 },
  '마지막활동': '2025-09-08T09:44:20.345Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 762.5983600335439, y: 554.2168331267511 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 762.5983600335439, y: 554.2168331267511 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 762.5983600335439, y: 554.2168331267511 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.360Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 762.1791483185559, y: 549.2244027028029 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 762.1791483185559, y: 549.2244027028029 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 762.1791483185559, y: 549.2244027028029 },
  '마지막활동': '2025-09-08T09:44:20.363Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 762.1791483185559, y: 549.2244027028029 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 762.1791483185559, y: 549.2244027028029 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 762.1791483185559, y: 549.2244027028029 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.375Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 761.7599366035672, y: 544.2319722788459 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 761.7599366035672, y: 544.2319722788459 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 761.7599366035672, y: 544.2319722788459 },
  '마지막활동': '2025-09-08T09:44:20.378Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 761.7599366035672, y: 544.2319722788459 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 761.7599366035672, y: 544.2319722788459 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 761.7599366035672, y: 544.2319722788459 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.392Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 761.3407248885785, y: 539.2395418548889 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 761.3407248885785, y: 539.2395418548889 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 761.3407248885785, y: 539.2395418548889 },
  '마지막활동': '2025-09-08T09:44:20.395Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 761.3407248885785, y: 539.2395418548889 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 761.3407248885785, y: 539.2395418548889 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 761.3407248885785, y: 539.2395418548889 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.412Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 760.9215131735905, y: 534.2471114309407 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 760.9215131735905, y: 534.2471114309407 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 760.9215131735905, y: 534.2471114309407 },
  '마지막활동': '2025-09-08T09:44:20.415Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 760.9215131735905, y: 534.2471114309407 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 760.9215131735905, y: 534.2471114309407 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 760.9215131735905, y: 534.2471114309407 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.428Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 760.5048117083923, y: 529.2845757999432 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 760.5048117083923, y: 529.2845757999432 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 760.5048117083923, y: 529.2845757999432 },
  '마지막활동': '2025-09-08T09:44:20.431Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 760.5048117083923, y: 529.2845757999432 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 760.5048117083923, y: 529.2845757999432 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 760.5048117083923, y: 529.2845757999432 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.444Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 760.088110243194, y: 524.3220401689458 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 760.088110243194, y: 524.3220401689458 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 760.088110243194, y: 524.3220401689458 },
  '마지막활동': '2025-09-08T09:44:20.447Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 760.088110243194, y: 524.3220401689458 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 760.088110243194, y: 524.3220401689458 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 760.088110243194, y: 524.3220401689458 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.461Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 759.668898528206, y: 519.3296097449976 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 759.668898528206, y: 519.3296097449976 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 759.668898528206, y: 519.3296097449976 },
  '마지막활동': '2025-09-08T09:44:20.464Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 759.668898528206, y: 519.3296097449976 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 759.668898528206, y: 519.3296097449976 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 759.668898528206, y: 519.3296097449976 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.477Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 759.2496868132173, y: 514.3371793210406 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 759.2496868132173, y: 514.3371793210406 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 759.2496868132173, y: 514.3371793210406 },
  '마지막활동': '2025-09-08T09:44:20.480Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 759.2496868132173, y: 514.3371793210406 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 759.2496868132173, y: 514.3371793210406 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 759.2496868132173, y: 514.3371793210406 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.493Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 758.8329853480191, y: 509.3746436900432 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 758.8329853480191, y: 509.3746436900432 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 758.8329853480191, y: 509.3746436900432 },
  '마지막활동': '2025-09-08T09:44:20.496Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 758.8329853480191, y: 509.3746436900432 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 758.8329853480191, y: 509.3746436900432 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 758.8329853480191, y: 509.3746436900432 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.510Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 758.413773633031, y: 504.3822132660949 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 758.413773633031, y: 504.3822132660949 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 758.413773633031, y: 504.3822132660949 },
  '마지막활동': '2025-09-08T09:44:20.513Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 758.413773633031, y: 504.3822132660949 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 758.413773633031, y: 504.3822132660949 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 758.413773633031, y: 504.3822132660949 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.527Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 757.9945619180422, y: 499.3897828421379 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 757.9945619180422, y: 499.3897828421379 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 757.9945619180422, y: 499.3897828421379 },
  '마지막활동': '2025-09-08T09:44:20.529Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 757.9945619180422, y: 499.3897828421379 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 757.9945619180422, y: 499.3897828421379 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 757.9945619180422, y: 499.3897828421379 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.547Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 757.5753502030535, y: 494.3973524181809 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 757.5753502030535, y: 494.3973524181809 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 757.5753502030535, y: 494.3973524181809 },
  '마지막활동': '2025-09-08T09:44:20.550Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 757.5753502030535, y: 494.3973524181809 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 757.5753502030535, y: 494.3973524181809 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 757.5753502030535, y: 494.3973524181809 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.562Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 757.158648737856, y: 489.4348167871922 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 757.158648737856, y: 489.4348167871922 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 757.158648737856, y: 489.4348167871922 },
  '마지막활동': '2025-09-08T09:44:20.565Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 757.158648737856, y: 489.4348167871922 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 757.158648737856, y: 489.4348167871922 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 757.158648737856, y: 489.4348167871922 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.578Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 756.7394370228672, y: 484.4423863632352 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 756.7394370228672, y: 484.4423863632352 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 756.7394370228672, y: 484.4423863632352 },
  '마지막활동': '2025-09-08T09:44:20.581Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 756.7394370228672, y: 484.4423863632352 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 756.7394370228672, y: 484.4423863632352 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 756.7394370228672, y: 484.4423863632352 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.595Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 756.3202253078784, y: 479.4499559392782 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 756.3202253078784, y: 479.4499559392782 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 756.3202253078784, y: 479.4499559392782 },
  '마지막활동': '2025-09-08T09:44:20.598Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 756.3202253078784, y: 479.4499559392782 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 756.3202253078784, y: 479.4499559392782 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 756.3202253078784, y: 479.4499559392782 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.611Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 755.9035238426809, y: 474.4874203082895 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 755.9035238426809, y: 474.4874203082895 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 755.9035238426809, y: 474.4874203082895 },
  '마지막활동': '2025-09-08T09:44:20.614Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 755.9035238426809, y: 474.4874203082895 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 755.9035238426809, y: 474.4874203082895 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 755.9035238426809, y: 474.4874203082895 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.630Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 755.4843121276921, y: 469.4949898843325 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 755.4843121276921, y: 469.4949898843325 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 755.4843121276921, y: 469.4949898843325 },
  '마지막활동': '2025-09-08T09:44:20.632Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 755.4843121276921, y: 469.4949898843325 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 755.4843121276921, y: 469.4949898843325 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 755.4843121276921, y: 469.4949898843325 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.645Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 755.0651004127034, y: 464.5025594603755 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 755.0651004127034, y: 464.5025594603755 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 755.0651004127034, y: 464.5025594603755 },
  '마지막활동': '2025-09-08T09:44:20.648Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 755.0651004127034, y: 464.5025594603755 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 755.0651004127034, y: 464.5025594603755 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 755.0651004127034, y: 464.5025594603755 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.662Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 754.6458886977153, y: 459.5101290364272 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 754.6458886977153, y: 459.5101290364272 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 754.6458886977153, y: 459.5101290364272 },
  '마지막활동': '2025-09-08T09:44:20.666Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 754.6458886977153, y: 459.5101290364272 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 754.6458886977153, y: 459.5101290364272 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 754.6458886977153, y: 459.5101290364272 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.679Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 754.2266769827265, y: 454.5176986124702 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 754.2266769827265, y: 454.5176986124702 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 754.2266769827265, y: 454.5176986124702 },
  '마지막활동': '2025-09-08T09:44:20.682Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 754.2266769827265, y: 454.5176986124702 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 754.2266769827265, y: 454.5176986124702 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 754.2266769827265, y: 454.5176986124702 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.697Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 753.8099755175283, y: 449.5551629814728 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 753.8099755175283, y: 449.5551629814728 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 753.8099755175283, y: 449.5551629814728 },
  '마지막활동': '2025-09-08T09:44:20.700Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 753.8099755175283, y: 449.5551629814728 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 753.8099755175283, y: 449.5551629814728 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 753.8099755175283, y: 449.5551629814728 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.716Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 753.3932740523308, y: 444.59262735048407 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 753.3932740523308, y: 444.59262735048407 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 753.3932740523308, y: 444.59262735048407 },
  '마지막활동': '2025-09-08T09:44:20.719Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 753.3932740523308, y: 444.59262735048407 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 753.3932740523308, y: 444.59262735048407 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 753.3932740523308, y: 444.59262735048407 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.734Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 752.9715520875515, y: 439.57030213356757 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 752.9715520875515, y: 439.57030213356757 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 752.9715520875515, y: 439.57030213356757 },
  '마지막활동': '2025-09-08T09:44:20.737Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 752.9715520875515, y: 439.57030213356757 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 752.9715520875515, y: 439.57030213356757 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 752.9715520875515, y: 439.57030213356757 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.746Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 752.5548506223532, y: 434.60776650257014 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 752.5548506223532, y: 434.60776650257014 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 752.5548506223532, y: 434.60776650257014 },
  '마지막활동': '2025-09-08T09:44:20.749Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 752.5548506223532, y: 434.60776650257014 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 752.5548506223532, y: 434.60776650257014 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 752.5548506223532, y: 434.60776650257014 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.763Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 752.1356389073652, y: 429.61533607862185 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 752.1356389073652, y: 429.61533607862185 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 752.1356389073652, y: 429.61533607862185 },
  '마지막활동': '2025-09-08T09:44:20.765Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 752.1356389073652, y: 429.61533607862185 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 752.1356389073652, y: 429.61533607862185 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 752.1356389073652, y: 429.61533607862185 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:20.779Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 752, y: 428 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 752, y: 428 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 752, y: 428 },
  '마지막활동': '2025-09-08T09:44:20.782Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 752, y: 428 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 752, y: 428 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 752, y: 428 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.697Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 755.8078847652333, y: 425.07766983133257 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 755.8078847652333, y: 425.07766983133257 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 755.8078847652333, y: 425.07766983133257 },
  '마지막활동': '2025-09-08T09:44:22.700Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 755.8078847652333, y: 425.07766983133257 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 755.8078847652333, y: 425.07766983133257 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 755.8078847652333, y: 425.07766983133257 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.711Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 759.7585652091574, y: 422.04575228134433 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 759.7585652091574, y: 422.04575228134433 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 759.7585652091574, y: 422.04575228134433 },
  '마지막활동': '2025-09-08T09:44:22.713Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 759.7585652091574, y: 422.04575228134433 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 759.7585652091574, y: 422.04575228134433 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 759.7585652091574, y: 422.04575228134433 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.731Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 763.7330449328724, y: 418.99557016779556 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 763.7330449328724, y: 418.99557016779556 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 763.7330449328724, y: 418.99557016779556 },
  '마지막활동': '2025-09-08T09:44:22.733Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 763.7330449328724, y: 418.99557016779556 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 763.7330449328724, y: 418.99557016779556 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 763.7330449328724, y: 418.99557016779556 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.750Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 767.7075246565875, y: 415.9453880542468 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 767.7075246565875, y: 415.9453880542468 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 767.7075246565875, y: 415.9453880542468 },
  '마지막활동': '2025-09-08T09:44:22.753Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 767.7075246565875, y: 415.9453880542468 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 767.7075246565875, y: 415.9453880542468 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 767.7075246565875, y: 415.9453880542468 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.766Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 771.6820043802956, y: 412.89520594070336 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 771.6820043802956, y: 412.89520594070336 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 771.6820043802956, y: 412.89520594070336 },
  '마지막활동': '2025-09-08T09:44:22.769Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 771.6820043802956, y: 412.89520594070336 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 771.6820043802956, y: 412.89520594070336 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 771.6820043802956, y: 412.89520594070336 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.784Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 775.6326848242265, y: 409.86328839070984 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 775.6326848242265, y: 409.86328839070984 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 775.6326848242265, y: 409.86328839070984 },
  '마지막활동': '2025-09-08T09:44:22.787Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 775.6326848242265, y: 409.86328839070984 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 775.6326848242265, y: 409.86328839070984 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 775.6326848242265, y: 409.86328839070984 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.797Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 779.6071645479416, y: 406.81310627716107 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 779.6071645479416, y: 406.81310627716107 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 779.6071645479416, y: 406.81310627716107 },
  '마지막활동': '2025-09-08T09:44:22.801Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 779.6071645479416, y: 406.81310627716107 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 779.6071645479416, y: 406.81310627716107 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 779.6071645479416, y: 406.81310627716107 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.815Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 783.5578449918656, y: 403.78118872717283 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 783.5578449918656, y: 403.78118872717283 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 783.5578449918656, y: 403.78118872717283 },
  '마지막활동': '2025-09-08T09:44:22.818Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 783.5578449918656, y: 403.78118872717283 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 783.5578449918656, y: 403.78118872717283 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 783.5578449918656, y: 403.78118872717283 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.830Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 787.5323247155807, y: 400.73100661362406 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 787.5323247155807, y: 400.73100661362406 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 787.5323247155807, y: 400.73100661362406 },
  '마지막활동': '2025-09-08T09:44:22.833Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 787.5323247155807, y: 400.73100661362406 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 787.5323247155807, y: 400.73100661362406 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 787.5323247155807, y: 400.73100661362406 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.847Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 791.5068044392957, y: 397.6808245000753 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 791.5068044392957, y: 397.6808245000753 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 791.5068044392957, y: 397.6808245000753 },
  '마지막활동': '2025-09-08T09:44:22.850Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 791.5068044392957, y: 397.6808245000753 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 791.5068044392957, y: 397.6808245000753 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: {
  mapId: 3,
  position: { x: 791.5068044392957, y: 397.6808245000753 },
  participants: 3
}
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🚪 whl19810312 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:22.864Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: whl19810312 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user whl19810312 (1) left room 3
🏠 whl19810312 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 795, y: 395 },
  characterInfo: '없음',
  userId: 1
}
🏠 whl19810312 맵 입장 - 초기 위치 설정: { x: 795, y: 395 }
📊 로그인 사용자 정보 업데이트: whl19810312 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 795, y: 395 },
  '마지막활동': '2025-09-08T09:44:22.868Z'
}
✅ 방 정보 영구 보존: whl19810312 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: whl19810312 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 795, y: 395 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.678Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 3
🏠 whl19810312 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 795, y: 395 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 1 → 맵 3
💾 사용자 입실 상태 DB 저장: 1 → 맵 null
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'p1GDzwLrCAu-tZmLAACF',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:44:27 PM'
}
WebSocket 연결 해제: p1GDzwLrCAu-tZmLAACF
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'llv1cQKi78olbA6LAACH',
  userId: 3,
  username: 'test2',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:44:27 PM'
}
📊 [오프라인] 사용자 상태 변경: test2 (ID: 3)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:27.387Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test2 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🧹 [시스템] 소켓 정리 완료: test2 (3)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: llv1cQKi78olbA6LAACH
2025-09-08T09:44:28.037Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.042Z - OPTIONS /api/auth/user/me from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.042Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:44:28.057Z - GET /api/auth/user/me from 192.168.200.102 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 3, username: 'test2' }
2025-09-08T09:44:28.073Z - OPTIONS /api/maps/3 from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.074Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.092Z - OPTIONS /api/maps from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.103Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.103Z - GET /api/maps/3 from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:44:28.115Z - OPTIONS /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 3 }
2025-09-08T09:44:28.122Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
2025-09-08T09:44:28.124Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
Auth 미들웨어 - 인증 성공, 사용자: test2
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
2025-09-08T09:44:28.154Z - GET /api/characters from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'bCI2C7Yp47EO+DD8fQH/TQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
Auth 미들웨어 - 인증 성공, 사용자: test2
새로운 WebSocket 연결 (화상통신 준비): ZlQ1VEAUqty2HgqxAACN
연결 정보: {
  id: 'ZlQ1VEAUqty2HgqxAACN',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ZlQ1VEAUqty2HgqxAACN IP: 192.168.200.102
새로운 WebSocket 연결: ZlQ1VEAUqty2HgqxAACN
2025-09-08T09:44:28.185Z - GET /api/maps from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    cookie: 'OVJSESSIONID=3731B3BEA901DB6320367129330EB457',
    'sec-websocket-key': 'KLQQcO+XhzpLL3wu6bLAcA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:44:28.222Z - OPTIONS /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
2025-09-08T09:44:28.231Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
Auth 미들웨어 - 인증 성공, 사용자: test2
새로운 WebSocket 연결 (화상통신 준비): Rtylembj_nAGvEKgAACP
연결 정보: {
  id: 'Rtylembj_nAGvEKgAACP',
  ip: '192.168.200.102',
  userAgent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Rtylembj_nAGvEKgAACP IP: 192.168.200.102
새로운 WebSocket 연결: Rtylembj_nAGvEKgAACP
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:28.258Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Rtylembj_nAGvEKgAACP
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:28.261Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:28.262Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Rtylembj_nAGvEKgAACP
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 undefined leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:28.264Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: undefined → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user undefined (3) left room 3
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:28.266Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [오프라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=Rtylembj_nAGvEKgAACP
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:44:28.270Z - GET /api/user/logged-in-users from 192.168.200.102 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 3
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:28.273Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 3 test2
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
WebSocket 인증 성공: 3 test2
Auth 미들웨어 - 인증 성공, 사용자: test2
✅ 인증 성공: test2 (3)
🔄 [온라인] 사용자 이전 입실 상태 복원: test2 (ID: 3) → 맵 3
   📍 이전 위치: (808, 191), 방향: down
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:28.291Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test2 (3)
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:29.274Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🔄 자동 재입장 시도: test2 → 맵 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🚪 test2 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:29.292Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: null,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:29.302Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:29.305Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🚪 test2 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:29.310Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 wait (방 wait) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test2 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test2 (3) left room 3
🏠 test2 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 3
}
🏠 test2 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test2 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:29.313Z'
}
✅ 방 정보 영구 보존: test2 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test2 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:44.927Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: test1 (2)
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 3
🏠 test2 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
💾 사용자 입실 상태 DB 저장: 3 → 맵 null
💾 사용자 입실 상태 DB 저장: 3 → 맵 3
📡 WebRTC 시그널 수신: offer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: offer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test2 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: answer from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: c_S9kFjJC-r9Hn9BAACL
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: answer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'N2o6Cvts2iTaS-7hAACJ',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:44:55 PM'
}
WebSocket 연결 해제: N2o6Cvts2iTaS-7hAACJ
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'c_S9kFjJC-r9Hn9BAACL',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:44:55 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:55.044Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: c_S9kFjJC-r9Hn9BAACL
2025-09-08T09:44:56.154Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.166Z - OPTIONS /api/auth/user/me from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.166Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:44:56.199Z - GET /api/auth/user/me from 192.168.200.108 (HTTPS: true)
👤 현재 사용자 정보 조회: { userId: 2, username: 'test1' }
2025-09-08T09:44:56.262Z - OPTIONS /api/maps/3 from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.278Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.313Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.313Z - OPTIONS /api/characters from 192.168.200.108 (HTTPS: true)
2025-09-08T09:44:56.339Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:44:56.341Z - GET /api/maps/3 from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:44:56.342Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
2025-09-08T09:44:56.343Z - OPTIONS /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - 인증 성공, 사용자: test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🔍 서버: 맵 조회 요청: { mapId: '3', userId: 2 }
🔍 서버: 맵 조회 결과: 성공
✅ 서버: 맵 조회 성공: { id: 3, name: 'TEST ROOM', creatorId: 1 }
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '1RX2zInveCivR9Bx3JstLw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
2025-09-08T09:44:56.387Z - GET /api/characters from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
새로운 WebSocket 연결 (화상통신 준비): mNdZOZ6RVR1MF_TgAACR
연결 정보: {
  id: 'mNdZOZ6RVR1MF_TgAACR',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: mNdZOZ6RVR1MF_TgAACR IP: 192.168.200.108
새로운 WebSocket 연결: mNdZOZ6RVR1MF_TgAACR
2025-09-08T09:44:56.440Z - GET /api/maps from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
Auth 미들웨어 - 인증 성공, 사용자: test1
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'pA77nHf7/HPLJYf/+COZxg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): GWNnS4vvJhaeseBvAACT
연결 정보: {
  id: 'GWNnS4vvJhaeseBvAACT',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: GWNnS4vvJhaeseBvAACT IP: 192.168.200.108
새로운 WebSocket 연결: GWNnS4vvJhaeseBvAACT
🏠 undefined 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 undefined 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:56.553Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: undefined {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
🧟 좀비 사용자 제거: userId=undefined, username="undefined", socketId=GWNnS4vvJhaeseBvAACT
📋 맵 3의 최종 참가자 수: 2
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
🏠 undefined 맵 입장 완료 - 최종 상태: { mapId: 3, position: undefined, participants: 2 }
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:56.557Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:56.559Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
2025-09-08T09:44:56.561Z - OPTIONS /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:56.562Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:56.564Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:56.559Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
2025-09-08T09:44:56.578Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
WebSocket 인증 성공: 2 test1
Auth 미들웨어 - 인증 성공, 사용자: test1
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:56.619Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 808, y: 191 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 808, y: 191 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 808, y: 191 },
  '마지막활동': '2025-09-08T09:44:56.631Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 808, y: 191 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:56.559Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 808, y: 191 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
2025-09-08T09:44:56.641Z - GET /api/user/logged-in-users from 192.168.200.108 (HTTPS: true)
Auth 미들웨어 - Authorization 헤더: 존재
Auth 미들웨어 - 토큰 확인: eyJhbGciOiJIUzI1NiIs...
Auth 미들웨어 - 토큰 디코딩 성공, userId: 2
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
Auth 미들웨어 - 인증 성공, 사용자: test1
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:57.558Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:56.559Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:57.561Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:56.559Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:44:57.629Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:44:57.638Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:56.559Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: GWNnS4vvJhaeseBvAACT
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: GWNnS4vvJhaeseBvAACT
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: GWNnS4vvJhaeseBvAACT
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: GWNnS4vvJhaeseBvAACT
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: GWNnS4vvJhaeseBvAACT
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
⚠️ Ping 타임아웃 감지: test1 (GWNnS4vvJhaeseBvAACT) - 89971ms
🧟 좀비 소켓 정리 시작: test1 (GWNnS4vvJhaeseBvAACT)
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'GWNnS4vvJhaeseBvAACT',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:47:09 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:09.446Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: GWNnS4vvJhaeseBvAACT
📊 좀비 정리 - 사용자 오프라인 처리: test1 (방 정보 유지: 3)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:09.447Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
✅ 좀비 소켓 정리 완료: test1
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🏓 Ping 전송 완료: 2개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'mNdZOZ6RVR1MF_TgAACR',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:47:11 PM'
}
WebSocket 연결 해제: mNdZOZ6RVR1MF_TgAACR
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '8qiSuPKDtBs7OHsDV81TbQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): t_9oVc1xXQFak_PeAACV
연결 정보: {
  id: 't_9oVc1xXQFak_PeAACV',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: t_9oVc1xXQFak_PeAACV IP: 192.168.200.108
새로운 WebSocket 연결: t_9oVc1xXQFak_PeAACV
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'C02D2amdsYLTkz43ZBtXvw==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): U1tkbtJkKe6u2FhPAACX
연결 정보: {
  id: 'U1tkbtJkKe6u2FhPAACX',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: U1tkbtJkKe6u2FhPAACX IP: 192.168.200.108
새로운 WebSocket 연결: U1tkbtJkKe6u2FhPAACX
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:23.556Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:23.557Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:24.557Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:47:23.557Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:24.560Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:47:23.557Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:47:24.608Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:47:24.618Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:47:23.557Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: U1tkbtJkKe6u2FhPAACX
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: U1tkbtJkKe6u2FhPAACX
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: U1tkbtJkKe6u2FhPAACX
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: U1tkbtJkKe6u2FhPAACX
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: U1tkbtJkKe6u2FhPAACX
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 't_9oVc1xXQFak_PeAACV',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:48:48 PM'
}
WebSocket 연결 해제: t_9oVc1xXQFak_PeAACV
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'U1tkbtJkKe6u2FhPAACX',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:48:48 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:48:48.411Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: U1tkbtJkKe6u2FhPAACX
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'Jx3Yri4hlhbq/olsnWuiOA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): 20fKErF_r2K58H92AACZ
연결 정보: {
  id: '20fKErF_r2K58H92AACZ',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: 20fKErF_r2K58H92AACZ IP: 192.168.200.108
새로운 WebSocket 연결: 20fKErF_r2K58H92AACZ
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '1qGo4p+DiACyZih7hJRvPA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): n5Ho8cJPoo1XiOWlAACb
연결 정보: {
  id: 'n5Ho8cJPoo1XiOWlAACb',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: n5Ho8cJPoo1XiOWlAACb IP: 192.168.200.108
새로운 WebSocket 연결: n5Ho8cJPoo1XiOWlAACb
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:00.871Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:00.877Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
WebSocket 인증 성공: 2 test1
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:01.871Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:49:00.877Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:01.879Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:49:00.877Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:49:01.942Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:01.956Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:49:00.877Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:49:01.968Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:49:01.974Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:49:00.877Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 20fKErF_r2K58H92AACZ
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 20fKErF_r2K58H92AACZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 20fKErF_r2K58H92AACZ
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 20fKErF_r2K58H92AACZ
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: 20fKErF_r2K58H92AACZ
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: '20fKErF_r2K58H92AACZ',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:50:25 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:25.690Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: 20fKErF_r2K58H92AACZ
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'n5Ho8cJPoo1XiOWlAACb',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:50:25 PM'
}
WebSocket 연결 해제: n5Ho8cJPoo1XiOWlAACb
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'hTLZpBQr9PO5/eAqdzOS2g==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'mGWFexFZBwQ49HaYq5ngRg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ahw1mX051OoEzCCjAACe
연결 정보: {
  id: 'ahw1mX051OoEzCCjAACe',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ahw1mX051OoEzCCjAACe IP: 192.168.200.108
새로운 WebSocket 연결: ahw1mX051OoEzCCjAACe
새로운 WebSocket 연결 (화상통신 준비): Yo8xyJYItQ_RWSuGAACf
연결 정보: {
  id: 'Yo8xyJYItQ_RWSuGAACf',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: Yo8xyJYItQ_RWSuGAACf IP: 192.168.200.108
새로운 WebSocket 연결: Yo8xyJYItQ_RWSuGAACf
WebSocket 인증 성공: 2 test1
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:38.252Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:38.253Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:39.253Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:50:38.253Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:39.256Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:50:38.253Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:50:39.379Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:50:39.390Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:50:38.253Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🏓 Ping 전송 완료: 3개 소켓
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: Yo8xyJYItQ_RWSuGAACf
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'ahw1mX051OoEzCCjAACe',
  userId: undefined,
  username: undefined,
  mapId: undefined,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:52:53 PM'
}
WebSocket 연결 해제: ahw1mX051OoEzCCjAACe
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'Yo8xyJYItQ_RWSuGAACf',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:52:53 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:52:53.179Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: Yo8xyJYItQ_RWSuGAACf
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'oVKXXbmuB6rSNIEP/oLbBA==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): ISgugLP7rUeenctiAACh
연결 정보: {
  id: 'ISgugLP7rUeenctiAACh',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: ISgugLP7rUeenctiAACh IP: 192.168.200.108
새로운 WebSocket 연결: ISgugLP7rUeenctiAACh
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': '7OGjp0a5E1qQtp72ZzsAsg==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): XpIjOhCsXBTcZgVbAACj
연결 정보: {
  id: 'XpIjOhCsXBTcZgVbAACj',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: XpIjOhCsXBTcZgVbAACj IP: 192.168.200.108
새로운 WebSocket 연결: XpIjOhCsXBTcZgVbAACj
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:53:05.863Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:53:05.864Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 인증 성공: 2 test1
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:53:06.864Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:53:05.864Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🚪 test1 leaving room 3 (다른맵:true, 연결끊김:false)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:53:06.869Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:53:05.864Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:53:06.995Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:53:07.019Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:53:05.864Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: XpIjOhCsXBTcZgVbAACj
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
⚠️ 높은 지연 감지: test1 - 6285ms
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🔌 [오프라인] mini area WebSocket 연결 해제: {
  socketId: 'XpIjOhCsXBTcZgVbAACj',
  userId: 2,
  username: 'test1',
  mapId: 3,
  privateAreaId: undefined,
  timestamp: '9/8/2025, 6:58:00 PM'
}
📊 [오프라인] 사용자 상태 변경: test1 (ID: 2)
   입실 상태: 맵 3에 입실 중 → 오프라인 (방 정보 유지)
⚠️ mapId 삭제 시도 차단 - 유지: 3
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:58:00.674Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:true)
📊 연결 끊김 - 방 정보 유지: test1 맵 3
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
🧹 [시스템] 소켓 정리 완료: test1 (2)
📊 [시스템] 현재 사용자 상태:
   온라인: 2명, 오프라인: 1명
   활성 소켓: 2개
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 2명, 오프라인: 1명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [오프라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 2, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
WebSocket 연결 해제: XpIjOhCsXBTcZgVbAACj
🏓 Ping 전송 완료: 2개 소켓
WebSocket 초기 헤더: {
  'Access-Control-Allow-Origin': '*',
  'Access-Control-Allow-Credentials': 'true'
}
WebSocket 요청 정보: {
  method: 'GET',
  url: '/socket.io/?EIO=4&transport=websocket',
  headers: {
    host: '192.168.200.106:7000',
    connection: 'Upgrade',
    pragma: 'no-cache',
    'cache-control': 'no-cache',
    'user-agent': 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
    upgrade: 'websocket',
    origin: 'https://192.168.200.106:5173',
    'sec-websocket-version': '13',
    'accept-encoding': 'gzip, deflate, br, zstd',
    'accept-language': 'ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7',
    'sec-websocket-key': 'nhMdK2EETb2cqhOaMsxpyQ==',
    'sec-websocket-extensions': 'permessage-deflate; client_max_window_bits'
  },
  secure: undefined
}
새로운 WebSocket 연결 (화상통신 준비): J7XfFpGBv7rcKLweAACl
연결 정보: {
  id: 'J7XfFpGBv7rcKLweAACl',
  ip: '192.168.200.108',
  userAgent: 'Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36',
  origin: 'https://192.168.200.106:5173',
  secure: true
}
새로운 mini area WebSocket 연결: J7XfFpGBv7rcKLweAACl IP: 192.168.200.108
새로운 WebSocket 연결: J7XfFpGBv7rcKLweAACl
WebSocket 인증 성공: 2 test1
✅ 인증 성공: test1 (2)
🔄 [온라인] 사용자 이전 입실 상태 복원: test1 (ID: 2) → 맵 3
   📍 이전 위치: (200, 200), 방향: down
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:58:15.009Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📡 서버 상태 브로드캐스트
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 1, mapsCount: 1 }
📤 서버 상태 전송 to test1 (2)
🔄 자동 재입장 시도: test1 → 맵 3
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: null,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:58:16.010Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: null,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:58:15.009Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
🚪 test1 leaving room 3 (다른맵:false, 연결끊김:false)
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': '대기실',
  mapId: 'wait',
  '현재영역': '대기실',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': null,
  '마지막활동': '2025-09-08T09:58:16.934Z'
}
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 wait (방 wait) (undefined)
📊 명시적 퇴실 - 대기실로 이동: test1 → 대기실 (mapId: wait)
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 2
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 맵 3의 최종 참가자 수: 2
📢 leaveMap: Broadcasted updated participant list to room 3.
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
user test1 (2) left room 3
💾 사용자 입실 상태 DB 저장: 2 → 맵 null
🏠 test1 맵 입장 시작: {
  mapId: 3,
  characterId: undefined,
  position: { x: 200, y: 200 },
  characterInfo: '없음',
  userId: 2
}
🏠 test1 맵 입장 - 초기 위치 설정: { x: 200, y: 200 }
📊 로그인 사용자 정보 업데이트: test1 {
  '입실공간': 'TEST ROOM',
  mapId: 3,
  '현재영역': '공용 영역',
  privateAreaId: null,
  '캐릭터': undefined,
  '위치': { x: 200, y: 200 },
  '마지막활동': '2025-09-08T09:58:16.998Z'
}
✅ 방 정보 영구 보존: test1 → 맵 3 (TEST ROOM)
📊 [시스템] 전체 로그인 사용자 정보 브로드캐스트:
   전체: 3명 (온라인: 3명, 오프라인: 0명)
📊 [온라인] 입실 중인 사용자: test2 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: whl19810312 → 맵 3 (TEST ROOM) (undefined)
📊 [온라인] 입실 중인 사용자: test1 → 맵 3 (TEST ROOM) (undefined)
📊 사용자 입실 정보 저장 완료: test1 {
  mapId: 3,
  mapName: 'TEST ROOM',
  '캐릭터': '기본 캐릭터',
  '위치': { x: 200, y: 200 }
}
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
👥 방 3의 참가자 목록: [
  {
    userId: 1,
    username: 'whl19810312',
    characterId: undefined,
    position: { x: 795, y: 395 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:42:04.623Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 3,
    username: 'test2',
    characterId: undefined,
    position: { x: 808, y: 191 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:44:28.291Z,
    characterInfo: null,
    privateAreaId: null
  },
  {
    userId: 2,
    username: 'test1',
    characterId: undefined,
    position: { x: 200, y: 200 },
    direction: 'down',
    status: 'online',
    joinedAt: 2025-09-08T09:58:15.009Z,
    characterInfo: null,
    privateAreaId: null
  }
]
📢 Broadcasted updated participant list to room 3.
📋 맵 3의 참가자 조회 시작
📋 맵 3의 소켓 수: 3
📋 참가자 추가: whl19810312 (1)
📋 참가자 추가: test2 (3)
📋 참가자 추가: test1 (2)
📋 맵 3의 최종 참가자 수: 3
🏠 test1 맵 입장 완료 - 최종 상태: { mapId: 3, position: { x: 200, y: 200 }, participants: 3 }
🔄 서버 상태 업데이트: { totalUsers: 3, lobbyUsers: 0, mapsCount: 1 }
📡 서버 상태 브로드캐스트
💾 사용자 입실 상태 DB 저장: 2 → 맵 3
📡 WebRTC 시그널 수신: offer from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: offer from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: answer from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from whl19810312(1) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from whl19810312 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to whl19810312
🔍 userId로 찾기: whl19810312 -> Not found
🔍 username으로 찾기 성공: whl19810312 -> userId: 1, socketId: jHdGak-KqcavWC9ZAACD
📡 WebRTC 시그널 전달: ice-candidate from test1 to whl19810312
대상 사용자 whl19810312를 찾을 수 없음
📡 WebRTC 시그널 수신: offer from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: offer from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: answer from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: answer from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test2(3) to test1
🔍 userId로 찾기: test1 -> Not found
🔍 username으로 찾기 성공: test1 -> userId: 2, socketId: J7XfFpGBv7rcKLweAACl
📡 WebRTC 시그널 전달: ice-candidate from test2 to test1
대상 사용자 test1를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
📡 WebRTC 시그널 수신: ice-candidate from test1(2) to test2
🔍 userId로 찾기: test2 -> Not found
🔍 username으로 찾기 성공: test2 -> userId: 3, socketId: Rtylembj_nAGvEKgAACP
📡 WebRTC 시그널 전달: ice-candidate from test1 to test2
대상 사용자 test2를 찾을 수 없음
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
🏓 Ping 전송 완료: 3개 소켓
